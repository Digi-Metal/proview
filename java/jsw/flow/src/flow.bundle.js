!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=28)}([function(t,e,n){"use strict";function r(t){return t%2==0}function o(t){return t%2==1}function i(t,e,n){return t>n?n:t<e?e:t}var s,a,l,c,u,h,_,f,d,g,p;n.d(e,"o",function(){return r}),n.d(e,"p",function(){return o}),n.d(e,"n",function(){return i}),n.d(e,"j",function(){return s}),n.d(e,"a",function(){return l}),n.d(e,"b",function(){return c}),n.d(e,"k",function(){return u}),n.d(e,"m",function(){return h}),n.d(e,"l",function(){return _}),n.d(e,"h",function(){return C}),n.d(e,"g",function(){return x}),n.d(e,"c",function(){return y}),n.d(e,"e",function(){return d}),n.d(e,"d",function(){return g}),n.d(e,"f",function(){return w}),n.d(e,"i",function(){return A}),function(t){t[t.Bit=32769]="Bit",t[t.Boolean=98305]="Boolean",t[t.Float32=98306]="Float32",t[t.Float64=98307]="Float64",t[t.Char=98308]="Char",t[t.Int8=98309]="Int8",t[t.Int16=98310]="Int16",t[t.Int32=98311]="Int32",t[t.UInt8=98312]="UInt8",t[t.UInt16=98313]="UInt16",t[t.UInt32=98314]="UInt32",t[t.Objid=98315]="Objid",t[t.Buffer=98316]="Buffer",t[t.String=98317]="String",t[t.Enum=98318]="Enum",t[t.Struct=98319]="Struct",t[t.Mask=98320]="Mask",t[t.Array=98321]="Array",t[t.Time=98322]="Time",t[t.Text=98323]="Text",t[t.AttrRef=98324]="AttrRef",t[t.UInt64=98325]="UInt64",t[t.Int64=98326]="Int64",t[t.ClassId=98327]="ClassId",t[t.TypeId=98328]="TypeId",t[t.VolumeId=98329]="VolumeId",t[t.ObjectIx=98330]="ObjectIx",t[t.RefId=98331]="RefId",t[t.DeltaTime=98332]="DeltaTime",t[t.Status=98333]="Status",t[t.NetStatus=98334]="NetStatus",t[t.CastId=98335]="CastId",t[t.ProString=98336]="ProString",t[t.DisableAttr=98337]="DisableAttr",t[t.DataRef=98338]="DataRef"}(s||(s={})),function(t){t[t.RtRead=1]="RtRead",t[t.RtWrite=2]="RtWrite",t[t.System=4]="System",t[t.Maintenance=8]="Maintenance",t[t.Process=16]="Process",t[t.Instrument=32]="Instrument",t[t.Operator1=64]="Operator1",t[t.Operator2=128]="Operator2",t[t.Operator3=256]="Operator3",t[t.Operator4=512]="Operator4",t[t.Operator5=1024]="Operator5",t[t.Operator6=2048]="Operator6",t[t.Operator7=4096]="Operator7",t[t.Operator8=8192]="Operator8",t[t.Operator9=16384]="Operator9",t[t.Operator10=32768]="Operator10",t[t.RtEventsAck=262144]="RtEventsAck",t[t.RtPlc=524288]="RtPlc",t[t.RtNavigator=1048576]="RtNavigator",t[t.DevRead=2097152]="DevRead",t[t.DevPlc=4194304]="DevPlc",t[t.DevConfig=8388608]="DevConfig",t[t.DevClass=16777216]="DevClass",t[t.RtEventsBlock=33554432]="RtEventsBlock",t[t.Administrator=67108864]="Administrator",t[t.SevRead=134217728]="SevRead",t[t.SevAdmin=268435456]="SevAdmin"}(a||(a={})),function(t){t[t.RtRead=1]="RtRead",t[t.RtWrite=2]="RtWrite",t[t.System=4]="System",t[t.Maintenance=8]="Maintenance",t[t.Process=16]="Process",t[t.Instrument=32]="Instrument",t[t.RtEventsBlock=33554432]="RtEventsBlock",t[t.RtEventsAck=262144]="RtEventsAck",t[t.RtPlc=524288]="RtPlc",t[t.RtNavigator=1048576]="RtNavigator",t[t.AllRt=35454975]="AllRt",t[t.AllOperators=65472]="AllOperators",t[t.AllPwr=-1]="AllPwr"}(l||(l={})),function(t){t[t.Pointer=1]="Pointer",t[t.Array=2]="Array",t[t.Backup=4]="Backup",t[t.Changelog=8]="Changelog",t[t.State=16]="State",t[t.Const=32]="Const",t[t.Rtvirtual=64]="Rtvirtual",t[t.Devbodyref=128]="Devbodyref",t[t.Dynamic=256]="Dynamic",t[t.Publicwrite=512]="Publicwrite",t[t.Noedit=1024]="Noedit",t[t.Invisible=2048]="Invisible",t[t.Refdirect=4096]="Refdirect",t[t.Noinvert=8192]="Noinvert",t[t.Noremove=16384]="Noremove",t[t.Rtdbref=32768]="Rtdbref",t[t.Private=65536]="Private",t[t.Class=131072]="Class",t[t.Superclass=262144]="Superclass",t[t.Buffer=524288]="Buffer",t[t.Nowbl=1048576]="Nowbl",t[t.Alwayswbl=2097152]="Alwayswbl",t[t.Disableattr=4194304]="Disableattr",t[t.Rthide=8388608]="Rthide"}(c||(c={})),function(t){t[t.IsConfigured=1]="IsConfigured"}(u||(u={})),function(t){t[t.OpenGraph=1]="OpenGraph",t[t.OpenObjectGraph=2]="OpenObjectGraph",t[t.OpenTrend=4]="OpenTrend",t[t.OpenHistory=8]="OpenHistory",t[t.OpenFast=16]="OpenFast",t[t.Camera=32]="Camera",t[t.HistEvent=64]="HistEvent",t[t.BlockEvents=128]="BlockEvents",t[t.Help=256]="Help",t[t.Photo=512]="Photo",t[t.Note=1024]="Note",t[t.ParentObjectGraph=2048]="ParentObjectGraph"}(h||(h={})),function(t){t[t.OpenObject=1]="OpenObject",t[t.OpenTrace=2]="OpenTrace",t[t.RtNavigator=4]="RtNavigator",t[t.OpenCrossref=8]="OpenCrossref",t[t.HelpClass=16]="HelpClass",t[t.DataSheet=32]="DataSheet",t[t.CircuitDiagram=64]="CircuitDiagram",t[t.Simulate=-2147483648]="Simulate"}(_||(_={}));class C{constructor(t,e){this.oix=e,this.vid=t}}class x{}class y{constructor(t,e){this.value=t,this.sts=e}}!function(t){t[t.Min=65793]="Min",t[t.Max=16711422]="Max"}(f||(f={}));!function(t){t[t.Solid=0]="Solid",t[t.Dashed1=1]="Dashed1",t[t.Dashed2=2]="Dashed2",t[t.Dashed3=3]="Dashed3",t[t.Dotted=4]="Dotted",t[t.DotDashed1=5]="DotDashed1",t[t.DotDashed2=6]="DotDashed2"}(d||(d={})),function(t){t[t.No=0]="No",t[t.HorizontalUp=1]="HorizontalUp",t[t.HorizontalDown=2]="HorizontalDown",t[t.HorizontalTube1=3]="HorizontalTube1",t[t.HorizontalTube2=4]="HorizontalTube2",t[t.VerticalLeft=5]="VerticalLeft",t[t.VerticalRight=6]="VerticalRight",t[t.VerticalTube1=7]="VerticalTube1",t[t.VerticalTube2=8]="VerticalTube2",t[t.DiagonalUpperLeft=9]="DiagonalUpperLeft",t[t.DiagonalLowerLeft=10]="DiagonalLowerLeft",t[t.DiagonalUpperRight=11]="DiagonalUpperRight",t[t.DiagonalLowerRight=12]="DiagonalLowerRight",t[t.DiagonalUpTube=13]="DiagonalUpTube",t[t.DiagonalDownTube=14]="DiagonalDownTube",t[t.Globe=15]="Globe",t[t.RadialCenter=16]="RadialCenter",t[t.RadialUpperLeft=17]="RadialUpperLeft",t[t.RadialLowerLeft=18]="RadialLowerLeft",t[t.RadialUpperRight=19]="RadialUpperRight",t[t.RadialLowerRight=20]="RadialLowerRight"}(g||(g={}));!function(t){t[t._=0]="_",t[t.UserDefined=1]="UserDefined",t[t.OneSecond=2]="OneSecond",t[t.TenSeconds=3]="TenSeconds",t[t.OneMinute=4]="OneMinute",t[t.TenMinutes=5]="TenMinutes",t[t.OneHour=6]="OneHour",t[t.OneDay=7]="OneDay",t[t.OneWeek=8]="OneWeek",t[t.OneMonth=9]="OneMonth",t[t.OneYear=10]="OneYear",t[t.LastSecond=11]="LastSecond",t[t.LastTenSeconds=12]="LastTenSeconds",t[t.LastMinute=13]="LastMinute",t[t.LastTenMinutes=14]="LastTenMinutes",t[t.LastHour=15]="LastHour",t[t.Today=16]="Today",t[t.Yesterday=17]="Yesterday",t[t.ThisWeek=18]="ThisWeek",t[t.LastWeek=19]="LastWeek",t[t.ThisMonth=20]="ThisMonth",t[t.LastMonth=21]="LastMonth",t[t.ThisYear=22]="ThisYear",t[t.AllTime=23]="AllTime",t[t.__=24]="__"}(p||(p={}));class w{constructor(t,e){this.x=0,this.y=0,this.x=t||0,this.y=e||0}set(t){this.x=t.x,this.y=t.y}static add(t,e){return new w(t.x+e.x,t.y+e.y)}}class A{constructor(t=0,e=0,n=0,r=0){this.ll=new w(t,e),this.ur=new w(n,r)}set(t){this.ll.x=t.ll.x,this.ll.y=t.ll.y,this.ur.x=t.ur.x,this.ur.y=t.ur.y}width(){return this.ur.x-this.ll.x}height(){return this.ur.y-this.ll.y}static hit(t,e){return e.x>=t.ll.x&&e.x<=t.ur.x&&e.y>=t.ll.y&&e.y<=t.ur.y}static union(t,e){return new A(Math.min(t.ll.x,e.ll.x),Math.min(t.ll.y,e.ll.y),Math.max(t.ur.x,e.ur.x),Math.max(t.ur.y,e.ur.y))}}},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"l",function(){return i}),n.d(e,"i",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return c}),n.d(e,"h",function(){return u}),n.d(e,"g",function(){return h}),n.d(e,"e",function(){return _}),n.d(e,"a",function(){return f}),n.d(e,"f",function(){return g});const r=21008,o=21009;var i,s,a,l,c,u,h,_,f;!function(t){t[t.Full=0]="Full",t[t.Partial=1]="Partial",t[t.Top=2]="Top",t[t.Bottom=3]="Bottom",t[t.Right=4]="Right",t[t.Left=5]="Left"}(i||(i={})),function(t){t[t.NoObject=0]="NoObject",t[t.Node=1]="Node",t[t.Con=2]="Con",t[t.Rect=3]="Rect",t[t.Line=4]="Line",t[t.Arc=5]="Arc",t[t.Text=6]="Text",t[t.ConPoint=7]="ConPoint",t[t.Annot=8]="Annot",t[t.NodeClass=9]="NodeClass",t[t.ConClass=10]="ConClass",t[t.Arrow=11]="Arrow",t[t.Pixmap=12]="Pixmap",t[t.AnnotPixmap=13]="AnnotPixmap",t[t.Radiobutton=14]="Radiobutton",t[t.Frame=15]="Frame",t[t.Image=16]="Image",t[t.AnnotPixmapButton=17]="AnnotPixmapButton",t[t.Triangle=18]="Triangle"}(s||(s={})),function(t){t[t.IntoLast=0]="IntoLast",t[t.IntoFirst=1]="IntoFirst",t[t.After=2]="After",t[t.Before=3]="Before"}(a||(a={})),function(t){t[t.Attributes=1]="Attributes",t[t.Children=2]="Children",t[t.Crossreferences=4]="Crossreferences",t[t.All=7]="All"}(l||(l={})),function(t){t[t.Ctx=1]="Ctx",t[t.Array=2]="Array",t[t.NodeClass=3]="NodeClass",t[t.ConClass=4]="ConClass",t[t.Rect=5]="Rect",t[t.Line=6]="Line",t[t.Point=7]="Point",t[t.Arc=8]="Arc",t[t.Text=9]="Text",t[t.Node=10]="Node",t[t.Con=11]="Con",t[t.ConPoint=12]="ConPoint",t[t.Annot=13]="Annot",t[t.Arrow=14]="Arrow",t[t.Pixmap=15]="Pixmap",t[t.AnnotPixmap=16]="AnnotPixmap",t[t.Radiobutton=17]="Radiobutton",t[t.Frame=18]="Frame",t[t.AnnotPixmapButton=19]="AnnotPixmapButton",t[t.Triangle=20]="Triangle",t[t.End=99]="End",t[t.Ctx_zoom_factor=100]="Ctx_zoom_factor",t[t.Ctx_base_zoom_factor=101]="Ctx_base_zoom_factor",t[t.Ctx_offset_x=102]="Ctx_offset_x",t[t.Ctx_offset_y=103]="Ctx_offset_y",t[t.Ctx_nav_zoom_factor=104]="Ctx_nav_zoom_factor",t[t.Ctx_print_zoom_factor=105]="Ctx_print_zoom_factor",t[t.Ctx_nav_offset_x=106]="Ctx_nav_offset_x",t[t.Ctx_nav_offset_y=107]="Ctx_nav_offset_y",t[t.Ctx_x_right=108]="Ctx_x_right",t[t.Ctx_x_left=109]="Ctx_x_left",t[t.Ctx_y_high=110]="Ctx_y_high",t[t.Ctx_y_low=111]="Ctx_y_low",t[t.Ctx_window_width=112]="Ctx_window_width",t[t.Ctx_window_height=113]="Ctx_window_height",t[t.Ctx_nav_window_width=114]="Ctx_nav_window_width",t[t.Ctx_nav_window_height=115]="Ctx_nav_window_height",t[t.Ctx_nav_rect_ll_x=116]="Ctx_nav_rect_ll_x",t[t.Ctx_nav_rect_ll_y=117]="Ctx_nav_rect_ll_y",t[t.Ctx_nav_rect_ur_x=118]="Ctx_nav_rect_ur_x",t[t.Ctx_nav_rect_ur_y=119]="Ctx_nav_rect_ur_y",t[t.Ctx_nav_rect_hot=120]="Ctx_nav_rect_hot",t[t.Ctx_name=121]="Ctx_name",t[t.Ctx_user_highlight=122]="Ctx_user_highlight",t[t.Ctx_a_nc=123]="Ctx_a_nc",t[t.Ctx_a_cc=124]="Ctx_a_cc",t[t.Ctx_a=125]="Ctx_a",t[t.Ctx_grid_size_x=126]="Ctx_grid_size_x",t[t.Ctx_grid_size_y=127]="Ctx_grid_size_y",t[t.Ctx_grid_on=128]="Ctx_grid_on",t[t.Ctx_draw_delta=129]="Ctx_draw_delta",t[t.Ctx_refcon_width=130]="Ctx_refcon_width",t[t.Ctx_refcon_height=131]="Ctx_refcon_height",t[t.Ctx_refcon_textsize=132]="Ctx_refcon_textsize",t[t.Ctx_refcon_linewidth=133]="Ctx_refcon_linewidth",t[t.Ctx_user_version=134]="Ctx_user_version",t[t.Array_a=200]="Array_a",t[t.NodeClass_nc_name=300]="NodeClass_nc_name",t[t.NodeClass_a=301]="NodeClass_a",t[t.NodeClass_group=302]="NodeClass_group",t[t.NodeClass_no_con_obstacle=303]="NodeClass_no_con_obstacle",t[t.ConClass_cc_name=400]="ConClass_cc_name",t[t.ConClass_con_type=401]="ConClass_con_type",t[t.ConClass_corner=402]="ConClass_corner",t[t.ConClass_draw_type=403]="ConClass_draw_type",t[t.ConClass_line_width=404]="ConClass_line_width",t[t.ConClass_arrow_width=405]="ConClass_arrow_width",t[t.ConClass_arrow_length=406]="ConClass_arrow_length",t[t.ConClass_round_corner_amount=407]="ConClass_round_corner_amount",t[t.ConClass_group=408]="ConClass_group",t[t.Rect_draw_type=500]="Rect_draw_type",t[t.Rect_line_width=501]="Rect_line_width",t[t.Rect_ll=502]="Rect_ll",t[t.Rect_ur=503]="Rect_ur",t[t.Rect_display_level=504]="Rect_display_level",t[t.Rect_fill=505]="Rect_fill",t[t.Line_draw_type=600]="Line_draw_type",t[t.Line_line_width=601]="Line_line_width",t[t.Line_p1=602]="Line_p1",t[t.Line_p2=603]="Line_p2",t[t.Point_x=700]="Point_x",t[t.Point_y=701]="Point_y",t[t.Arc_angle1=800]="Arc_angle1",t[t.Arc_angle2=801]="Arc_angle2",t[t.Arc_draw_type=802]="Arc_draw_type",t[t.Arc_line_width=803]="Arc_line_width",t[t.Arc_ll=804]="Arc_ll",t[t.Arc_ur=805]="Arc_ur",t[t.Text_text_size=900]="Text_text_size",t[t.Text_draw_type=901]="Text_draw_type",t[t.Text_text=902]="Text_text",t[t.Text_p=903]="Text_p",t[t.Node_nc=1e3]="Node_nc",t[t.Node_pos=1001]="Node_pos",t[t.Node_n_name=1002]="Node_n_name",t[t.Node_annotsize=1003]="Node_annotsize",t[t.Node_annotv=1004]="Node_annotv",t[t.Node_refcon_cnt=1005]="Node_refcon_cnt",t[t.Node_x_right=1006]="Node_x_right",t[t.Node_x_left=1007]="Node_x_left",t[t.Node_y_high=1008]="Node_y_high",t[t.Node_y_low=1009]="Node_y_low",t[t.Node_trace_object=1010]="Node_trace_object",t[t.Node_trace_attribute=1011]="Node_trace_attribute",t[t.Node_trace_attr_type=1012]="Node_trace_attr_type",t[t.Node_obst_x_right=1013]="Node_obst_x_right",t[t.Node_obst_x_left=1014]="Node_obst_x_left",t[t.Node_obst_y_high=1015]="Node_obst_y_high",t[t.Node_obst_y_low=1016]="Node_obst_y_low",t[t.Node_trace_inverted=1017]="Node_trace_inverted",t[t.Con_x_right=1100]="Con_x_right",t[t.Con_x_left=1101]="Con_x_left",t[t.Con_y_high=1102]="Con_y_high",t[t.Con_y_low=1103]="Con_y_low",t[t.Con_cc=1104]="Con_cc",t[t.Con_dest_node=1105]="Con_dest_node",t[t.Con_source_node=1106]="Con_source_node",t[t.Con_dest_conpoint=1107]="Con_dest_conpoint",t[t.Con_source_conpoint=1108]="Con_source_conpoint",t[t.Con_dest_direction=1109]="Con_dest_direction",t[t.Con_source_direction=1110]="Con_source_direction",t[t.Con_line_a=1111]="Con_line_a",t[t.Con_arc_a=1112]="Con_arc_a",t[t.Con_arrow_a=1113]="Con_arrow_a",t[t.Con_ref_a=1114]="Con_ref_a",t[t.Con_p_num=1115]="Con_p_num",t[t.Con_l_num=1116]="Con_l_num",t[t.Con_a_num=1117]="Con_a_num",t[t.Con_arrow_num=1118]="Con_arrow_num",t[t.Con_ref_num=1119]="Con_ref_num",t[t.Con_point_x=1120]="Con_point_x",t[t.Con_point_y=1121]="Con_point_y",t[t.Con_source_ref_cnt=1122]="Con_source_ref_cnt",t[t.Con_dest_ref_cnt=1123]="Con_dest_ref_cnt",t[t.Con_c_name=1124]="Con_c_name",t[t.Con_trace_object=1125]="Con_trace_object",t[t.Con_trace_attribute=1126]="Con_trace_attribute",t[t.Con_trace_attr_type=1127]="Con_trace_attr_type",t[t.Con_temporary_ref=1128]="Con_temporary_ref",t[t.ConPoint_number=1200]="ConPoint_number",t[t.ConPoint_direction=1201]="ConPoint_direction",t[t.ConPoint_p=1202]="ConPoint_p",t[t.ConPoint_trace_attribute=1203]="ConPoint_trace_attribute",t[t.ConPoint_trace_attr_type=1204]="ConPoint_trace_attr_type",t[t.Annot_number=1300]="Annot_number",t[t.Annot_draw_type=1301]="Annot_draw_type",t[t.Annot_text_size=1302]="Annot_text_size",t[t.Annot_p=1303]="Annot_p",t[t.Annot_annot_type=1304]="Annot_annot_type",t[t.Annot_display_level=1305]="Annot_display_level",t[t.Arrow_arrow_width=1400]="Arrow_arrow_width",t[t.Arrow_arrow_length=1401]="Arrow_arrow_length",t[t.Arrow_draw_type=1402]="Arrow_draw_type",t[t.Arrow_line_width=1403]="Arrow_line_width",t[t.Arrow_p_dest=1404]="Arrow_p_dest",t[t.Arrow_p1=1405]="Arrow_p1",t[t.Arrow_p2=1406]="Arrow_p2",t[t.Triangle_rect_part=2e3]="Triangle_rect_part"}(c||(c={})),function(t){t[t.Frozen=0]="Frozen",t[t.Route=1]="Route"}(u||(u={})),function(t){t[t.CallBack=0]="CallBack",t[t.RegionSelect=1]="RegionSelect",t[t.RegionAddSelect=2]="RegionAddSelect",t[t.CreateCon=3]="CreateCon",t[t.CreateNode=4]="CreateNode",t[t.MoveNote=5]="MoveNote",t[t.Object=6]="Object",t[t.AnnotationInput=7]="AnnotationInput",t[t.RadioButton=8]="RadioButton",t[t.SelectConPoint=9]="SelectConPoint",t[t.PixmapButton=10]="PixmapButton",t[t.__=11]="__"}(h||(h={})),function(t){t[t.Null=0]="Null",t[t.MB1Click=1]="MB1Click",t[t.MB1DoubleClick=2]="MB1DoubleClick",t[t.MB1Press=3]="MB1Press",t[t.MB2Click=4]="MB2Click",t[t.MB2DoubleClick=5]="MB2DoubleClick",t[t.MB2Press=6]="MB2Press",t[t.MB1ClickShift=7]="MB1ClickShift",t[t.MB1DoubleClickShift=8]="MB1DoubleClickShift",t[t.MB1PressShift=9]="MB1PressShift",t[t.MB2ClickShift=10]="MB2ClickShift",t[t.MB2DoubleClickShift=11]="MB2DoubleClickShift",t[t.MB2PressShift=12]="MB2PressShift",t[t.MB1ClickCtrl=13]="MB1ClickCtrl",t[t.MB1DoubleClickCtrl=14]="MB1DoubleClickCtrl",t[t.MB1PressCtrl=15]="MB1PressCtrl",t[t.MB2ClickCtrl=16]="MB2ClickCtrl",t[t.MB2DoubleClickCtrl=17]="MB2DoubleClickCtrl",t[t.MB2PressCtrl=18]="MB2PressCtrl",t[t.MB1ClickShiftCtrl=19]="MB1ClickShiftCtrl",t[t.MB1DoubleClickShiftCtrl=20]="MB1DoubleClickShiftCtrl",t[t.MB1PressShiftCtrl=21]="MB1PressShiftCtrl",t[t.MB2ClickShiftCtrl=22]="MB2ClickShiftCtrl",t[t.MB2DoubleClickShiftCtrl=23]="MB2DoubleClickShiftCtrl",t[t.MB2PressShiftCtrl=24]="MB2PressShiftCtrl",t[t.MB3Click=25]="MB3Click",t[t.MB3Press=26]="MB3Press",t[t.ButtonRelease=27]="ButtonRelease",t[t.ButtonMotion=28]="ButtonMotion",t[t.Exposure=29]="Exposure",t[t.Enter=30]="Enter",t[t.Leave=31]="Leave",t[t.CursorMotion=32]="CursorMotion",t[t.Init=33]="Init",t[t.PasteSequenceStart=34]="PasteSequenceStart",t[t.VisibilityUnobscured=35]="VisibilityUnobscured",t[t.VisibilityObscured=36]="VisibilityObscured",t[t.SelectClear=37]="SelectClear",t[t.ObjectMoved=38]="ObjectMoved",t[t.ObjectDeleted=39]="ObjectDeleted",t[t.AnnotationInput=40]="AnnotationInput",t[t.Radiobutton=41]="Radiobutton",t[t.PixmapButton=42]="PixmapButton",t[t.Key_Return=43]="Key_Return",t[t.Key_Up=44]="Key_Up",t[t.Key_Down=45]="Key_Down",t[t.Key_Right=46]="Key_Right",t[t.Key_Left=47]="Key_Left",t[t.Key_PageUp=48]="Key_PageUp",t[t.Key_PageDown=49]="Key_PageDown",t[t.Key_BackSpace=50]="Key_BackSpace",t[t.Key_PF1=51]="Key_PF1",t[t.Key_PF2=52]="Key_PF2",t[t.Key_PF3=53]="Key_PF3",t[t.Key_PF4=54]="Key_PF4",t[t.Key_ShiftRight=55]="Key_ShiftRight",t[t.Key_ShiftLeft=56]="Key_ShiftLeft",t[t.Key_ShiftUp=57]="Key_ShiftUp",t[t.Key_ShiftDown=58]="Key_ShiftDown",t[t.MB1Down=59]="MB1Down",t[t.MB1Up=60]="MB1Up",t[t.MB2Down=61]="MB2Down",t[t.MB2Up=62]="MB2Up",t[t.MB3Down=63]="MB3Down",t[t.MB3Up=64]="MB3Up",t[t.Key_Tab=65]="Key_Tab",t[t.Map=66]="Map",t[t.Unmap=67]="Unmap",t[t.Resized=68]="Resized",t[t.ScrollUp=69]="ScrollUp",t[t.ScrollDown=70]="ScrollDown",t[t.TipText=71]="TipText",t[t.__=72]="__"}(_||(_={})),function(t){t[t.Flow=0]="Flow",t[t.Brow=1]="Brow"}(f||(f={}));class d{constructor(t){this.event=t}}class g extends d{constructor(t){super(t),this.object_type=s.NoObject,this.object=null,this.type=h.Object}}},function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"e",function(){return o}),n.d(e,"g",function(){return i}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return l}),n.d(e,"h",function(){return c}),n.d(e,"f",function(){return u});const r=9;var o,i,s,a,l,c,u;!function(t){t[t.Center=0]="Center",t[t.Right=1]="Right",t[t.Left=2]="Left",t[t.Up=3]="Up",t[t.Down=4]="Down"}(o||(o={})),function(t){t[t.Common=0]="Common",t[t.Document=1]="Document",t[t.Trace=2]="Trace",t[t.Safety=3]="Safety"}(i||(i={})),function(t){t[t.OneLine=0]="OneLine",t[t.MultiLine=1]="MultiLine"}(s||(s={})),function(t){t[t.Straight=0]="Straight",t[t.Fixed=1]="Fixed",t[t.AllFixed=2]="AllFixed",t[t.Routed=3]="Routed",t[t.StepDiv=4]="StepDiv",t[t.StepConv=5]="StepConv",t[t.TransDiv=6]="TransDiv",t[t.TransConv=7]="TransConv",t[t.StraightOneArrow=8]="StraightOneArrow",t[t.Reference=9]="Reference"}(a||(a={})),function(t){t[t.Rounded=0]="Rounded",t[t.Right=1]="Right"}(l||(l={})),function(t){t[t.Boolean=0]="Boolean",t[t.Int32=1]="Int32",t[t.Float32=2]="Float32",t[t.User=3]="User"}(c||(c={})),function(t){t[t.One=1]="One",t[t.Two=4]="Two",t[t.Three=8]="Three",t[t.Four=16]="Four",t[t.Five=32]="Five",t[t.Six=64]="Six"}(u||(u={}))},function(t,e,n){"use strict";var r;!function(t){t[t.Line=0]="Line",t[t.LineRed=1]="LineRed",t[t.LineGray=2]="LineGray",t[t.Color4=3]="Color4",t[t.Color5=4]="Color5",t[t.Color6=5]="Color6",t[t.Color7=6]="Color7",t[t.Color8=7]="Color8",t[t.Color9=8]="Color9",t[t.Color10=9]="Color10",t[t.Color11=10]="Color11",t[t.Color12=11]="Color12",t[t.Color13=12]="Color13",t[t.Color14=13]="Color14",t[t.Color15=14]="Color15",t[t.Color16=15]="Color16",t[t.Color17=16]="Color17",t[t.Color18=17]="Color18",t[t.Color19=18]="Color19",t[t.Color20=19]="Color20",t[t.Color21=20]="Color21",t[t.Color22=21]="Color22",t[t.Color23=22]="Color23",t[t.Color24=23]="Color24",t[t.Color25=24]="Color25",t[t.Color26=25]="Color26",t[t.Color27=26]="Color27",t[t.Color28=27]="Color28",t[t.Color29=28]="Color29",t[t.Color30=29]="Color30",t[t.Color31=30]="Color31",t[t.Color32=31]="Color32",t[t.Color33=32]="Color33",t[t.Color34=33]="Color34",t[t.Color35=34]="Color35",t[t.Color36=35]="Color36",t[t.Color37=36]="Color37",t[t.Color38=37]="Color38",t[t.Color39=38]="Color39",t[t.Color40=39]="Color40",t[t.Color41=40]="Color41",t[t.Color42=41]="Color42",t[t.Color43=42]="Color43",t[t.Color44=43]="Color44",t[t.Color45=44]="Color45",t[t.Color46=45]="Color46",t[t.Color47=46]="Color47",t[t.Color48=47]="Color48",t[t.Color49=48]="Color49",t[t.Color50=49]="Color50",t[t.Color51=50]="Color51",t[t.Color52=51]="Color52",t[t.Color53=52]="Color53",t[t.Color54=53]="Color54",t[t.Color55=54]="Color55",t[t.Color56=55]="Color56",t[t.Color57=56]="Color57",t[t.Color58=57]="Color58",t[t.Color59=58]="Color59",t[t.Color60=59]="Color60",t[t.Color61=60]="Color61",t[t.Color62=61]="Color62",t[t.Color63=62]="Color63",t[t.Color64=63]="Color64",t[t.Color65=64]="Color65",t[t.Color66=65]="Color66",t[t.Color67=66]="Color67",t[t.Color68=67]="Color68",t[t.Color69=68]="Color69",t[t.Color70=69]="Color70",t[t.Color71=70]="Color71",t[t.Color72=71]="Color72",t[t.Color73=72]="Color73",t[t.Color74=73]="Color74",t[t.Color75=74]="Color75",t[t.Color76=75]="Color76",t[t.Color77=76]="Color77",t[t.Color78=77]="Color78",t[t.Color79=78]="Color79",t[t.Color80=79]="Color80",t[t.Color81=80]="Color81",t[t.Color82=81]="Color82",t[t.Color83=82]="Color83",t[t.Color84=83]="Color84",t[t.Color85=84]="Color85",t[t.Color86=85]="Color86",t[t.Color87=86]="Color87",t[t.Color88=87]="Color88",t[t.Color89=88]="Color89",t[t.Color90=89]="Color90",t[t.Color91=90]="Color91",t[t.Color92=91]="Color92",t[t.Color93=92]="Color93",t[t.Color94=93]="Color94",t[t.Color95=94]="Color95",t[t.Color96=95]="Color96",t[t.Color97=96]="Color97",t[t.Color98=97]="Color98",t[t.Color99=98]="Color99",t[t.Color100=99]="Color100",t[t.Color101=100]="Color101",t[t.Color102=101]="Color102",t[t.Color103=102]="Color103",t[t.Color104=103]="Color104",t[t.Color105=104]="Color105",t[t.Color106=105]="Color106",t[t.Color107=106]="Color107",t[t.Color108=107]="Color108",t[t.Color109=108]="Color109",t[t.Color110=109]="Color110",t[t.Color111=110]="Color111",t[t.Color112=111]="Color112",t[t.Color113=112]="Color113",t[t.Color114=113]="Color114",t[t.Color115=114]="Color115",t[t.Color116=115]="Color116",t[t.Color117=116]="Color117",t[t.Color118=117]="Color118",t[t.Color119=118]="Color119",t[t.Color120=119]="Color120",t[t.Color121=120]="Color121",t[t.Color122=121]="Color122",t[t.Color123=122]="Color123",t[t.Color124=123]="Color124",t[t.Color125=124]="Color125",t[t.Color126=125]="Color126",t[t.Color127=126]="Color127",t[t.Color128=127]="Color128",t[t.Color129=128]="Color129",t[t.Color130=129]="Color130",t[t.Color131=130]="Color131",t[t.Color132=131]="Color132",t[t.Color133=132]="Color133",t[t.Color134=133]="Color134",t[t.Color135=134]="Color135",t[t.Color136=135]="Color136",t[t.Color137=136]="Color137",t[t.Color138=137]="Color138",t[t.Color139=138]="Color139",t[t.Color140=139]="Color140",t[t.Color141=140]="Color141",t[t.Color142=141]="Color142",t[t.Color143=142]="Color143",t[t.Color144=143]="Color144",t[t.Color145=144]="Color145",t[t.Color146=145]="Color146",t[t.Color147=146]="Color147",t[t.Color148=147]="Color148",t[t.Color149=148]="Color149",t[t.Color150=149]="Color150",t[t.Color151=150]="Color151",t[t.Color152=151]="Color152",t[t.Color153=152]="Color153",t[t.Color154=153]="Color154",t[t.Color155=154]="Color155",t[t.Color156=155]="Color156",t[t.Color157=156]="Color157",t[t.Color158=157]="Color158",t[t.Color159=158]="Color159",t[t.Color160=159]="Color160",t[t.Color161=160]="Color161",t[t.Color162=161]="Color162",t[t.Color163=162]="Color163",t[t.Color164=163]="Color164",t[t.Color165=164]="Color165",t[t.Color166=165]="Color166",t[t.Color167=166]="Color167",t[t.Color168=167]="Color168",t[t.Color169=168]="Color169",t[t.Color170=169]="Color170",t[t.Color171=170]="Color171",t[t.Color172=171]="Color172",t[t.Color173=172]="Color173",t[t.Color174=173]="Color174",t[t.Color175=174]="Color175",t[t.Color176=175]="Color176",t[t.Color177=176]="Color177",t[t.Color178=177]="Color178",t[t.Color179=178]="Color179",t[t.Color180=179]="Color180",t[t.Color181=180]="Color181",t[t.Color182=181]="Color182",t[t.Color183=182]="Color183",t[t.Color184=183]="Color184",t[t.Color185=184]="Color185",t[t.Color186=185]="Color186",t[t.Color187=186]="Color187",t[t.Color188=187]="Color188",t[t.Color189=188]="Color189",t[t.Color190=189]="Color190",t[t.Color191=190]="Color191",t[t.Color192=191]="Color192",t[t.Color193=192]="Color193",t[t.Color194=193]="Color194",t[t.Color195=194]="Color195",t[t.Color196=195]="Color196",t[t.Color197=196]="Color197",t[t.Color198=197]="Color198",t[t.Color199=198]="Color199",t[t.Color200=199]="Color200",t[t.Color201=200]="Color201",t[t.Color202=201]="Color202",t[t.Color203=202]="Color203",t[t.Color204=203]="Color204",t[t.Color205=204]="Color205",t[t.Color206=205]="Color206",t[t.Color207=206]="Color207",t[t.Color208=207]="Color208",t[t.Color209=208]="Color209",t[t.Color210=209]="Color210",t[t.Color211=210]="Color211",t[t.Color212=211]="Color212",t[t.Color213=212]="Color213",t[t.Color214=213]="Color214",t[t.Color215=214]="Color215",t[t.Color216=215]="Color216",t[t.Color217=216]="Color217",t[t.Color218=217]="Color218",t[t.Color219=218]="Color219",t[t.Color220=219]="Color220",t[t.Color221=220]="Color221",t[t.Color222=221]="Color222",t[t.Color223=222]="Color223",t[t.Color224=223]="Color224",t[t.Color225=224]="Color225",t[t.Color226=225]="Color226",t[t.Color227=226]="Color227",t[t.Color228=227]="Color228",t[t.Color229=228]="Color229",t[t.Color230=229]="Color230",t[t.Color231=230]="Color231",t[t.Color232=231]="Color232",t[t.Color233=232]="Color233",t[t.Color234=233]="Color234",t[t.Color235=234]="Color235",t[t.Color236=235]="Color236",t[t.Color237=236]="Color237",t[t.Color238=237]="Color238",t[t.Color239=238]="Color239",t[t.Color240=239]="Color240",t[t.Color241=240]="Color241",t[t.Color242=241]="Color242",t[t.Color243=242]="Color243",t[t.Color244=243]="Color244",t[t.Color245=244]="Color245",t[t.Color246=245]="Color246",t[t.Color247=246]="Color247",t[t.Color248=247]="Color248",t[t.Color249=248]="Color249",t[t.Color250=249]="Color250",t[t.Color251=250]="Color251",t[t.Color252=251]="Color252",t[t.Color253=252]="Color253",t[t.Color254=253]="Color254",t[t.Color255=254]="Color255",t[t.Color256=255]="Color256",t[t.Color257=256]="Color257",t[t.Color258=257]="Color258",t[t.Color259=258]="Color259",t[t.Color260=259]="Color260",t[t.Color261=260]="Color261",t[t.Color262=261]="Color262",t[t.Color263=262]="Color263",t[t.Color264=263]="Color264",t[t.Color265=264]="Color265",t[t.Color266=265]="Color266",t[t.Color267=266]="Color267",t[t.Color268=267]="Color268",t[t.Color269=268]="Color269",t[t.Color270=269]="Color270",t[t.Color271=270]="Color271",t[t.Color272=271]="Color272",t[t.Color273=272]="Color273",t[t.Color274=273]="Color274",t[t.Color275=274]="Color275",t[t.Color276=275]="Color276",t[t.Color277=276]="Color277",t[t.Color278=277]="Color278",t[t.Color279=278]="Color279",t[t.Color280=279]="Color280",t[t.Color281=280]="Color281",t[t.Color282=281]="Color282",t[t.Color283=282]="Color283",t[t.Color284=283]="Color284",t[t.Color285=284]="Color285",t[t.Color286=285]="Color286",t[t.Color287=286]="Color287",t[t.Color288=287]="Color288",t[t.Color289=288]="Color289",t[t.Color290=289]="Color290",t[t.Color291=290]="Color291",t[t.Color292=291]="Color292",t[t.Color293=292]="Color293",t[t.Color294=293]="Color294",t[t.Color295=294]="Color295",t[t.Color296=295]="Color296",t[t.Color297=296]="Color297",t[t.Color298=297]="Color298",t[t.Color299=298]="Color299",t[t.Color300=299]="Color300",t[t.LineErase=300]="LineErase",t[t.LineDashed=301]="LineDashed",t[t.LineDashedRed=302]="LineDashedRed",t[t.TextHelvetica=303]="TextHelvetica",t[t.TextHelveticaBold=304]="TextHelveticaBold",t[t.TextHelveticaErase=305]="TextHelveticaErase",t[t.TextHelveticaEraseBold=306]="TextHelveticaEraseBold",t[t.Color__=307]="Color__",t[t.CustomColor1=310]="CustomColor1",t[t.CustomColor2=314]="CustomColor2",t[t.CustomColor3=318]="CustomColor3",t[t.CustomColor4=322]="CustomColor4",t[t.CustomColor5=326]="CustomColor5",t[t.CustomColor6=330]="CustomColor6",t[t.CustomColor7=334]="CustomColor7",t[t.CustomColor8=338]="CustomColor8",t[t.CustomColor9=342]="CustomColor9",t[t.CustomColor10=346]="CustomColor10",t[t.CustomColor11=350]="CustomColor11",t[t.CustomColor12=354]="CustomColor12",t[t.CustomColor13=358]="CustomColor13",t[t.CustomColor14=362]="CustomColor14",t[t.CustomColor15=366]="CustomColor15",t[t.CustomColor16=370]="CustomColor16",t[t.CustomColor17=374]="CustomColor17",t[t.CustomColor18=378]="CustomColor18",t[t.CustomColor19=382]="CustomColor19",t[t.CustomColor20=386]="CustomColor20",t[t.CustomColor21=390]="CustomColor21",t[t.CustomColor22=394]="CustomColor22",t[t.CustomColor23=398]="CustomColor23",t[t.CustomColor24=402]="CustomColor24",t[t.CustomColor25=406]="CustomColor25",t[t.CustomColor26=410]="CustomColor26",t[t.CustomColor27=414]="CustomColor27",t[t.CustomColor28=418]="CustomColor28",t[t.CustomColor29=422]="CustomColor29",t[t.CustomColor30=426]="CustomColor30",t[t.CustomColor31=430]="CustomColor31",t[t.CustomColor32=434]="CustomColor32",t[t.CustomColor33=438]="CustomColor33",t[t.CustomColor34=442]="CustomColor34",t[t.CustomColor35=446]="CustomColor35",t[t.CustomColor36=450]="CustomColor36",t[t.CustomColor37=454]="CustomColor37",t[t.CustomColor38=458]="CustomColor38",t[t.CustomColor39=462]="CustomColor39",t[t.CustomColor40=466]="CustomColor40",t[t.CustomColor41=470]="CustomColor41",t[t.CustomColor42=474]="CustomColor42",t[t.CustomColor43=478]="CustomColor43",t[t.CustomColor44=482]="CustomColor44",t[t.CustomColor45=486]="CustomColor45",t[t.CustomColor46=490]="CustomColor46",t[t.CustomColor47=494]="CustomColor47",t[t.CustomColor48=498]="CustomColor48",t[t.CustomColor49=502]="CustomColor49",t[t.CustomColor50=506]="CustomColor50",t[t.CustomColor51=510]="CustomColor51",t[t.CustomColor52=514]="CustomColor52",t[t.CustomColor53=518]="CustomColor53",t[t.CustomColor54=522]="CustomColor54",t[t.CustomColor55=524]="CustomColor55",t[t.CustomColor56=530]="CustomColor56",t[t.CustomColor57=534]="CustomColor57",t[t.CustomColor58=538]="CustomColor58",t[t.CustomColor59=542]="CustomColor59",t[t.CustomColor60=546]="CustomColor60",t[t.CustomColor61=550]="CustomColor61",t[t.CustomColor62=554]="CustomColor62",t[t.CustomColor63=558]="CustomColor63",t[t.CustomColor64=562]="CustomColor64",t[t.CustomColor65=566]="CustomColor65",t[t.CustomColor66=570]="CustomColor66",t[t.CustomColor67=574]="CustomColor67",t[t.CustomColor68=578]="CustomColor68",t[t.CustomColor69=582]="CustomColor69",t[t.CustomColor70=586]="CustomColor70",t[t.CustomColor71=590]="CustomColor71",t[t.CustomColor72=594]="CustomColor72",t[t.CustomColor73=598]="CustomColor73",t[t.CustomColor74=602]="CustomColor74",t[t.CustomColor75=606]="CustomColor75",t[t.CustomColor76=610]="CustomColor76",t[t.CustomColor77=614]="CustomColor77",t[t.CustomColor78=618]="CustomColor78",t[t.CustomColor79=622]="CustomColor79",t[t.CustomColor80=626]="CustomColor80",t[t.CustomColor81=630]="CustomColor81",t[t.CustomColor82=634]="CustomColor82",t[t.CustomColor83=638]="CustomColor83",t[t.CustomColor84=642]="CustomColor84",t[t.CustomColor85=646]="CustomColor85",t[t.CustomColor86=650]="CustomColor86",t[t.CustomColor87=654]="CustomColor87",t[t.CustomColor88=658]="CustomColor88",t[t.CustomColor89=662]="CustomColor89",t[t.CustomColor90=666]="CustomColor90",t[t.CustomColor__=670]="CustomColor__",t[t._=670]="_",t[t.Green=671]="Green",t[t.Yellow=672]="Yellow",t[t.Inherit=9999]="Inherit",t[t.No=1e4]="No",t[t.FillHighlight=173]="FillHighlight",t[t.LineHighlight=175]="LineHighlight",t[t.ColorYellow=114]="ColorYellow",t[t.ColorRed=176]="ColorRed",t[t.DarkGray=29]="DarkGray",t[t.MediumGray=24]="MediumGray",t[t.LightGray=20]="LightGray"}(r||(r={})),e.a=r},function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return c});var r=n(0),o=n(8),i=n(3);class s{constructor(t,e,n,r){this.s=t,this.i_min=e,this.i_max=n,this.a=r}}class a{constructor(t,e,n){this.h=t,this.hk=e,this.s=n}}class l{constructor(t,e,n){this.r=Object(r.n)(t,0,1),this.g=Object(r.n)(e,0,1),this.b=Object(r.n)(n,0,1)}}class c{static is_shiftable(t){return t>=20&&t<=i.a.Color300}static is_custom(t){return t>=i.a.CustomColor1&&t<=i.a.CustomColor__}static shift_drawtype(t,e,n){let r;if(e=Math.floor(e),null!==n&&n.getColorInverse()&&(e=-e),this.is_shiftable(t)){let n=10*Math.floor(t/10),o=e+t-n;r=o<0?i.a.Color4:o>=10?i.a.Color30:n+o}else r=this.is_custom(t)?-1===e?t+3:e<0?t+2:e>0?t+1:t:t;return Math.floor(r)}static get_drawtype(t,e,n,r,s,a){let l,c=null===r?0:r.getColorLightness(),u=null===r?0:r.getColorIntensity();if(n&&!a)l=e;else if(n&&a&&!s&&t===i.a.Line)l=e;else{if(null!==r&&r.getColorTone()!==o.a.No){let e=r.getColorTone();t>30&&t<300?e===o.a.LightGrayHighSaturation?l=i.a.Color31:e===o.a.DarkGrayHighSaturation?l=i.a.Color30:(e>=o.a.GrayHighSaturation&&e<o.a.GrayLowSaturation?(e-=27,u+=2):e>=o.a.GrayLowSaturation&&(e-=54,u-=1),e>=o.a.DarkGray&&e<o.a.LightGray?(e-=9,c-=2):e>=o.a.LightGray&&(e-=18,c+=2),l=t-30*Math.floor(t/30)+30*e):l=t}else l=null!==r&&1===s&&r.getFillDrawtype()!==i.a.No?r.getFillDrawtype():null!==r&&2===s&&r.getTextDrawtype()!==i.a.No?r.getTextDrawtype():null!==r&&3===s&&r.getBackgroundDrawtype()!==i.a.No?r.getBackgroundDrawtype():null===r||s||r.getDrawtype()===i.a.No?t:r.getDrawtype();if(null!==r&&c&&t>=30&&l<300){let t=10*Math.floor(l/10),e=-c+l-t;l=e<0?i.a.Color4:e>=10?i.a.Color30:t+e}if(null!==r&&u&&l>=60){let t=30*Math.floor(l/30),e=l-t;(l+=10*Math.min(2-Math.floor(e/10),u))<t&&(l=i.a.Color41+e)}if(null!==r&&r.getColorShift()&&l>=60&&l<300){let t=r.getColorShift()-8*Math.floor(r.getColorShift()/8);t<0&&(t+=8),(t=l+30*t)>=300&&(t-=240),l=t}null!==r&&r.getColorInverse()&&(l>=30&&l<300?l=l+10-l%10*2-1:this.is_custom(l)&&((l-i.a.CustomColor1)%4==1?l+=1:(l-i.a.CustomColor1)%4==2?l-=1:(l-i.a.CustomColor1)%4==3&&(l-=2))),null!==r&&r.getDimmed()&&(0===l?l=25:l>=26&&l<=29?l-=4:l>=36&&l<=39?l-=4:l>=46&&l<=49?l-=4:l>=56&&l<=59?l-=4:this.is_custom(l)&&(l===i.a.CustomColor37&&(l=i.a.CustomColor40),l===i.a.CustomColor38&&(l=i.a.CustomColor39)))}return l>=0&&l<=i.a.Color__||l>=i.a.CustomColor1&&l<i.a.CustomColor__||(console.log("** Invalid drawtype : ",l),l=i.a.Line),l}static rgb_color(t,e){if(300===t&&(t=31),0===t)return new l(0,0,0);if(2===t)return new l(.75,.75,.75);if(1===t)return new l(1,0,0);if(3===t)return new l(1,1,1);if(t<20)return this.his_to_rgb(360*(t-4)/16,1,1.5);if(t<60){let e=c.gray_i0;(t<30||t>=50&&t<60)&&(e=.25);let n=e+(c.gray_i1-e)*Math.pow((9-t%10)/9,.9);return new l(n,n,n)}if(t<300){let e=Math.floor((t-60)/30),n=Math.floor((t-60-30*e)/10),r=9-(t-60-30*e-10*n);if(0===e&&2===n||2===e&&2===n&&r>5)return new l(this.rgbtab[10*e+r].r,this.rgbtab[10*e+r].g,this.rgbtab[10*e+r].b);{let t=this.ctab[e].s[n].s,o=this.ctab[e].s[n].i_min+(this.ctab[e].s[n].i_max-this.ctab[e].s[n].i_min)*Math.pow(r/9,this.ctab[e].s[n].a),i=this.ctab[e].h+this.ctab[e].hk*r/9;return this.his_to_rgb(i,o,t)}}return t>=i.a.CustomColor1&&t<i.a.CustomColor__?e?e.get_color(t):new l(1,1,1):new l(0,0,0)}static his_to_rgb(t,e,n){let r=n*Math.sin(t*Math.PI/180),o=n*Math.cos(t*Math.PI/180),i=e/Math.sqrt(3),s=2*r/Math.sqrt(6)+i/Math.sqrt(3),a=-r/Math.sqrt(6)+o/Math.sqrt(2)+i/Math.sqrt(3),c=-r/Math.sqrt(6)-o/Math.sqrt(2)+i/Math.sqrt(3);return new l(s/2+.5,a/2+.5,c/2+.5)}}c.gray_i0=.32,c.gray_i1=.95,c.ctab=[new a(18,-20,[new s(.2,-1.4,2.8,.9),new s(.5,-1.4,3,.9),new s(1.5,-3.5,5,1)]),new a(28,10,[new s(.2,-1.4,2.8,.9),new s(.5,-1.4,3,.9),new s(1.5,-3.5,5,1)]),new a(45,20,[new s(.2,-1.3,2.8,.9),new s(.5,-1.3,3,.9),new s(1.5,-3.5,4.5,1)]),new a(90,0,[new s(.2,-1.1,2.8,.9),new s(.5,-1.1,3,.9),new s(1.5,-4.5,4.5,.8)]),new a(150,0,[new s(.2,-1,2.8,.9),new s(.5,-1,3,.9),new s(1.5,-3.5,5.9,1)]),new a(240,0,[new s(.2,-1,2.8,.9),new s(.4,-1,3,.9),new s(1.5,-3.5,5.5,.8)]),new a(280,0,[new s(.2,-1,2.8,.9),new s(.4,-1,3,.9),new s(1.5,-3.5,5.5,1.2)]),new a(355,-20,[new s(.2,-1,2.8,.9),new s(.4,-1,3,.9),new s(1.5,-4.5,3.5,1)])],c.rgbtab=[new l(.254,.329,0),new l(.357,.459,0),new l(.498,.639,0),new l(.624,.8,0),new l(.764,.976,0),new l(.808,1,.129),new l(.847,1,.31),new l(.898,1,.537),new l(.933,1,.71),new l(.949,1,.776),new l(0,0,0),new l(0,0,0),new l(0,0,0),new l(0,0,0),new l(0,0,0),new l(0,0,0),new l(0,0,0),new l(0,0,0),new l(0,0,0),new l(0,0,0),new l(0,0,0),new l(0,0,0),new l(0,0,0),new l(0,0,0),new l(0,0,0),new l(0,0,0),new l(1,.725,.42),new l(1,.796,.569),new l(1,.886,.667),new l(1,.937,.82)]},function(t,e,n){"use strict";var r,o,i,s,a,l=n(0);class c{constructor(t){this.offset=0,this.dv=new DataView(t),this.tag=this.getUint8(),this.id=this.getUint32(),this.sts=this.getUint32()}getUint8(){return this.offset+=1,this.dv.getUint8(this.offset-1)}getUint16(){return this.offset+=2,this.dv.getUint16(this.offset-2)}getInt32(){return this.offset+=4,this.dv.getInt32(this.offset-4)}getUint32(){return this.offset+=4,this.dv.getUint32(this.offset-4)}getFloat32(){return this.offset+=4,this.dv.getFloat32(this.offset-4)}getString(){let t=this.getUint16(),e=new Uint8Array(t);for(let n=0;n<t;n++)e[n]=this.getUint8();return String.fromCharCode.apply(null,e)}}class u{constructor(t,e,n=null,r=null){this.ws=null,this.pending=[],this.pack8Bit=t=>this.reqData.push(255&t),this.ws=new WebSocket("ws://"+t+":"+String(e)),this.ws.binaryType="arraybuffer";let o=this;this.ws.onmessage=function(t){let e=new DataView(t.data).getUint32(1);(0,o.pending[e])(new c(t.data)),delete o.pending[e]},this.ws.onopen=function(){null!==n&&n()},this.ws.onclose=function(){o.reset()},this.ws.onerror=function(t){console.error("WebSocket error observed:",t),null!==r&&r()}}sendRequest(){let t=this;return new Promise((e,n)=>{t.pending[u.next_id]=e,u.next_id++,t.ws.send(Uint8Array.from(t.reqData))})}beginRequest(t){this.reqData=[t,0],this.pack32Bit(u.next_id)}reset(){this.pending=[]}pack16Bit(t){this.reqData.push(255&t),this.reqData.push(t>>8&255)}pack32Bit(t){this.reqData.push(255&t),this.reqData.push(t>>8&255),this.reqData.push(t>>16&255),this.reqData.push(t>>24&255)}packString(t){this.pack16Bit(t.length);for(let e=0;e<t.length;e++)this.reqData.push(t.charCodeAt(e))}}u.next_id=1234,n.d(e,"e",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return g}),n.d(e,"f",function(){return s}),n.d(e,"d",function(){return y}),function(t){t[t.Ack=1]="Ack",t[t.Block=2]="Block",t[t.Cancel=3]="Cancel",t[t.CancelBlock=4]="CancelBlock",t[t.Missing=5]="Missing",t[t.Reblock=6]="Reblock",t[t.Return=7]="Return",t[t.Unblock=8]="Unblock",t[t.InfoSuccess=32]="InfoSuccess",t[t.Alarm=64]="Alarm",t[t.MaintenanceAlarm=128]="MaintenanceAlarm",t[t.SystemAlarm=256]="SystemAlarm",t[t.UserAlarm1=512]="UserAlarm1",t[t.UserAlarm2=1024]="UserAlarm2",t[t.UserAlarm3=2048]="UserAlarm3",t[t.UserAlarm4=4096]="UserAlarm4",t[t.Info=8192]="Info"}(r||(r={})),function(t){t[t.D=64]="D",t[t.C=65]="C",t[t.B=66]="B",t[t.A=67]="A"}(o||(o={})),function(t){t[t.NotRet=1]="NotRet",t[t.NotAck=2]="NotAck",t[t.Block=4]="Block"}(i||(i={}));class h{}class _{}class f{}class d{}class g{}class p{}class C{constructor(){this.buttons=[]}}class x{}!function(t){t[t.GET_OP_SELF=1]="GET_OP_SELF",t[t.GET_OP_METHOD_PLC=2]="GET_OP_METHOD_PLC",t[t.GET_OP_METHOD_OBJECTGRAPH=3]="GET_OP_METHOD_OBJECTGRAPH",t[t.GET_OP_METHOD_GRAPH=4]="GET_OP_METHOD_GRAPH",t[t.GET_OP_METHOD_HELPCLASS=5]="GET_OP_METHOD_HELPCLASS"}(s||(s={})),function(t){t[t.SET_OBJECT_INFO_BOOLEAN=1]="SET_OBJECT_INFO_BOOLEAN",t[t.SET_OBJECT_INFO_FLOAT=2]="SET_OBJECT_INFO_FLOAT",t[t.SET_OBJECT_INFO_INT=3]="SET_OBJECT_INFO_INT",t[t.SET_OBJECT_INFO_STRING=4]="SET_OBJECT_INFO_STRING",t[t.GET_OBJECT_INFO_BOOLEAN=5]="GET_OBJECT_INFO_BOOLEAN",t[t.GET_OBJECT_INFO_FLOAT=6]="GET_OBJECT_INFO_FLOAT",t[t.GET_OBJECT_INFO_INT=7]="GET_OBJECT_INFO_INT",t[t.GET_OBJECT_INFO_STRING=8]="GET_OBJECT_INFO_STRING",t[t.TOGGLE_OBJECT_INFO=9]="TOGGLE_OBJECT_INFO",t[t.REF_OBJECT_INFO=10]="REF_OBJECT_INFO",t[t.GET_OBJECT_REF_INFO_BOOLEAN=11]="GET_OBJECT_REF_INFO_BOOLEAN",t[t.GET_OBJECT_REF_INFO_FLOAT=12]="GET_OBJECT_REF_INFO_FLOAT",t[t.GET_OBJECT_REF_INFO_INT=13]="GET_OBJECT_REF_INFO_INT",t[t.GET_OBJECT_REF_INFO_STRING=14]="GET_OBJECT_REF_INFO_STRING",t[t.UNREF_OBJECT_INFO=15]="UNREF_OBJECT_INFO",t[t.NAME_TO_OBJID=16]="NAME_TO_OBJID",t[t.OBJID_TO_NAME=17]="OBJID_TO_NAME",t[t.GET_ROOT_LIST=18]="GET_ROOT_LIST",t[t.GET_NEXT_OBJECT=19]="GET_NEXT_OBJECT",t[t.GET_CHILD=20]="GET_CHILD",t[t.GET_NEXT_SIBLING=21]="GET_NEXT_SIBLING",t[t.GET_OBJECT_CLASS=22]="GET_OBJECT_CLASS",t[t.GET_CLASS_LIST=23]="GET_CLASS_LIST",t[t.CLASS_ID_TO_OBJID=24]="CLASS_ID_TO_OBJID",t[t.GET_OBJECT_REF_INFO_ALL=25]="GET_OBJECT_REF_INFO_ALL",t[t.REF_OBJECT_INFO_LIST=26]="REF_OBJECT_INFO_LIST",t[t.POLL=27]="POLL",t[t.STATISTICS=28]="STATISTICS",t[t.CHECK_USER=29]="CHECK_USER",t[t.GET_NODE_OBJECT=30]="GET_NODE_OBJECT",t[t.LOG_STRING=31]="LOG_STRING",t[t.UNREF_OBJECT_INFO_ALL=32]="UNREF_OBJECT_INFO_ALL",t[t.CREATE_INSTANCE_FILE=33]="CREATE_INSTANCE_FILE",t[t.GET_ATTRIBUTE_CHAR=34]="GET_ATTRIBUTE_CHAR",t[t.GET_CLASS_ATTRIBUTE=35]="GET_CLASS_ATTRIBUTE",t[t.GET_ALL_CLASS_ATTRIBUTES=36]="GET_ALL_CLASS_ATTRIBUTES",t[t.GET_ALL_SIBLINGS=37]="GET_ALL_SIBLINGS",t[t.GET_ALL_XTT_SIBLINGS=38]="GET_ALL_XTT_SIBLINGS",t[t.GET_ALL_XTT_CHILDREN=39]="GET_ALL_XTT_CHILDREN",t[t.REF_OBJECT_INFO_VECTOR=40]="REF_OBJECT_INFO_VECTOR",t[t.GET_SUBSCRIPTIONS=41]="GET_SUBSCRIPTIONS",t[t.CRR_SIGNAL=42]="CRR_SIGNAL",t[t.CRR_OBJECT=43]="CRR_OBJECT",t[t.GET_PARENT=44]="GET_PARENT",t[t.GET_OBJECT_INFO_OBJID=45]="GET_OBJECT_INFO_OBJID",t[t.GET_OBJECT_REF_INFO_BOOLEAN_ARRAY=46]="GET_OBJECT_REF_INFO_BOOLEAN_ARRAY",t[t.GET_OBJECT_REF_INFO_FLOAT_ARRAY=47]="GET_OBJECT_REF_INFO_FLOAT_ARRAY",t[t.GET_OBJECT_REF_INFO_INT_ARRAY=48]="GET_OBJECT_REF_INFO_INT_ARRAY",t[t.GET_OBJECT_REF_INFO_STRING_ARRAY=49]="GET_OBJECT_REF_INFO_STRING_ARRAY",t[t.GET_MSG=50]="GET_MSG",t[t.GET_MSG_TEXT=51]="GET_MSG_TEXT",t[t.NAME_TO_ATTRREF=52]="NAME_TO_ATTRREF",t[t.ATTRREF_TO_NAME=53]="ATTRREF_TO_NAME",t[t.GET_ATTRREF_TID=54]="GET_ATTRREF_TID",t[t.GET_SUPER_CLASS=55]="GET_SUPER_CLASS",t[t.GET_ALL_CLASS_ATTRIBUTES_STRING=56]="GET_ALL_CLASS_ATTRIBUTES_STRING",t[t.GET_OBJECT_INFO_FLOAT_ARRAY=57]="GET_OBJECT_INFO_FLOAT_ARRAY",t[t.GET_OBJECT_INFO_INT_ARRAY=58]="GET_OBJECT_INFO_INT_ARRAY",t[t.GET_CIRCBUFF_INFO=59]="GET_CIRCBUFF_INFO",t[t.UPDATE_CIRCBUFF_INFO=60]="UPDATE_CIRCBUFF_INFO",t[t.GET_ATTRIBUTE_FLAGS=61]="GET_ATTRIBUTE_FLAGS",t[t.CLASSNAME_TO_ID=62]="CLASSNAME_TO_ID",t[t.GET_OBJECT=63]="GET_OBJECT",t[t.GET_OPWIND_MENU=64]="GET_OPWIND_MENU",t[t.GET_OBJECT_FROM_NAME=65]="GET_OBJECT_FROM_NAME",t[t.MH_SYNC=66]="MH_SYNC",t[t.MH_ACK=67]="MH_ACK",t[t.GET_OBJECT_FROM_AREF=68]="GET_OBJECT_FROM_AREF"}(a||(a={}));class y{static init(){return new Promise((t,e)=>{y.ws=new u(localStorage.getItem("HOST"),y.PORT,()=>{t()})})}static getObjectInfoBoolean(t){return y.ws.beginRequest(a.GET_OBJECT_INFO_BOOLEAN),y.ws.packString(t),y.ws.sendRequest().then(function(t){let e=t.getUint8();return{sts:t.sts,value:e}})}static getObjectInfoInt(t){return y.ws.beginRequest(a.GET_OBJECT_INFO_INT),y.ws.packString(t),y.ws.sendRequest().then(function(t){let e=t.getUint32();return{sts:t.sts,value:e}})}static getObjectInfoIntArray(t,e){return y.ws.beginRequest(a.GET_OBJECT_INFO_INT_ARRAY),y.ws.pack32Bit(e),y.ws.packString(t),y.ws.sendRequest().then(function(t){let e=t.getInt32();for(let n=0;n<e;n++)(void 0).push(t.getUint32());return{sts:t.sts,value:void 0}})}static getObjectInfoFloat(t){return y.ws.beginRequest(a.GET_OBJECT_INFO_FLOAT),y.ws.packString(t),y.ws.sendRequest().then(function(t){let e=t.getFloat32();return{sts:t.sts,value:e}})}static getObjectInfoFloatArray(t,e){return y.ws.beginRequest(a.GET_OBJECT_INFO_FLOAT_ARRAY),y.ws.pack32Bit(e),y.ws.packString(t),y.ws.sendRequest().then(function(t){let e=t.getInt32();for(let n=0;n<e;n++)(void 0).push(t.getFloat32());return{sts:t.sts,value:void 0}})}static refObjectInfo(t,e,n){let r=new f;return r.name=t,r.refid=y.subscriptionCount,r.type=e,r.elements=n,y.sub[y.subscriptionCount]=r,y.subscriptionCount++,y.ws.beginRequest(a.REF_OBJECT_INFO),y.ws.pack32Bit(r.refid),y.ws.pack32Bit(r.elements),y.ws.packString(r.name),y.ws.sendRequest(),r.refid}static unrefObjectInfo(t){y.ws.beginRequest(a.UNREF_OBJECT_INFO),y.ws.pack32Bit(t),delete y.sub[t],y.ws.sendRequest()}static getRefObjectInfoAll(t){y.ws.beginRequest(a.GET_OBJECT_REF_INFO_ALL),y.ws.sendRequest().then(function(e){let n=e.getUint32();for(let t=0;t<n;t++){let t=e.getUint32(),n=e.getUint32(),r=y.sub[t];if(void 0!==r){let o;switch(r.type){case l.j.Boolean:if(r.elements<=1)o=e.getUint8();else{let i=n;i!==r.elements&&console.log("Subscription size error",i,r.elements,t),o=new Array(i);for(let t=0;t<i;t++)o[t]=e.getUint8()}break;case l.j.Float32:if(r.elements<=1)o=e.getFloat32();else{let i=n/4;i!==r.elements&&console.log("Subscription size error",i,r.elements,t),o=new Array(i);for(let t=0;t<i;t++)o[t]=e.getFloat32()}break;case l.j.Int8:case l.j.Int16:case l.j.Int32:case l.j.UInt8:case l.j.UInt16:case l.j.UInt32:case l.j.Status:case l.j.NetStatus:case l.j.Mask:case l.j.Enum:case l.j.Bit:if(r.elements<=1)o=e.getInt32();else{let i=n/4;i!==r.elements&&console.log("Subscription size error",i,r.elements,t),o=new Array(i);for(let t=0;t<i;t++)o[t]=e.getInt32()}break;case l.j.String:case l.j.Time:case l.j.DeltaTime:case l.j.AttrRef:case l.j.Objid:if(r.elements<=1)o=e.getString();else{let n=r.elements;n!==r.elements&&console.log("Subscription size error",n,r.elements,t),o=new Array(n);for(let t=0;t<n;t++)o[t]=e.getString()}}y.sub[t].value=o}}t()})}static getObjectRefInfo(t){return y.sub[t].value}static setObjectInfoBoolean(t,e){y.ws.beginRequest(a.SET_OBJECT_INFO_BOOLEAN),y.ws.pack32Bit(e),y.ws.packString(t),y.ws.sendRequest()}static setObjectInfoInt(t,e){y.ws.beginRequest(a.SET_OBJECT_INFO_INT),y.ws.pack32Bit(e),y.ws.packString(t),y.ws.sendRequest()}static setObjectInfoFloat(t,e){y.ws.beginRequest(a.SET_OBJECT_INFO_FLOAT);let n=new ArrayBuffer(4);new Float32Array(n)[0]=e;let r=new Uint8Array(n);y.ws.reqData.push(r[0]),y.ws.reqData.push(r[1]),y.ws.reqData.push(r[2]),y.ws.reqData.push(r[3]),y.ws.packString(t),y.ws.sendRequest()}static setObjectInfoString(t,e){y.ws.beginRequest(a.SET_OBJECT_INFO_STRING),y.ws.packString(e),y.ws.packString(t),y.ws.sendRequest()}static setObjectInfo(t,e,n){n===l.j.Boolean?y.setObjectInfoBoolean(t,e):n===l.j.Float32||n===l.j.Float64?y.setObjectInfoFloat(t,e):n===l.j.String?y.setObjectInfoString(t,e):y.setObjectInfoInt(t,e)}static toggleObjectInfo(t){y.ws.beginRequest(a.TOGGLE_OBJECT_INFO),y.ws.packString(t),y.ws.sendRequest()}static getAllXttChildren(t){return y.ws.beginRequest(a.GET_ALL_XTT_CHILDREN),y.ws.pack32Bit(t.vid),y.ws.pack32Bit(t.oix),y.ws.sendRequest().then(function(t){let e=[],n=t.getUint32();for(let r=0;r<n;r++){let n=new d,r=t.getUint32(),o=t.getUint32();n.objid=new l.h(r,o),n.cid=t.getUint32(),n.has_children=0!==t.getUint16(),n.name=t.getString(),n.description=t.getString(),n.classname=t.getString(),e.push(n)}return{sts:t.sts,value:e}})}static getAllClassAttributes(t,e){return y.ws.beginRequest(a.GET_ALL_CLASS_ATTRIBUTES),y.ws.pack32Bit(t),y.ws.pack32Bit(e.vid),y.ws.pack32Bit(e.oix),y.ws.sendRequest().then(function(t){let e=[],n=t.getUint32();for(let r=0;r<n;r++){let n=new g;n.type=t.getUint32(),n.flags=t.getUint32(),n.size=t.getUint16(),n.elements=t.getUint16(),n.name=t.getString(),n.classname=t.getString(),e.push(n)}return{sts:t.sts,value:e}})}static unpackGetObject(t){let e=null;if(Object(l.p)(t.sts)){e=new d;let n=t.getUint32(),r=t.getUint32();e.objid=new l.h(n,r),e.cid=t.getUint32(),e.has_children=0!==t.getUint16(),e.name=t.getString(),e.fullname=t.getString(),e.classname=t.getString(),e.description=t.getString(),e.param1=t.getString()}return{sts:t.sts,value:e}}static getObject(t,e){return y.ws.beginRequest(a.GET_OBJECT),y.ws.pack16Bit(e),y.ws.pack32Bit(t.vid),y.ws.pack32Bit(t.oix),y.ws.sendRequest().then(y.unpackGetObject)}static getObjectFromAref(t,e){return y.ws.beginRequest(a.GET_OBJECT_FROM_AREF),y.ws.pack16Bit(e),y.ws.pack32Bit(t.objid.vid),y.ws.pack32Bit(t.objid.oix),y.ws.pack32Bit(t.offset),y.ws.pack32Bit(t.body),y.ws.pack32Bit(t.size),y.ws.pack32Bit(t.flags),y.ws.sendRequest().then(y.unpackGetObject)}static getObjectFromName(t,e){return y.ws.beginRequest(a.GET_OBJECT_FROM_NAME),y.ws.pack16Bit(e),y.ws.packString(t),y.ws.sendRequest().then(y.unpackGetObject)}static crrSignal(t){return y.ws.beginRequest(a.CRR_SIGNAL),y.ws.pack32Bit(t.vid),y.ws.pack32Bit(t.oix),y.ws.sendRequest().then(function(t){let e=[];if(Object(l.p)(t.sts)){let n=t.getUint16();for(let r=0;r<n;r++){let n=new x;n.type=t.getUint16();let r=t.getUint32(),o=t.getUint32();n.objid=new l.h(r,o),n.name=t.getString(),n.classname=t.getString(),e.push(n)}}return{sts:t.sts,value:e}})}static getOpwindMenu(t){return y.ws.beginRequest(a.GET_OPWIND_MENU),y.ws.packString(t),y.ws.sendRequest().then(function(t){let e=new C;if(Object(l.p)(t.sts)){e.title=t.getString(),e.text=t.getString(),e.enable_language=t.getUint32(),e.enable_login=t.getUint32(),e.enable_alarmlist=t.getUint32(),e.enable_eventlog=t.getUint32(),e.enable_navigator=t.getUint32(),e.disable_help=t.getUint32(),e.disable_proview=t.getUint32(),e.language=t.getUint32();let n=t.getUint16();for(let r=0;r<n;r++){let n=new p;n.type=t.getUint32(),n.text=t.getString(),n.name=t.getString(),n.url=t.getString(),e.buttons.push(n)}}return{sts:t.sts,value:e}})}static login(t,e){return y.ws.beginRequest(a.CHECK_USER),y.ws.packString(t),y.ws.packString(e),y.ws.sendRequest().then(function(t){let e=Object(l.p)(t.sts)?t.getUint32():0;return{sts:t.sts,value:e}})}static getMsg(t){return y.ws.beginRequest(a.GET_MSG),y.ws.pack32Bit(t),y.ws.sendRequest().then(function(t){let e=Object(l.p)(t.sts)?t.getString():"";return{sts:t.sts,value:e}})}static mhSync(t){return y.ws.beginRequest(a.MH_SYNC),y.ws.pack32Bit(t),y.ws.sendRequest().then(function(t){let e=[],n=t.getUint32();for(let r=0;r<n;r++){let n=new _;n.eventTime=t.getString(),n.eventText=t.getString(),n.eventName=t.getString(),n.eventFlags=t.getUint32(),n.eventStatus=t.getUint32(),n.eventPrio=t.getUint32(),n.eventId=new h,n.eventId.nix=t.getUint32(),n.eventId.idx=t.getUint32(),n.eventId.birthTime=t.getString(),n.targetId=new h,n.targetId.nix=t.getUint32(),n.targetId.idx=t.getUint32(),n.targetId.birthTime=t.getString(),n.eventType=t.getUint32();let r=new l.h(0,0);r.vid=t.getUint32(),r.oix=t.getUint32(),n.object=new l.g,n.object.objid=r,n.object.offset=t.getUint32(),n.object.body=t.getUint32(),n.object.size=t.getUint32(),n.object.flags=t.getUint32();let o=new l.h(0,0);o.vid=t.getUint32(),o.oix=t.getUint32(),n.supObject=new l.g,n.supObject.objid=o,n.supObject.offset=t.getUint32(),n.supObject.body=t.getUint32(),n.supObject.size=t.getUint32(),n.supObject.flags=t.getUint32(),n.eventMoreText=t.getString(),n.syncIdx=t.getUint32(),e.push(n)}return{sts:t.sts,value:e}})}static mhAcknowledge(t){return y.ws.beginRequest(a.MH_ACK),y.ws.pack32Bit(t.nix),y.ws.pack32Bit(t.idx),y.ws.packString(t.birthTime),y.ws.sendRequest().then(t=>t.sts)}}y.sub=[],y.PORT=4448,y.subscriptionCount=1},function(t,e,n){"use strict";function r(t,e){var n=function(t){for(var e=!1,n=!1,r="",o="",i="",s=0;s<t.length;s++){var a=t[s];"."===a?(n=!0,e=!1,i.length>0&&(i+=" ")):"#"===a?(e=!0,n=!1):e?o+=a:n?i+=a:r+=a}return{tag:r||"div",id:o,className:i}}(t),r=n.tag,o=n.id,i=n.className,s=e?document.createElementNS(e,r):document.createElement(r);return o&&(s.id=o),i&&(e?s.setAttribute("class",i):s.className=i),s}function o(t,e){var n=C(t),r=C(e);return e===r&&r.__redom_view&&(e=r.__redom_view),r.parentNode&&(i(e,r,n),n.removeChild(r)),e}function i(t,e,n){var r=e.__redom_lifecycle;if(s(r))e.__redom_lifecycle={};else{var o=n;for(e.__redom_mounted&&u(e,"onunmount");o;){var i=o.__redom_lifecycle||{};for(var a in r)i[a]&&(i[a]-=r[a]);s(i)&&(o.__redom_lifecycle=null),o=o.parentNode}}}function s(t){if(null==t)return!0;for(var e in t)if(t[e])return!1;return!0}n.d(e,"a",function(){return A}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return m}),n.d(e,"d",function(){return d});var a=["onmount","onremount","onunmount"],l="undefined"!=typeof window&&"ShadowRoot"in window;function c(t,e,n,r){var o=C(t),s=C(e);e===s&&s.__redom_view&&(e=s.__redom_view),e!==s&&(s.__redom_view=e);var c=s.__redom_mounted,h=s.parentNode;return c&&h!==o&&i(0,s,h),null!=n?r?o.replaceChild(s,C(n)):o.insertBefore(s,C(n)):o.appendChild(s),function(t,e,n,r){for(var o=e.__redom_lifecycle||(e.__redom_lifecycle={}),i=n===r,s=!1,c=0,h=a;c<h.length;c+=1){var _=h[c];i||t!==e&&_ in t&&(o[_]=(o[_]||0)+1),o[_]&&(s=!0)}if(!s)return void(e.__redom_lifecycle={});var f=n,d=!1;(i||f&&f.__redom_mounted)&&(u(e,i?"onremount":"onmount"),d=!0);for(;f;){var g=f.parentNode,p=f.__redom_lifecycle||(f.__redom_lifecycle={});for(var C in o)p[C]=(p[C]||0)+o[C];if(d)break;(f.nodeType===Node.DOCUMENT_NODE||l&&f instanceof ShadowRoot||g&&g.__redom_mounted)&&(u(f,i?"onremount":"onmount"),d=!0),f=g}}(e,s,o,h),e}function u(t,e){"onmount"===e||"onremount"===e?t.__redom_mounted=!0:"onunmount"===e&&(t.__redom_mounted=!1);var n=t.__redom_lifecycle;if(n){var r=t.__redom_view,o=0;for(var i in r&&r[e]&&r[e](),n)i&&o++;if(o)for(var s=t.firstChild;s;){var a=s.nextSibling;u(s,e),s=a}}}function h(t,e,n){t.style[e]=null==n?"":n}var _="http://www.w3.org/1999/xlink";function f(t,e,n,r){var o=C(t);if("object"==typeof e)for(var i in e)f(o,i,e[i],r);else{var s=o instanceof SVGElement,a="function"==typeof n;if("style"===e&&"object"==typeof n)!function(t,e,n){var r=C(t);if("object"==typeof e)for(var o in e)h(r,o,e[o]);else h(r,e,n)}(o,n);else if(s&&a)o[e]=n;else if("dataset"===e)!function t(e,n,r){if("object"==typeof n)for(var o in n)t(e,o,n[o]);else null!=r?e.dataset[n]=r:delete e.dataset[n]}(o,n);else if(!s&&(e in o||a)&&"list"!==e)o[e]=n;else{if(s&&"xlink"===e)return void function t(e,n,r){if("object"==typeof n)for(var o in n)t(e,o,n[o]);else null!=r?e.setAttributeNS(_,n,r):e.removeAttributeNS(_,n,r)}(o,n);r&&"class"===e&&(n=o.className+" "+n),null==n?o.removeAttribute(e):o.setAttribute(e,n)}}}function d(t){return document.createTextNode(null!=t?t:"")}function g(t,e,n){for(var r=0,o=e;r<o.length;r+=1){var i=o[r];if(0===i||i){var s=typeof i;"function"===s?i(t):"string"===s||"number"===s?t.appendChild(d(i)):x(C(i))?c(t,i):i.length?g(t,i,n):"object"===s&&f(t,i,null,n)}}}function p(t){return"string"==typeof t?w(t):C(t)}function C(t){return t.nodeType&&t||!t.el&&t||C(t.el)}function x(t){return t&&t.nodeType}var y={};function w(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];var o=typeof t;if("string"===o)e=b(t).cloneNode(!1);else if(x(t))e=t.cloneNode(!1);else{if("function"!==o)throw new Error("At least one argument required");var i=t;e=new(Function.prototype.bind.apply(i,[null].concat(n)))}return g(C(e),n,!0),e}var A=w;function b(t){return y[t]||(y[t]=r(t))}function m(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=function t(e,n,r){var o=r;var i=new Array(n.length);for(var s=0;s<n.length;s++)i[s]=n[s]&&C(n[s]);for(var a=0;a<n.length;a++){var l=n[a];if(l){var u=i[a];if(u!==o)if(x(u)){var h=o&&o.nextSibling,_=null!=l.__redom_index,f=_&&h===i[a+1];c(e,l,o,f),f&&(o=h)}else null!=l.length&&(o=t(e,l,o));else o=o.nextSibling}}return o}(t,e,C(t).firstChild);r;){var i=r.nextSibling;o(t,r),r=i}}w.extend=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=b(t);return w.bind.apply(w,[this,r].concat(e))};var v=function(t,e,n){this.View=t,this.initData=n,this.oldLookup={},this.lookup={},this.oldViews=[],this.views=[],null!=e&&(this.key="function"==typeof e?e:function(t){return function(e){return e[t]}}(e))};v.prototype.update=function(t,e){for(var n=this.View,r=this.key,o=this.initData,i=null!=r,s=this.lookup,a={},l=new Array(t.length),c=this.views,u=0;u<t.length;u++){var h=t[u],_=void 0;if(i){var f=r(h);_=s[f]||new n(o,h,u,t),a[f]=_,_.__redom_id=f}else _=c[u]||new n(o,h,u,t);_.update&&_.update(h,u,t,e),C(_.el).__redom_view=_,l[u]=_}this.oldViews=c,this.views=l,this.oldLookup=s,this.lookup=a};var k=function(t,e,n,r){this.__redom_list=!0,this.View=e,this.initData=r,this.views=[],this.pool=new v(e,n,r),this.el=p(t),this.keySet=null!=n};k.prototype.update=function(t,e){void 0===t&&(t=[]);var n=this.keySet,r=this.views;this.pool.update(t,e);var i=this.pool,s=i.views,a=i.lookup;if(n)for(var l=0;l<r.length;l++){var c=r[l];null==a[c.__redom_id]&&(c.__redom_index=null,o(this,c))}for(var u=0;u<s.length;u++){s[u].__redom_index=u}m(this,s),n&&(this.lookup=a),this.views=s},k.extend=function(t,e,n,r){return k.bind(k,t,e,n,r)},k.extend;var S=function(t,e){this.el=d(""),this.visible=!1,this.view=null,this._placeholder=this.el,t instanceof Node?this._el=t:t.el instanceof Node?(this._el=t,this.view=t):this._View=t,this._initData=e};S.prototype.update=function(t,e){var n=this._placeholder,r=this.el.parentNode;if(t){if(!this.visible)if(this._el)c(r,this._el,n),o(r,n),this.el=C(this._el),this.visible=t;else{var i=new(0,this._View)(this._initData);this.el=C(i),this.view=i,c(r,i,n),o(r,n)}this.view&&this.view.update&&this.view.update(e)}else if(this.visible){if(this._el)return c(r,n,this._el),o(r,this._el),this.el=n,void(this.visible=t);c(r,n,this.view),o(r,this.view),this.el=n,this.view=null}this.visible=t};var T=function(t,e,n){this.el=p(t),this.Views=e,this.initData=n};T.prototype.update=function(t,e){if(t!==this.route){var n=this.Views[t];this.route=t,n&&(n instanceof Node||n.el instanceof Node)?this.view=n:this.view=n&&new n(this.initData,e),m(this.el,[this.view])}this.view&&this.view.update&&this.view.update(e,t)};var E="http://www.w3.org/2000/svg",O={};function R(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];var o=typeof t;if("string"===o)e=L(t).cloneNode(!1);else if(x(t))e=t.cloneNode(!1);else{if("function"!==o)throw new Error("At least one argument required");var i=t;e=new(Function.prototype.bind.apply(i,[null].concat(n)))}return g(C(e),n,!0),e}function L(t){return O[t]||(O[t]=r(t,E))}R.extend=function(t){var e=L(t);return R.bind(this,e)},R.ns=E},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),o=n(1);class i extends r.f{constructor(t,e=0,n=0){super(e,n),this.z_x=()=>this.x*this.ctx.zoom_factor,this.z_y=()=>this.y*this.ctx.zoom_factor,this.ctx=t}open(t){for(;;){let e=t.consumeInt();switch(e){case o.k.Point:break;case o.k.Point_x:this.x=t.consumeFloat();break;case o.k.Point_y:this.y=t.consumeFloat();break;case o.k.End:return;default:console.log("Syntax error in FlowPoint:",e),t.consumeLine()}}}}},function(t,e,n){"use strict";var r;!function(t){t[t.No=0]="No",t[t.Gray=1]="Gray",t[t.YellowGreen=2]="YellowGreen",t[t.Yellow=3]="Yellow",t[t.Orange=4]="Orange",t[t.Red=5]="Red",t[t.Magenta=6]="Magenta",t[t.Blue=7]="Blue",t[t.Seablue=8]="Seablue",t[t.Green=9]="Green",t[t.DarkGray=10]="DarkGray",t[t.DarkYellowGreen=11]="DarkYellowGreen",t[t.DarkYellow=12]="DarkYellow",t[t.DarkOrange=13]="DarkOrange",t[t.DarkRed=14]="DarkRed",t[t.DarkMagenta=15]="DarkMagenta",t[t.DarkBlue=16]="DarkBlue",t[t.DarkSeablue=17]="DarkSeablue",t[t.DarkGreen=18]="DarkGreen",t[t.LightGray=19]="LightGray",t[t.LightYellowGreen=20]="LightYellowGreen",t[t.LightYellow=21]="LightYellow",t[t.LightOrange=22]="LightOrange",t[t.LightRed=23]="LightRed",t[t.LightMagenta=24]="LightMagenta",t[t.LightBlue=25]="LightBlue",t[t.LightSeablue=26]="LightSeablue",t[t.LightGreen=27]="LightGreen",t[t.GrayHighSaturation=28]="GrayHighSaturation",t[t.YellowGreenHighSaturation=29]="YellowGreenHighSaturation",t[t.YellowHighSaturation=30]="YellowHighSaturation",t[t.OrangeHighSaturation=31]="OrangeHighSaturation",t[t.RedHighSaturation=32]="RedHighSaturation",t[t.MagentaHighSaturation=33]="MagentaHighSaturation",t[t.BlueHighSaturation=34]="BlueHighSaturation",t[t.SeablueHighSaturation=35]="SeablueHighSaturation",t[t.GreenHighSaturation=36]="GreenHighSaturation",t[t.DarkGrayHighSaturation=37]="DarkGrayHighSaturation",t[t.DarkYellowGreenHighSaturation=38]="DarkYellowGreenHighSaturation",t[t.DarkYellowHighSaturation=39]="DarkYellowHighSaturation",t[t.DarkOrangeHighSaturation=40]="DarkOrangeHighSaturation",t[t.DarkRedHighSaturation=41]="DarkRedHighSaturation",t[t.DarkMagentaHighSaturation=42]="DarkMagentaHighSaturation",t[t.DarkBlueHighSaturation=43]="DarkBlueHighSaturation",t[t.DarkSeablueHighSaturation=44]="DarkSeablueHighSaturation",t[t.DarkGreenHighSaturation=45]="DarkGreenHighSaturation",t[t.LightGrayHighSaturation=46]="LightGrayHighSaturation",t[t.LightYellowGreenHighSaturation=47]="LightYellowGreenHighSaturation",t[t.LightYellowHighSaturation=48]="LightYellowHighSaturation",t[t.LightOrangeHighSaturation=49]="LightOrangeHighSaturation",t[t.LightRedHighSaturation=50]="LightRedHighSaturation",t[t.LightMagentaHighSaturation=51]="LightMagentaHighSaturation",t[t.LightBlueHighSaturation=52]="LightBlueHighSaturation",t[t.LightSeablueHighSaturation=53]="LightSeablueHighSaturation",t[t.LightGreenHighSaturation=54]="LightGreenHighSaturation",t[t.GrayLowSaturation=55]="GrayLowSaturation",t[t.YellowGreenLowSaturation=56]="YellowGreenLowSaturation",t[t.YellowLowSaturation=57]="YellowLowSaturation",t[t.OrangeLowSaturation=58]="OrangeLowSaturation",t[t.RedLowSaturation=59]="RedLowSaturation",t[t.MagentaLowSaturation=60]="MagentaLowSaturation",t[t.BlueLowSaturation=61]="BlueLowSaturation",t[t.SeablueLowSaturation=62]="SeablueLowSaturation",t[t.GreenLowSaturation=63]="GreenLowSaturation",t[t.DarkGrayLowSaturation=64]="DarkGrayLowSaturation",t[t.DarkYellowGreenLowSaturation=65]="DarkYellowGreenLowSaturation",t[t.DarkYellowLowSaturation=66]="DarkYellowLowSaturation",t[t.DarkOrangeLowSaturation=67]="DarkOrangeLowSaturation",t[t.DarkRedLowSaturation=68]="DarkRedLowSaturation",t[t.DarkMagentaLowSaturation=69]="DarkMagentaLowSaturation",t[t.DarkBlueLowSaturation=70]="DarkBlueLowSaturation",t[t.DarkSeablueLowSaturation=71]="DarkSeablueLowSaturation",t[t.DarkGreenLowSaturation=72]="DarkGreenLowSaturation",t[t.LightGrayLowSaturation=73]="LightGrayLowSaturation",t[t.LightYellowGreenLowSaturation=74]="LightYellowGreenLowSaturation",t[t.LightYellowLowSaturation=75]="LightYellowLowSaturation",t[t.LightOrangeLowSaturation=76]="LightOrangeLowSaturation",t[t.LightRedLowSaturation=77]="LightRedLowSaturation",t[t.LightMagentaLowSaturation=78]="LightMagentaLowSaturation",t[t.LightBlueLowSaturation=79]="LightBlueLowSaturation",t[t.LightSeablueLowSaturation=80]="LightSeablueLowSaturation",t[t.LightGreenLowSaturation=81]="LightGreenLowSaturation",t[t._=82]="_"}(r||(r={})),e.a=r},function(t,e,n){"use strict";var r=n(6);class o{static byteToUnsigned(t){let e=Math.floor(t);return e>=0?e:e+256}static fourBytesToInt(t,e){let n=o.byteToUnsigned(t[e++]);return n|=o.byteToUnsigned(t[e++])<<8,n|=o.byteToUnsigned(t[e++])<<16,n|=o.byteToUnsigned(t[e])<<24}static intToFourBytes(t,e){e.push(255&t),e.push(t>>>8&255),e.push(t>>>16&255),e.push(t>>>24&255)}static PERM_OP(t,e,n,r){let o=(t>>>n^e)&r;return[t^=o<<n,e^=o]}static HPERM_OP(t,e,n){let r=(t<<16-e^t)&n;return t^r^r>>>16-e}static des_set_key(t){let e=new Array(2*o.ITERATIONS),n=o.fourBytesToInt(t,0),r=o.fourBytesToInt(t,4);[r,n]=o.PERM_OP(r,n,4,252645135),n=o.HPERM_OP(n,-2,3435921408),r=o.HPERM_OP(r,-2,3435921408),[r,n]=o.PERM_OP(r,n,1,1431655765),[n,r]=o.PERM_OP(n,r,8,16711935),[r,n]=o.PERM_OP(r,n,1,1431655765),r=(255&r)<<16|65280&r|(16711680&r)>>>16|(4026531840&n)>>>4,n&=268435455;let i=0;for(let t=0;t<o.ITERATIONS;t++){o.shifts2[t]?(n=n>>>2|n<<26,r=r>>>2|r<<26):(n=n>>>1|n<<27,r=r>>>1|r<<27),n&=268435455,r&=268435455;let s=o.skb[0][63&n]|o.skb[1][n>>>6&3|n>>>7&60]|o.skb[2][n>>>13&15|n>>>14&48]|o.skb[3][n>>>20&1|n>>>21&6|n>>>22&56],a=o.skb[4][63&r]|o.skb[5][r>>>7&3|r>>>8&60]|o.skb[6][r>>>15&63]|o.skb[7][r>>>21&15|r>>>22&48];e[i++]=4294967295&(a<<16|65535&s),s=(s=s>>>16|4294901760&a)<<4|s>>>28,e[i++]=4294967295&s}return e}static D_ENCRYPT(t,e,n,r,i,s){let a,l,c;return l=(c=e^e>>>16)&r,c&=i,l=l^l<<16^e^s[n],a=(a=c^c<<16^e^s[n+1])>>>4|a<<28,t^=o.SPtrans[1][63&a]|o.SPtrans[3][a>>>8&63]|o.SPtrans[5][a>>>16&63]|o.SPtrans[7][a>>>24&63]|o.SPtrans[0][63&l]|o.SPtrans[2][l>>>8&63]|o.SPtrans[4][l>>>16&63]|o.SPtrans[6][l>>>24&63]}static body(t,e,n){let r=0,i=0,s=0;for(let a=0;a<25;a++){for(let s=0;s<2*o.ITERATIONS;s+=4)r=o.D_ENCRYPT(r,i,s,e,n,t),i=o.D_ENCRYPT(i,r,s+2,e,n,t);s=r,r=i,i=s}return s=i,i=r>>>1|r<<31,r=s>>>1|s<<31,r&=4294967295,i&=4294967295,[i,r]=o.PERM_OP(i,r,1,1431655765),[r,i]=o.PERM_OP(r,i,8,16711935),[i,r]=o.PERM_OP(i,r,2,858993459),[r,i]=o.PERM_OP(r,i,16,65535),[i,r]=o.PERM_OP(i,r,4,252645135),[r,i]}static crypt(t,e){for(;t.length<2;)t+="A";let n,r=t.charAt(0)+"",i=t.charAt(1)+"",s=r.charCodeAt(0),a=i.charCodeAt(0);n=r+i+" ";let l=o.con_salt[s],c=o.con_salt[a]<<4,u=[0,0,0,0,0,0,0,0];for(let t=0;t<u.length&&t<e.length;t++){let n=e.charCodeAt(t);u[t]=n<<1}let h=o.des_set_key(u),_=o.body(h,l,c),f=new Array(9);o.intToFourBytes(_[0],f),o.intToFourBytes(_[1],f),f.push(0);let d=0;for(let t=2,e=128;t<13;t++)for(let r=0,i=0;r<6;r++)i<<=1,0!=(f[d]&e)&&(i|=1),0===(e>>>=1)&&(d++,e=128),n=n.substring(0,t)+String.fromCharCode(o.cov_2char[i])+n.substring(t+1,n.length);return n}}o.ITERATIONS=16,o.con_salt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,0,0,0,0],o.shifts2=[!1,!1,!0,!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0,!1],o.skb=[[0,16,536870912,536870928,65536,65552,536936448,536936464,2048,2064,536872960,536872976,67584,67600,536938496,536938512,32,48,536870944,536870960,65568,65584,536936480,536936496,2080,2096,536872992,536873008,67616,67632,536938528,536938544,524288,524304,537395200,537395216,589824,589840,537460736,537460752,526336,526352,537397248,537397264,591872,591888,537462784,537462800,524320,524336,537395232,537395248,589856,589872,537460768,537460784,526368,526384,537397280,537397296,591904,591920,537462816,537462832],[0,33554432,8192,33562624,2097152,35651584,2105344,35659776,4,33554436,8196,33562628,2097156,35651588,2105348,35659780,1024,33555456,9216,33563648,2098176,35652608,2106368,35660800,1028,33555460,9220,33563652,2098180,35652612,2106372,35660804,268435456,301989888,268443648,301998080,270532608,304087040,270540800,304095232,268435460,301989892,268443652,301998084,270532612,304087044,270540804,304095236,268436480,301990912,268444672,301999104,270533632,304088064,270541824,304096256,268436484,301990916,268444676,301999108,270533636,304088068,270541828,304096260],[0,1,262144,262145,16777216,16777217,17039360,17039361,2,3,262146,262147,16777218,16777219,17039362,17039363,512,513,262656,262657,16777728,16777729,17039872,17039873,514,515,262658,262659,16777730,16777731,17039874,17039875,134217728,134217729,134479872,134479873,150994944,150994945,151257088,151257089,134217730,134217731,134479874,134479875,150994946,150994947,151257090,151257091,134218240,134218241,134480384,134480385,150995456,150995457,151257600,151257601,134218242,134218243,134480386,134480387,150995458,150995459,151257602,151257603],[0,1048576,256,1048832,8,1048584,264,1048840,4096,1052672,4352,1052928,4104,1052680,4360,1052936,67108864,68157440,67109120,68157696,67108872,68157448,67109128,68157704,67112960,68161536,67113216,68161792,67112968,68161544,67113224,68161800,131072,1179648,131328,1179904,131080,1179656,131336,1179912,135168,1183744,135424,1184e3,135176,1183752,135432,1184008,67239936,68288512,67240192,68288768,67239944,68288520,67240200,68288776,67244032,68292608,67244288,68292864,67244040,68292616,67244296,68292872],[0,268435456,65536,268500992,4,268435460,65540,268500996,536870912,805306368,536936448,805371904,536870916,805306372,536936452,805371908,1048576,269484032,1114112,269549568,1048580,269484036,1114116,269549572,537919488,806354944,537985024,806420480,537919492,806354948,537985028,806420484,4096,268439552,69632,268505088,4100,268439556,69636,268505092,536875008,805310464,536940544,805376e3,536875012,805310468,536940548,805376004,1052672,269488128,1118208,269553664,1052676,269488132,1118212,269553668,537923584,806359040,537989120,806424576,537923588,806359044,537989124,806424580],[0,134217728,8,134217736,1024,134218752,1032,134218760,131072,134348800,131080,134348808,132096,134349824,132104,134349832,1,134217729,9,134217737,1025,134218753,1033,134218761,131073,134348801,131081,134348809,132097,134349825,132105,134349833,33554432,167772160,33554440,167772168,33555456,167773184,33555464,167773192,33685504,167903232,33685512,167903240,33686528,167904256,33686536,167904264,33554433,167772161,33554441,167772169,33555457,167773185,33555465,167773193,33685505,167903233,33685513,167903241,33686529,167904257,33686537,167904265],[0,256,524288,524544,16777216,16777472,17301504,17301760,16,272,524304,524560,16777232,16777488,17301520,17301776,2097152,2097408,2621440,2621696,18874368,18874624,19398656,19398912,2097168,2097424,2621456,2621712,18874384,18874640,19398672,19398928,512,768,524800,525056,16777728,16777984,17302016,17302272,528,784,524816,525072,16777744,16778e3,17302032,17302288,2097664,2097920,2621952,2622208,18874880,18875136,19399168,19399424,2097680,2097936,2621968,2622224,18874896,18875152,19399184,19399440],[0,67108864,262144,67371008,2,67108866,262146,67371010,8192,67117056,270336,67379200,8194,67117058,270338,67379202,32,67108896,262176,67371040,34,67108898,262178,67371042,8224,67117088,270368,67379232,8226,67117090,270370,67379234,2048,67110912,264192,67373056,2050,67110914,264194,67373058,10240,67119104,272384,67381248,10242,67119106,272386,67381250,2080,67110944,264224,67373088,2082,67110946,264226,67373090,10272,67119136,272416,67381280,10274,67119138,272418,67381282]],o.SPtrans=[[8520192,131072,2155872256,2156003840,8388608,2147615232,2147614720,2155872256,2147615232,8520192,8519680,2147484160,2155872768,8388608,0,2147614720,131072,2147483648,8389120,131584,2156003840,8519680,2147484160,8389120,2147483648,512,131584,2156003328,512,2155872768,2156003328,0,0,2156003840,8389120,2147614720,8520192,131072,2147484160,8389120,2156003328,512,131584,2155872256,2147615232,2147483648,2155872256,8519680,2156003840,131584,8519680,2155872768,8388608,2147484160,2147614720,0,131072,8388608,2155872768,8520192,2147483648,2156003328,512,2147615232],[268705796,0,270336,268697600,268435460,8196,268443648,270336,8192,268697604,4,268443648,262148,268705792,268697600,4,262144,268443652,268697604,8192,270340,268435456,0,262148,268443652,270340,268705792,268435460,268435456,262144,8196,268705796,262148,268705792,268443648,270340,268705796,262148,268435460,0,268435456,8196,262144,268697604,8192,268435456,270340,268443652,268705792,8192,0,268435460,4,268705796,270336,268697600,268697604,262144,8196,268443648,268443652,4,268697600,270336],[1090519040,16842816,64,1090519104,1073807360,16777216,1090519104,65600,16777280,65536,16842752,1073741824,1090584640,1073741888,1073741824,1090584576,0,1073807360,16842816,64,1073741888,1090584640,65536,1090519040,1090584576,16777280,1073807424,16842752,65600,0,16777216,1073807424,16842816,64,1073741824,65536,1073741888,1073807360,16842752,1090519104,0,16842816,65600,1090584576,1073807360,16777216,1090584640,1073741824,1073807424,1090519040,16777216,1090584640,65536,16777280,1090519104,65600,16777280,0,1090584576,1073741888,1090519040,1073807424,64,16842752],[1049602,67109888,2,68158466,0,68157440,67109890,1048578,68158464,67108866,67108864,1026,67108866,1049602,1048576,67108864,68157442,1049600,1024,2,1049600,67109890,68157440,1024,1026,0,1048578,68158464,67109888,68157442,68158466,1048576,68157442,1026,1048576,67108866,1049600,67109888,2,68157440,67109890,0,1024,1048578,0,68157442,68158464,1024,67108864,68158466,1049602,1048576,68158466,2,67109888,1049602,1048578,1049600,68157440,67109890,1026,67108864,67108866,68158464],[33554432,16384,256,33571080,33570824,33554688,16648,33570816,16384,8,33554440,16640,33554696,33570824,33571072,0,16640,33554432,16392,264,33554688,16648,0,33554440,8,33554696,33571080,16392,33570816,256,264,33571072,33571072,33554696,16392,33570816,16384,8,33554440,33554688,33554432,16640,33571080,0,16648,33554432,256,16392,33554696,256,0,33571080,33570824,33571072,264,16384,16640,33570824,33554688,264,8,16648,33570816,33554440],[536870928,524304,0,537397248,524304,2048,536872976,524288,2064,537397264,526336,536870912,536872960,536870928,537395200,526352,524288,536872976,537395216,0,2048,16,537397248,537395216,537397264,537395200,536870912,2064,16,526336,526352,536872960,2064,536870912,536872960,526352,537397248,524304,0,536872960,536870912,2048,537395216,524288,524304,537397264,526336,16,537397264,526336,524288,536872976,536870928,537395200,526352,0,2048,536870928,536872976,537397248,537395200,2064,16,537395216],[4096,128,4194432,4194305,4198529,4097,4224,0,4194304,4194433,129,4198400,1,4198528,4198400,129,4194433,4096,4097,4198529,0,4194432,4194305,4224,4198401,4225,4198528,1,4225,4198401,128,4194304,4225,4198400,4198401,129,4096,128,4194304,4198401,4194433,4225,4224,0,128,4194305,1,4194432,0,4194433,4194432,4224,129,4096,4198529,4194304,4198528,1,4097,4198529,4194305,4198528,4198400,4097],[136314912,136347648,32800,0,134250496,2097184,136314880,136347680,32,134217728,2129920,32800,2129952,134250528,134217760,136314880,32768,2129952,2097184,134250496,136347680,134217760,0,2129920,134217728,2097152,134250528,136314912,2097152,32768,136347648,32,2097152,32768,134217760,136347680,32800,134217728,0,2129920,136314912,134250528,134250496,2097184,136347648,32,2097184,134250496,136347680,2097152,136314880,134217760,2129920,32800,134250528,136314880,32,136347648,2129952,0,134217728,136314912,32768,2129952]],o.cov_2char=[46,47,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122];var i=n(5);n.d(e,"a",function(){return s});class s{constructor(t=(()=>{}),e=(()=>{})){this.bc_success=t,this.bc_cancel=e,this.render()}static is_authorized(t,e=!1){return s.priv&t||e||window.alert("Not authorized for this operation"),!!(s.priv&t)}static fetchFromStore(){s.priv=Number(localStorage.getItem("pwr_privilege")),s.user=localStorage.getItem("pwr_user")}login_cb(t){1&t.sts?(s.priv=t.value,localStorage.setItem("pwr_privilege",String(s.priv)),document.title=s.user+" on "+window.location.hostname||"localhost",console.log("Login",s.user,"Priv",s.priv),this.bc_success&&this.bc_success()):(s.logout_cb(),console.log("Login failure","Priv",s.priv))}static logout_cb(){s.priv=0,s.user="",localStorage.setItem("pwr_privilege",String(s.priv)),document.title=window.location.hostname||"localhost"}render(){let t=Object(r.a)("div",{style:{backgroundColor:"#ddeeff",padding:"10px",display:"block",overflow:"hidden",margin:"auto",width:"max-content"}});Object(r.b)(t,Object(r.d)("Host")),Object(r.b)(t,Object(r.a)("br"));let e=localStorage.getItem("HOST")||"localhost",n=Object(r.a)("input",{value:e});Object(r.b)(t,n),Object(r.b)(t,Object(r.a)("br")),Object(r.b)(t,Object(r.d)("Username")),Object(r.b)(t,Object(r.a)("br"));let a=Object(r.a)("input",{autofocus:!0});Object(r.b)(t,a),Object(r.b)(t,Object(r.a)("br")),Object(r.b)(t,Object(r.d)("Password")),Object(r.b)(t,Object(r.a)("br"));let l=Object(r.a)("input",{type:"password"});Object(r.b)(t,l),Object(r.b)(t,Object(r.a)("br"));let c=Object(r.a)("input",{type:"button",value:"Apply"});Object(r.b)(t,c);let u=Object(r.a)("input",{type:"button",value:"Cancel",style:{cssFloat:"right"}});Object(r.b)(t,u),Object(r.c)(document.body,t);let h=this;c.addEventListener("click",()=>{let t=a.value,e=l.value;e=o.crypt("aa",e),s.user=t,localStorage.setItem("HOST",n.value),i.d.init().then(()=>{i.d.login(t,e).then(h.login_cb.bind(h))})}),u.addEventListener("click",this.bc_cancel)}static reduce_privilege(t){this.priv&=~t,localStorage.setItem("pwr_privilege",String(s.priv))}}s.priv=0,s.user=""},function(t,e,n){"use strict";e.a={leaf:0,map:2,openmap:4,object:6,attrenum:8,attrarra:10,attrarel:12,attr:14,crrwrite:16,crrread:18,ack:20,alarm:22,eventacked:24,eventalarm:26,eventreturn:28,info:30,system:32,maintenance:34,blockl:36,blockr:38,img:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],pending:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],images:["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAASElEQVQokWP4jwMwMDBgYBR5XBpwGYZVIzYNGDZB+QyEFOBiM+CyCacGBI0hgEGjsxkYGCiwkSI/4tKMz0DqxCM2A4hOOcQCAObFEQyI2PpKAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAQUlEQVQokWNgYGD4jw1jA2hqsGvAZRhWjdg0oIsh8QkqwMXGbhMuDXAxdAFsNDobyifTRor8SFGoUhSPFKUcYjEAMsMz2y6w8kgAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAKElEQVQokWP4DwUMDAwYGB9gwKUQm0FoGL/JOGwb1TgINZKFSbYOCgD1JxQJG0vK9AAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAK0lEQVQokWNgYGD4z8DA8B8bgMlhxbgUEgIMBE3Ggkc1Dk6N5AAGUm2DYQAkYTDe0vu7CAAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAQklEQVQokaXOwQ4AIAgCUP7/p+nUlpMSzY2bDwWHA5IEkFJCtaiKxE7dvsue8HZNJEPneoAuSq+OYAf9wy4K0Mk5C+d++RWimsw3AAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAPUlEQVQokaXRQQoAQAgCQP//6brKZmSt0M2hIACI4yBURqiKXQp0ThuhGwmt7Vy00XvqCa7QN1wjhtYLCCYyCkvDVnkJOQAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAH0lEQVQokWP4TyJgYGBg+E8iZiDFdHrZMKqBGA2kYAD8gaJsjwzf9wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAIklEQVQokWNgYGD4TxL+TyJg+P//P9GmwzXQ3oZRDdSOBwAGOSrkrXppgQAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAPklEQVQokWP4////fwYGBgxMCDBgU4jNICyYsOlYbENoJNIW7BqJsYm2NuJyBVE2EqWRfjbiUoQ3oAgpwgUANLqccvbgec0AAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAPElEQVQokWNgYGD4jw0wMDDgx9gUEgMYiDIdDaNoJBZg1UiUTTS1EZcriLKRKI30sxGXIgKBhF8RrqgBAOTOqGZ5aiCnAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAMElEQVQokWP4////fwYGBgxMCDBgU4jNICwYv+nY5InWOGojXW0khLEahtc6PDYCAB9hxkjBPICvAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAALUlEQVQokWNgYGD4jw0wMDDgx9gUEgMYCJmOTZ5ojaM20tVGQgCHK/AnLVwAAPonfpBwU5f4AAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAIklEQVQokWP4////fwYGBpwYHTDANGADeDWM2jAEbSAFAADB26JsIjYj1AAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAIElEQVQokWNgYGD4jw8wMDCgYwZcEvg1jNowBG0gBQMAQN8q5COZl1cAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAIUlEQVQokWP4TyJgGIQaGBgY/pOIibcEroEkTLIfhoEGADzs8B5gcUg/AAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAJUlEQVQokWNgYGD4TyIedBr+kwgY/v//T7TpcA0k2TAIQ4nmGgDFzt0jExR7hgAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAN0lEQVQokaWNQQoAMAjD8v9P633WVWhBkJIotQQoYPYbrHYrqC9D+MG54OBMuMC54GApuPBed9OxiMNLGke1JwAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAANElEQVQokWNgYGD4jw3DABY57IqxsQlqwGELSYop1ECEYgo0EKmYQg1EKMbUQEAxRAMpAABRMgoFjbTzXgAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAPElEQVQokWNgYGD4j4yRATY5BmyKkGks4qgS2BSj2UYFDdgAdW2gvpOwhDW6ItwaCGI8JuHWgMOtWD0PACufaaWhXDFDAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAPElEQVQokWP4jwYYGBjgGKscNkXINLo4hgZsipFto44GbJi6NlDfSehhjUxjyGMVxQMYcJmEVwPB5ICEAdcbY6vf9TVAAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAS0lEQVQokZ2Q2w4AIAhCz///ND11M3RVmxuDUBRAtw8QHRyC4SSJSDjDht1Yhxdudks+bFNxYsX9G6rz2qVHxqRspGi2Wpoji/dqaLh22DbO2VuXAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAASklEQVQokWP4////fwYGBqIwVC2cgSKBTQzKxhDA0ICmGau12BRCMLJp2BQgy8H9gM9ELGJkasAXvFg9TQjgDCVc8YBXAwFMmgYASkT1C9E5Ya0AAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAARklEQVQokZ2QQQoAMAjD+v9Pu9PA1ThQQRBtoFUBJSkk0SlwOwKykCAEcn+BK8hih/aAe++y7IDuhWgXfcKHCuBBfX6ASR3Vn8ZINQzCrQAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAQ0lEQVQokWNgYGD4j45hAJscA8UakBXi0ITddDy2YJqOrBiLJjI1oLsdj1/I0IAnCLFpwtSALYQwNKB7FJ2NooEUDAAtGwcI+Svs4gAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAL0lEQVQokWP4TyJgGCkaGBgQyhhwSeASw9CAYho2A3CZiE0xVg34FOPUgA+QrAEA1FYi+tWeG/cAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAMElEQVQokWNgYGD4TyIeGRr+//+PXQOaBC4xVElkBdgMwHASTBEOxdj9gEcxHYIVAC5kqlZXl5JMAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAJ0lEQVQokWP4jwMwMDBgF8elGIZHNeDSANOEVRyXBpwGUcUGqvoBAK+H8xt0qXFWAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAJ0lEQVQokWNgYGD4jw3///8fqzgDLsUwMKoBlwaSg5UAHoiIw2cDAFMz2iY65DAoAAAAAElFTkSuQmC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAASUlEQVQokZ2RUQoAIAjFdv9L11dhskeUEIQ2mcYIAXjeisA+EahFA9ad/siAA0wqSUsnu87wDZh3VEodO6Rr1c51rc8fd9OoMQHLk7dXak3qLwAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAR0lEQVQokZ2S2woAIAhD9/8/vV6tjgMNhLxMN1SSTGYb46JkfS2gJglQ/ncRAZ5JTCXQYsFRwxpAvFtKoeMvmoqDv1jc5DQONycV+bfOetgAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAOUlEQVQokWNgYGD4///////E0AwMDP8hPDQAk8QhjlMCuzg2G3AB6tlAez8MglAiCZNiw/////8DACmmtFrq9aGNAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAN0lEQVQokWP4////fwYGhv/E0FA2w390jCSJIc6ASwKnBmw24MLUs4H2fhgEoUQKIMkGBgaG/wDZFBj2pVi3HgAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAN0lEQVQokWNgYGD4TyJm+E8sgGugig3YxHFqwGcIQQ3obAwN6G7GawMuhVg1EFKMUwM+QJ+IAwDD1Gyi1EZc6gAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAO0lEQVQokWP4TyJg+P///38GBgaiMFwDVWzAJo5TA15DCGnAYKNrwHAzPhtwKcSqgZBinBqIigeaRhwAPuZgrlZXy70AAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAP0lEQVQokZWPQQoAMAzC8v9Pu8soDOxaBS82QkWNgPKTJ/BYsLekAOxfquwHWyfws6ED7OgtfNk9bAuTSGBJOufqnHIsmYkzAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAQUlEQVQokZWPQQ4AMAQE5/+f1kuTCkuROGAmADCVPsJsBfdCsX0u3N7sJFfXsAqW8BMaID+9gE3SJayEFo7CFwY7GtAw3ouVj50AAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAQElEQVQokZ2QQQ4AMAjC+v9Pu9MWl5AJ42a0IlKBgCIadgGgQ8imqo9D3zDBvJoyR+zwlWHS9SUHaOf4QOywtQCQGucn0g2dEQAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAOklEQVQokWNgYGD4Tyz+////fwZSFBOtAaoQQsM46JLY+HAbUEwgrJmwyZTZQJYfSAolmsQDWTENwwByoOYaWbAqegAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAPElEQVQokWP4jwMwMDBgF8enAZsmvBqw2cSARQBDIQqbGEUoaggpQBcj3Qay/IAN4AwlfBrIigeiNeACADpU5yeYXn+XAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAPElEQVQokWNgYGD4jw3///8fqzgDPg04NOG3AUMTugA2hWhqiFKEzCeoAF2MRBvI8gNJoUT1eCBaAy4MAMhm5hr5iTaWAAAAAElFTkSuQmCC"]}},function(t,e,n){"use strict";var r;!function(t){t[t.Helvetica=0]="Helvetica",t[t.Times=1]="Times",t[t.NewCenturySchoolbook=2]="NewCenturySchoolbook",t[t.Courier=3]="Courier",t[t.LucidaSans=4]="LucidaSans",t[t._=5]="_",t[t.No=9999]="No"}(r||(r={})),e.a=r},function(t,e,n){"use strict";var r=n(15),o=n(1),i=n(17),s=n(7),a=n(0);class l{constructor(t){this.angle1=0,this.angle2=0,this.draw_type=0,this.line_width=0,this.ctx=t,this.ll=new s.a(t),this.ur=new s.a(t)}draw(t,e,n,r,o){let i,s=(this.ur.z_x()-this.ll.z_x())/2,a=this.ll.z_x()+t.z_x()+s,l=this.ll.z_y()+t.z_y()+s,c=(i=90===this.angle1||270===this.angle1?(this.angle1+90)/180*Math.PI:(this.angle1-90)/180*Math.PI)+this.angle2/180*Math.PI;this.ctx.gdraw.gctx.lineWidth=Math.max(this.ctx.zoom_factor/this.ctx.base_zoom_factor*this.line_width,1),this.ctx.gdraw.gctx.strokeStyle=e?"red":"black",this.ctx.gdraw.gctx.beginPath(),this.ctx.gdraw.gctx.arc(a,l,s,i,c,!1),this.ctx.gdraw.gctx.stroke()}open(t){for(;;){let e=t.consumeInt();switch(e){case o.k.Arc:break;case o.k.Arc_draw_type:this.draw_type=t.consumeInt();break;case o.k.Arc_line_width:this.line_width=t.consumeInt();break;case o.k.Arc_angle1:this.angle1=t.consumeFloat();break;case o.k.Arc_angle2:this.angle2=t.consumeFloat();break;case o.k.Arc_ll:this.ll.open(t);break;case o.k.Arc_ur:this.ur.open(t);break;case o.k.End:return;default:console.log("Syntax error in FlowArc:",e),t.consumeLine()}}}get_borders(t,e,n){e.set(a.i.union(e,new a.i(t.x+this.ll.x,t.y+this.ll.y,t.x+this.ur.x,t.y+this.ur.y)))}move(t,e,n,r){this.ll.set(t),this.ur.set(e),this.angle1=n,this.angle2=r,this.ctx.set_dirty()}shift(t){this.ll.set(a.f.add(this.ll,t)),this.ur.set(a.f.add(this.ur,t)),this.ctx.set_dirty()}}var c=n(3);class u{constructor(t){this.arrow_width=0,this.arrow_length=0,this.draw_type=0,this.line_width=0,this.ctx=t,this.p1=new s.a(t),this.p2=new s.a(t),this.p_dest=new s.a(t)}draw(t,e,n,r,o){switch(this.draw_type){case c.a.LineGray:this.ctx.gdraw.gctx.fillStyle="lightgray";break;case c.a.LineRed:case c.a.LineDashedRed:this.ctx.gdraw.gctx.fillStyle="red";break;case c.a.LineErase:return;default:this.ctx.gdraw.gctx.fillStyle="black"}e&&(this.ctx.gdraw.gctx.fillStyle="red"),this.ctx.gdraw.gctx.beginPath(),this.ctx.gdraw.gctx.moveTo(this.p1.z_x()+t.z_x(),this.p1.z_y()+t.z_y()),this.ctx.gdraw.gctx.lineTo(this.p2.z_x()+t.z_x(),this.p2.z_y()+t.z_y()),this.ctx.gdraw.gctx.lineTo(this.p_dest.z_x()+t.z_x(),this.p_dest.z_y()+t.z_y()),this.ctx.gdraw.gctx.lineTo(this.p1.z_x()+t.z_x(),this.p1.z_y()+t.z_y()),this.ctx.gdraw.gctx.fill()}open(t){for(;;){let e=t.consumeInt();switch(e){case o.k.Arrow:break;case o.k.Arrow_arrow_width:this.arrow_width=t.consumeFloat();break;case o.k.Arrow_arrow_length:this.arrow_length=t.consumeFloat();break;case o.k.Arrow_draw_type:this.draw_type=t.consumeInt();break;case o.k.Arrow_line_width:this.line_width=t.consumeInt();break;case o.k.Arrow_p_dest:this.p_dest.open(t);break;case o.k.Arrow_p1:this.p1.open(t);break;case o.k.Arrow_p2:this.p2.open(t);break;case o.k.End:return;default:console.log("Syntax error in FlowArrow:",e),t.consumeLine()}}}move(t,e,n,r){if(Math.abs(e.x-t.x)<Number.EPSILON)t.y>e.y?(this.p1.x=e.x+this.arrow_width/2,this.p1.y=e.y+this.arrow_length,this.p2.x=e.x-this.arrow_width/2,this.p2.y=e.y+this.arrow_length):(this.p1.x=e.x+this.arrow_width/2,this.p1.y=e.y-this.arrow_length,this.p2.x=e.x-this.arrow_width/2,this.p2.y=e.y-this.arrow_length);else if(Math.abs(e.y-t.y)<Number.EPSILON)t.x>e.x?(this.p1.x=e.x+this.arrow_length,this.p1.y=e.y+this.arrow_width/2,this.p2.x=e.x+this.arrow_length,this.p2.y=e.y-this.arrow_width/2):(this.p1.x=e.x-this.arrow_length,this.p1.y=e.y-this.arrow_width/2,this.p2.x=e.x-this.arrow_length,this.p2.y=e.y+this.arrow_width/2);else{let n=Math.sqrt((t.y-e.y)*(t.y-e.y)+(t.x-e.x)*(t.x-e.x));this.p1.x=e.x+(t.x-e.x)*this.arrow_length/n+(t.y-e.y)*this.arrow_width/n/2,this.p1.y=e.y+(t.y-e.y)*this.arrow_length/n-(t.x-e.x)*this.arrow_width/n/2,this.p2.x=e.x+(t.x-e.x)*this.arrow_length/n-(t.y-e.y)*this.arrow_width/n/2,this.p2.y=e.y+(t.y-e.y)*this.arrow_length/n+(t.x-e.x)*this.arrow_width/n/2}this.p_dest.set(e),this.ctx.set_dirty()}shift(t){this.p_dest.set(a.f.add(this.p_dest,t)),this.p1.set(a.f.add(this.p1,t)),this.p2.set(a.f.add(this.p2,t)),this.ctx.set_dirty()}}var h=n(18);class _{constructor(t){this.cc_name="",this.con_type=0,this.corner=0,this.draw_type=0,this.line_width=0,this.arrow_width=0,this.arrow_length=0,this.round_corner_amount=0,this.group=0,this.ctx=t}open(t){for(;;){let e=t.consumeInt();switch(e){case o.k.ConClass:break;case o.k.ConClass_cc_name:this.cc_name=t.consumeLine();break;case o.k.ConClass_con_type:this.con_type=t.consumeInt();break;case o.k.ConClass_corner:this.corner=t.consumeInt();break;case o.k.ConClass_draw_type:this.draw_type=t.consumeInt();break;case o.k.ConClass_line_width:this.line_width=t.consumeInt();break;case o.k.ConClass_arrow_width:this.arrow_width=t.consumeFloat();break;case o.k.ConClass_arrow_length:this.arrow_length=t.consumeFloat();break;case o.k.ConClass_round_corner_amount:this.round_corner_amount=t.consumeFloat();break;case o.k.ConClass_group:this.group=t.consumeInt();break;case o.k.End:return;default:console.log("Syntax error in FlowConClass:",e),t.consumeLine()}}}draw(t,e,n,r,o){}}var f=n(2);class d{constructor(t){this.number=0,this.direction=0,this.trace_attribute="",this.trace_attr_type=0,this.ctx=t,this.p=new s.a(t)}draw(t,e,n,r,o){let i=Math.floor(this.ctx.zoom_factor&this.ctx.base_zoom_factor-1)+2;i=Object(a.n)(i,0,f.d-1);let s=Math.floor(.025*this.ctx.zoom_factor);if(o.sel_conpoint1===this.number||o.sel_conpoint2===this.number){let e=this.p.z_x()+t.z_x()-s/2,n=this.p.z_y()+t.z_y()-s/2;this.direction===f.e.Up?n-=s/2:this.direction===f.e.Down?n+=s/2:this.direction===f.e.Right?e-=s/2:this.direction===f.e.Left&&(e+=s/2),this.ctx.gdraw.arc(e,n,s,s,0,360,c.a.LineRed,!1,i)}}open(t){for(;;){let e=t.consumeInt();switch(e){case o.k.ConPoint:break;case o.k.ConPoint_number:this.number=t.consumeInt();break;case o.k.ConPoint_direction:this.direction=t.consumeInt();break;case o.k.ConPoint_p:this.p.open(t);break;case o.k.ConPoint_trace_attribute:this.trace_attribute=t.consumeLine();break;case o.k.ConPoint_trace_attr_type:this.trace_attr_type=t.consumeInt();break;case o.k.End:return;default:console.log("Syntax error in FlowConPoint:",e),t.consumeLine()}}}get_conpoint(t){return this.number===t?{p:Object.assign({},this.p),dir:this.direction,sts:1}:null}}class g{constructor(t){this.draw_type=0,this.line_width=0,this.ctx=t,this.p1=new s.a(t),this.p2=new s.a(t)}draw(t,e,n,r,o){switch(this.ctx.gdraw.gctx.lineWidth=this.ctx.zoom_factor/this.ctx.base_zoom_factor*this.line_width,this.ctx.gdraw.gctx.lineWidth<1&&(this.ctx.gdraw.gctx.lineWidth=1),this.draw_type!=c.a.LineDashed&&this.draw_type!=c.a.LineDashedRed||this.ctx.gdraw.gctx.setLineDash([8,8]),this.draw_type){case c.a.LineGray:this.ctx.gdraw.gctx.strokeStyle="lightgray";break;case c.a.LineRed:case c.a.LineDashedRed:this.ctx.gdraw.gctx.strokeStyle="red";break;case c.a.LineErase:return;default:this.ctx.gdraw.gctx.strokeStyle="black"}e&&(this.ctx.gdraw.gctx.strokeStyle="red"),this.ctx.gdraw.gctx.beginPath(),this.ctx.gdraw.gctx.moveTo(this.p1.z_x()+t.z_x(),this.p1.z_y()+t.z_y()),this.ctx.gdraw.gctx.lineTo(this.p2.z_x()+t.z_x(),this.p2.z_y()+t.z_y()),this.ctx.gdraw.gctx.stroke(),this.draw_type!=c.a.LineDashed&&this.draw_type!=c.a.LineDashedRed||this.ctx.gdraw.gctx.setLineDash([])}open(t){for(;;){let e=t.consumeInt();switch(e){case o.k.Line:break;case o.k.Line_draw_type:this.draw_type=t.consumeInt();break;case o.k.Line_line_width:this.line_width=t.consumeInt();break;case o.k.Line_p1:this.p1.open(t);break;case o.k.Line_p2:this.p2.open(t);break;case o.k.End:return;default:console.log("Syntax error in FlowLine:",e),t.consumeLine()}}}get_borders(t,e,n){e.set(a.i.union(e,new a.i(t.x+this.p1.x,t.y+this.p1.y,t.x+this.p1.x,t.y+this.p1.y))),e.set(a.i.union(e,new a.i(t.x+this.p2.x,t.y+this.p2.y,t.x+this.p2.x,t.y+this.p2.y)))}move(t,e){this.p1.set(t),this.p2.set(e),this.ctx.set_dirty()}shift(t){this.p1.set(a.f.add(this.p1,t)),this.p2.set(a.f.add(this.p2,t)),this.ctx.set_dirty()}}var p=n(13),C=n(20),x=n(14),y=n(19);class w extends x.a{constructor(t){super(t)}draw(t,e,n,r,o){let i=(this.ll.x+t.x)*this.ctx.zoom_factor,s=(this.ll.y+t.y)*this.ctx.zoom_factor,a=(this.ur.x+t.x)*this.ctx.zoom_factor,l=(this.ur.y+t.y)*this.ctx.zoom_factor;this.ctx.gdraw.gctx.lineWidth=this.ctx.zoom_factor/this.ctx.base_zoom_factor*this.line_width,this.ctx.gdraw.gctx.lineWidth<1&&(this.ctx.gdraw.gctx.lineWidth=1);let u=this.draw_type;if(u===c.a.Inherit&&null!==o&&(u=o.fill_color),this.fill){switch(u){case c.a.LineRed:this.ctx.gdraw.gctx.fillStyle="red";break;case c.a.Green:this.ctx.gdraw.gctx.fillStyle="green";break;case c.a.Yellow:this.ctx.gdraw.gctx.fillStyle="yellow";break;default:this.ctx.gdraw.gctx.fillStyle="gray"}this.ctx.gdraw.gctx.beginPath(),this.ctx.gdraw.gctx.moveTo(i,l),this.ctx.gdraw.gctx.lineTo((i+a)/2,s),this.ctx.gdraw.gctx.lineTo(a,l),this.ctx.gdraw.gctx.lineTo(i,l),this.ctx.gdraw.gctx.fill()}else this.ctx.gdraw.gctx.strokeStyle="black",this.ctx.gdraw.gctx.beginPath(),this.ctx.gdraw.gctx.moveTo(i,l),this.ctx.gdraw.gctx.lineTo((i+a)/2,s),this.ctx.gdraw.gctx.lineTo(a,l),this.ctx.gdraw.gctx.lineTo(i,l),this.ctx.gdraw.gctx.stroke()}open(t){for(;;){let e=t.consumeInt();switch(e){case o.k.Triangle_rect_part:this.open(t);break;case o.k.End:return;default:console.log("Syntax error in FlowTriangle:",e),t.consumeLine()}}}}class A{constructor(t,e=0,n=0,r=0,o=0,i=0,a=c.a.Line,l=1){this.ctx=t,this.ll=new s.a(t,e,n),this.ur=new s.a(t,e+r,n+o),this.draw_type=a,this.line_width=l,this.number=i}open(t){}draw(t,e,n,r,o){let i=(this.ll.x+t.x)*this.ctx.zoom_factor-this.ctx.offset_x,s=(this.ll.y+t.y)*this.ctx.zoom_factor-this.ctx.offset_y,a=(this.ur.x+t.x)*this.ctx.zoom_factor-this.ctx.offset_x,l=(this.ur.y+t.y)*this.ctx.zoom_factor-this.ctx.offset_y,u=this.ctx.gdraw.rect.bind(this.ctx.gdraw),h=this.ctx.gdraw.line.bind(this.ctx.gdraw);u(i,s,a-i,l-s,this.draw_type,!1,0);let _=c.a.LineErase,f=c.a.LightGray,d=c.a.LineErase;o&&o.rbuttonv[this.number]&&(_=c.a.LightGray,f=c.a.LineErase,d=c.a.Line),h(i+1,s+1,a-1,s+1,_,0),h(i+2,s+2,a-2,s+2,_,0),h(i+1,s+1,i+1,l-1,_,0),h(i+2,s+2,i+2,l-2,_,0),h(a-1,l-1,i+1,l-1,f,0),h(a-2,l-2,i+2,l-2,f,0),h(a-1,l-1,a-1,s+1,f,0),h(a-2,l-2,a-2,s+2,f,0),u(i+3,s+3,a-i-5,l-s-5,d,!0,0)}erase(t,e,n){let r=(this.ll.x+t.x)*this.ctx.zoom_factor-this.ctx.offset_x,o=(this.ll.y+t.y)*this.ctx.zoom_factor-this.ctx.offset_y,i=(this.ur.x+t.x)*this.ctx.zoom_factor-this.ctx.offset_x,s=(this.ur.y+t.y)*this.ctx.zoom_factor-this.ctx.offset_y;this.ctx.gdraw.rect(r,o,i-r,s-o,c.a.LineErase,!0,0)}event_handler(t,e,n,r){if(this.ll.z_x()+t.z_x()-this.ctx.offset_x>n.x&&n.x>this.ur.z_x()+t.z_x()-this.ctx.offset_x&&this.ll.z_y()+t.z_y()-this.ctx.offset_y>n.y&&n.y>this.ur.z_y()+t.z_y()-this.ctx.offset_y)return 0;if(e!==o.e.MB1Click)return 1;let i=this.ctx.radiobutton_cb(r,this.number,r.rbuttonv[this.number]);return i===o.c?i:o.d}move(t){this.ur.set(new a.f(t.x+this.ur.x-this.ll.x,t.y+this.ur.y-this.ll.y)),this.ll.set(t),this.ctx.set_dirty()}shift(t){this.ll.set(a.f.add(this.ll,t)),this.ur.set(a.f.add(this.ur,t)),this.ctx.set_dirty()}width(){return this.ur.x-this.ll.x}height(){return this.ur.y-this.ll.y}get_borders(t,e,n){e.set(a.i.union(e,new a.i(t.x+this.ll.x,t.y+this.ll.y,t.x+this.ur.x,t.y+this.ur.y)))}}var b=n(16);class m{constructor(t,e,n=0,r=0,o=c.a.Line,i=2){this.ctx=t,this.p=new s.a(t,n,r),this.draw_type=o,this.pixmap_size=i,e&&(this.pixmap_data=e,this.pixmaps=this.ctx.gdraw.pixmaps_create(e))}open(t){}draw(t,e,n,r,o){let i=Math.floor(this.ctx.zoom_factor/this.ctx.base_zoom_factor*(this.pixmap_size+4)-4);i<0||(i=Math.min(i,f.d-1),this.ctx.gdraw.pixmap(this.p.z_x()+t.z_x()-this.ctx.offset_x,this.p.z_y()+t.z_y()-this.ctx.offset_y,this.pixmap_data[i],this.pixmaps[i],this.draw_type,c.a.LineErase,i))}draw_inverse(t,e,n,r,o){let i=Math.floor(this.ctx.zoom_factor/this.ctx.base_zoom_factor*(this.pixmap_size+4)-4);i<0||(i=Math.min(i,f.d-1),this.ctx.gdraw.pixmap(this.p.z_x()+t.z_x()-this.ctx.offset_x,this.p.z_y()+t.z_y()-this.ctx.offset_y,this.pixmap_data[i],this.pixmaps[i],c.a.LineErase,this.draw_type,i))}erase(t,e,n,r,o){let i=Math.floor(this.ctx.zoom_factor/this.ctx.base_zoom_factor*(this.pixmap_size+4)-4);if(i<0)return;i=Math.min(i,f.d-1);let s=this.pixmap_data[i];this.ctx.gdraw.rect(this.p.z_x()+t.z_x()-this.ctx.offset_x,this.p.z_y()+t.z_y()-this.ctx.offset_y,s.width,s.height,c.a.LineErase,!0)}move(t){this.p.set(t),this.ctx.set_dirty()}shift(t){this.p.set(a.f.add(this.p,t)),this.ctx.set_dirty()}get_borders(t,e,n){}}n.d(e,"a",function(){return v});class v extends Array{constructor(t){super(),this.get_next=t=>this[this.indexOf(t)+1]||null,this.get_previous=t=>this[this.indexOf(t)-1]||null,this.get_first=()=>this[0]||null,this.get_last=()=>this[this.length-1]||null,this.clear=()=>{this.length=0},this.ctx=t}open(t){for(;;){let e=t.consumeInt();switch(e){case o.k.Array:break;case o.k.Rect:let n=new x.a(this.ctx);n.open(t),this.push(n);break;case o.k.Line:let r=new g(this.ctx);r.open(t),this.push(r);break;case o.k.Arc:let a=new l(this.ctx);a.open(t),this.push(a);break;case o.k.Text:let c=new y.a(this.ctx);c.open(t),this.push(c);break;case o.k.Pixmap:{let e=new m(this.ctx,null);e.open(t),this.push(e);break}case o.k.AnnotPixmap:{let e=new b.a(this.ctx,0);e.open(t),this.push(e);break}case o.k.AnnotPixmapButton:break;case o.k.Radiobutton:let f=new A(this.ctx);f.open(t),this.push(f);break;case o.k.NodeClass:let v=new C.a(this.ctx);v.open(t),this.push(v);break;case o.k.ConClass:let k=new _(this.ctx);k.open(t),this.push(k);break;case o.k.ConPoint:let S=new d(this.ctx);S.open(t),this.push(S);break;case o.k.Annot:let T=new i.a(this.ctx);T.open(t),this.push(T);break;case o.k.Arrow:let E=new u(this.ctx);E.open(t),this.push(E);break;case o.k.Triangle:let O=new w(this.ctx);O.open(t),this.push(O);break;case o.k.Node:let R=new p.a(this.ctx);R.open(t),this.push(R);break;case o.k.Con:let L=new h.a(this.ctx);L.open(t),this.push(L);break;case o.k.Point:let I=new s.a(this.ctx);I.open(t),this.push(I);break;case o.k.End:return;default:console.log("Syntax error in FlowArray:",e),t.consumeLine()}}}draw(t,e,n,r,o){for(let i=0;i<this.length;i++)this[i].draw(t,e,n,r,o)}search_by_name(t){let e=t.toUpperCase();return this.find(function(t){if(t instanceof p.a&&t.n_name.toUpperCase()===e)return!0})}brow_insert(t,e,n){let r=this.indexOf(t);if(-1!==r)return;if(!e)return t.level=0,void(n==o.b.IntoLast||n==o.b.After?this.push(t):this.unshift(t));let i=this.indexOf(e);if(-1!==i)switch(n){case o.b.IntoFirst:this.splice(i+1,0,t),t.level=e.level+1;break;case o.b.IntoLast:if(i===this.length-1)this.push(t);else{r=this.length;for(let t=i+1;t<this.length;t++)if(this[t].level<=e.level){r=t;break}this.splice(r,0,t)}t.level=e.level+1;break;case o.b.After:if(i===this.length-1)this.push(t);else{let n;for(n=r;n<this.length&&!(this[n].level<e.level);n++);this.splice(n,0,t)}t.level=e.level;break;case o.b.Before:r>0&&r--,this.splice(r,0,t),t.level=e.level}}remove(t){let e=this.indexOf(t);-1!==e&&this.splice(e,1)}configure(){for(let t=0;t<this.length;t++)this[t].configure(this[t-1])}brow_close(t){let e=this.indexOf(t);if(-1===e)return;let n,r=t.level;for(n=e+1;n<this.length&&!(this[n].level<=r);n++);let o=n;if(o!==e+1)for(n=e+1;n<o;n++)this.ctx.delete_object(this[n]),n--,o--}brow_get_parent(t){let e=this.indexOf(t);if(-1===e)return null;for(let n=e;n>=0;n--)if(this[n].level<t.level)return this[n];return null}brow_get_first_child(t){let e=this.indexOf(t);return-1===e?null:this.length===e-1?null:this[e+1].level>t.level?this[e+1]:null}brow_get_next_sibling(t){let e=!1;for(let n=0;n<this.length;n++)if(this[n]!==t){if(e){if(this[n].level===t.level)return this[n];if(this[n].level<t.level)return null}}else e=!0;return null}get_borders(t,e,n){for(let r=0;r<this.length;r++)this[r].get_borders(t,e,n)}copy(){let t=new v(this.ctx);return this.forEach(e=>t.push(e)),t}deep_copy(){let t=new v(this.ctx);return this.forEach(e=>t.push(Object(r.cloneDeep)(e))),t}}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(5),o=n(0),i=n(2),s=n(1),a=n(7),l=n(18);class c{constructor(t,e="",n=null,r=0,i=0,s=!1,l=!1){this.nc=null,this.n_name="",this.annotv=[],this.annotsize=[],this.annotpixmapv=[],this.level=0,this.annotv_inputmode=[],this.pixmapv=[],this.rbuttonv=[],this.trace_object="",this.trace_attribute="",this.trace_attr_type=0,this.highlight=!1,this.dimmed=!1,this.hot=!1,this.select=!1,this.inverse=!1,this.fill_color=0,this.p=0,this.old_value=0,this.first_scan=!0,this.refcon_cnt=new Array(c.MAX_CONPOINTS),this.sel_conpoint1=-1,this.sel_conpoint2=-1,this.rel_annot_x=new Array(10),this.rel_annotpixmap_x=new Array(10),this.ll=new a.a(t,r,i),this.ur=new a.a(t,r,i),this.ctx=t,this.pos=new a.a(t,r,i),this.obst=new o.i(r,i,r,i),this.nc=n,this.n_name=e,this.relative_annot_pos=l;for(let t=0;t<10;t++)this.rel_annot_x[t]=0,this.rel_annotpixmap_x[t]=0;n&&(t.grid_on&&this.pos.set(t.find_grid(new o.f(r,i))),this.get_borders(),s||t.set_dirty())}draw(t){if(this.nc.group!==i.g.Document){let t=this.ll.z_x()-this.ctx.offset_x,e=this.ll.z_y()-this.ctx.offset_y,n=(this.ctx.type()===s.a.Brow?this.ctx.frame_x_right:this.ur.x)*this.ctx.zoom_factor-this.ll.z_x(),r=this.ur.z_y()-this.ll.z_y();this.ctx.gdraw.gctx.fillStyle=this.select?"lightblue":"white",this.ctx.gdraw.gctx.fillRect(t,e,n,r)}this.nc.draw(this.pos,this.highlight,this.dimmed,this.hot,this)}open(t){for(;;){let e=t.consumeInt();switch(e){case s.k.Node:break;case s.k.Node_nc:let n=t.consumeLine();this.nc=this.ctx.a_nc.find(t=>t.nc_name===n),this.nc||console.log("FlowNode: NodeClass not found: "+n);break;case s.k.Node_n_name:this.n_name=t.consumeLine();break;case s.k.Node_refcon_cnt:for(let e=0;e<c.MAX_CONPOINTS;e++)this.refcon_cnt[e]=t.consumeInt();break;case s.k.Node_x_right:this.ur.x=t.consumeFloat();break;case s.k.Node_x_left:this.ll.x=t.consumeFloat();break;case s.k.Node_y_high:this.ur.y=t.consumeFloat();break;case s.k.Node_y_low:this.ll.y=t.consumeFloat();break;case s.k.Node_annotsize:for(let e=0;e<10;e++)this.annotsize[e]=t.consumeInt();break;case s.k.Node_annotv:for(let e=0;e<10;e++)this.annotsize[e]&&(this.annotv[e]=t.consumeQuotedString(),t.consumeLine());break;case s.k.Node_pos:this.pos.open(t);break;case s.k.Node_trace_object:this.trace_object=t.consumeLine();break;case s.k.Node_trace_attribute:this.trace_attribute=t.consumeLine();break;case s.k.Node_trace_attr_type:this.trace_attr_type=t.consumeInt();break;case s.k.Node_obst_x_right:case s.k.Node_obst_x_left:case s.k.Node_obst_y_high:case s.k.Node_obst_y_low:case s.k.Node_trace_inverted:t.consumeLine();break;case s.k.End:return;default:console.log("Syntax error in FlowNode:",e),t.consumeLine()}}}connect(){if(""===this.trace_object||""===this.trace_attribute)return;if(this.trace_attr_type===i.h.User)return;let t=this.trace_attribute.indexOf("#");-1!==t&&(this.trace_attribute=this.trace_attribute.substring(0,t));let e=this.trace_object+"."+this.trace_attribute;this.p=r.d.refObjectInfo(e,this.trace_attr_type,1)}scan(){if(0===this.p)return;let t=r.d.getObjectRefInfo(this.p);if(this.first_scan)this.first_scan=!1;else if(t===this.old_value)return;this.highlight=!!t,this.old_value=t,this.ctx.set_dirty()}event_handler(t,e){let n=new o.f(e.x/this.ctx.zoom_factor+this.ctx.ll.x,e.y/this.ctx.zoom_factor+this.ctx.ll.y);return o.i.hit(new o.i(this.ll.x,this.ll.y,this.ur.x,this.ur.y),n)?(this.select?(this.select=!1,this.ctx.set_dirty()):(this.ctx.set_select(!1),this.set_select(!0)),1):0}get_node_borders(){let t=new o.i(this.ll.x,this.ll.y,this.ur.x,this.ur.y);this.nc.a.get_borders(this.pos,t,this),this.ll.set(t.ll),this.ur.set(t.ur)}get_node_obstacle_borders(){this.nc.get_obstacle_borders(this.pos,this.obst,this)}configure(t){let e=t?this.ctx.indentation*this.level:0,n=t?t.ur.y:0;this.pos.set(new o.f(e,n)),this.ll.set(new o.f(1e37,1e37)),this.ur.set(new o.f(-1e37,-1e37)),this.get_node_borders();let r=0;for(let t=0;t<this.annotv_inputmode.length;t++)r+=this.annotv_inputmode[t];r&&(this.ur.y+=this.ur.y-this.ll.y)}get_borders(t,e,n){e?e.set(o.i.union(e,new o.i(this.ll.x,this.ll.y,this.ur.x,this.ur.y))):(this.ll.set(new o.f(1e37,1e37)),this.ur.set(new o.f(-1e37,-1e37)),this.get_node_borders(),this.nc.group===i.g.Document||this.nc.no_con_obstacle?(this.obst.ll.x=this.obst.ll.y=1e37,this.obst.ur.x=this.obst.ur.y=-1e37,this.get_node_obstacle_borders()):(this.obst.ll.set(this.ll),this.obst.ur.set(this.ur)))}set_select(t){t!==this.select&&(this.select=t,this.ctx.select_object=this.select?this:null,this.ctx.set_dirty())}set_inverse(t){this.inverse=t,this.ctx.set_dirty()}set_annotation(t,e,n=!1){t>=10||(this.annotv[t]=e,this.relative_annot_pos&&(this.relative_annot_x=0,this.nc.configure_annotations(this)),n||this.ctx.set_dirty())}set_annotation_pixmap(t,e){t>=10||(this.pixmapv[t]=e,this.relative_annot_pos&&(this.relative_annot_x=0,this.nc.configure_annotations(this)))}in_icon(t,e){return t>=this.ll.x*this.ctx.zoom_factor&&t<=(this.ll.x+1.75)*this.ctx.zoom_factor}move(t,e){let n=new o.f(this.pos.x+t.x/this.ctx.zoom_factor,this.pos.y+t.y/this.ctx.zoom_factor);if(e){let t=this.ctx.find_grid(n);if(Math.abs(t.x-this.pos.x)<Number.EPSILON&&Math.abs(t.y-this.pos.y)<Number.EPSILON)return;this.pos.set(t),this.get_borders()}else this.pos.set(n),this.ll.x+=t.x/this.ctx.zoom_factor,this.ll.y+=t.y/this.ctx.zoom_factor,this.ur.x+=t.x/this.ctx.zoom_factor,this.ur.y+=t.y/this.ctx.zoom_factor,this.obst.ll.x+=t.x/this.ctx.zoom_factor,this.obst.ll.y+=t.y/this.ctx.zoom_factor,this.obst.ur.x+=t.x/this.ctx.zoom_factor,this.obst.ur.y+=t.y/this.ctx.zoom_factor;this.ctx.set_dirty()}move_noerase(t,e){let n=new o.f(this.pos.x+t.x/this.ctx.zoom_factor,this.pos.y+t.y/this.ctx.zoom_factor);if(e){let t=this.ctx.find_grid(n);if(Math.abs(t.x-this.pos.x)<Number.EPSILON&&Math.abs(t.y-this.pos.y)<Number.EPSILON)return;this.pos.set(t)}else this.pos.set(n);this.get_borders(),0==t.x&&0==t.y||this.ctx.set_dirty()}get_conpoint(t){let e=this.nc.get_conpoint(t);return e&&(e.p.x+=this.pos.x,e.p.y+=this.pos.y),e}conpoint_refcon_reconfig(t){this.refcon_cnt[t]=0;for(let e=0;e<this.ctx.a.length;e++)this.ctx.a[e]instanceof l.a&&this.ctx.a[e].conpoint_refcon_redraw(this,t)}link_insert(t){return this.link=t,this}in_area(t,e,n,r){return this.obst.ll.x-this.ctx.draw_delta<n&&this.obst.ur.x+this.ctx.draw_delta>t&&this.obst.ll.y-this.ctx.draw_delta<r&&this.obst.ur.y+this.ctx.draw_delta>e}in_area_exact(t,e,n,r){return this.obst.ll.x<n&&this.obst.ur.x>t&&this.obst.ll.y<r&&this.obst.ur.y>e}in_vert_line(t,e,n){return this.obst.ll.x-this.ctx.draw_delta<t&&this.obst.ur.x+this.ctx.draw_delta>t&&this.obst.ll.y-this.ctx.draw_delta<n&&this.obst.ur.y+this.ctx.draw_delta>e}in_horiz_line(t,e,n){return this.obst.ll.x-this.ctx.draw_delta<n&&this.obst.ur.x+this.ctx.draw_delta>e&&this.obst.ll.y-this.ctx.draw_delta<t&&this.obst.ur.y+this.ctx.draw_delta>t}}c.MAX_CONPOINTS=32},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(3),o=n(0),i=n(2),s=n(1),a=n(7);class l{constructor(t,e=0,n=0,r=0,o=0,s=0,l=1,c=!1,u=i.f.One,h=!1){this.draw_type=0,this.line_width=0,this.fix_line_width=!1,this.display_level=0,this.fill=!1,this.ctx=t,this.ll=new a.a(t,e,n),this.ur=new a.a(t,e+r,n+o),this.draw_type=s,this.line_width=l,this.fix_line_width=c,this.display_level=u,this.fill=h}open(t){for(;;){let e=t.consumeInt();switch(e){case s.k.Rect:break;case s.k.Rect_draw_type:this.draw_type=t.consumeInt();break;case s.k.Rect_line_width:this.line_width=t.consumeInt();break;case s.k.Rect_display_level:this.display_level=t.consumeInt();break;case s.k.Rect_fill:this.fill=t.consumeBool();break;case s.k.Rect_ll:this.ll.open(t);break;case s.k.Rect_ur:this.ur.open(t);break;case s.k.End:return;default:console.log("Syntax error in FlowRect:",e),t.consumeLine()}}}draw(t,e,n,s,a){if(!(this.display_level&this.ctx.display_level))return;let l=(this.ll.x+t.x)*this.ctx.zoom_factor,c=(this.ll.y+t.y)*this.ctx.zoom_factor,u=(this.ur.x-this.ll.x)*this.ctx.zoom_factor,h=(this.ur.y-this.ll.y)*this.ctx.zoom_factor,_=this.ctx.zoom_factor/this.ctx.base_zoom_factor*this.line_width;_=Object(o.n)(_+Number(s),0,i.d-1);let f=this.draw_type;this.fill&&a&&a.fill_color!==r.a.Inherit&&(f=a.fill_color),this.fill?this.ctx.gdraw.rect(l,c,u,h,f,!0,0):this.ctx.gdraw.rect(l,c,u,h,f,!1,_,e,n)}get_borders(t,e,n){this.display_level===i.f.One&&e.set(o.i.union(e,new o.i(t.x+this.ll.x,t.y+this.ll.y,t.x+this.ur.x,t.y+this.ur.y)))}move(t){this.ur.set(new o.f(t.x+this.ur.x-this.ll.x,t.y+this.ur.y-this.ll.y)),this.ll.set(t),this.ctx.set_dirty()}shift(t){this.ll.set(o.f.add(this.ll,t)),this.ur.set(o.f.add(this.ur,t)),this.ctx.set_dirty()}}},function(t,e,n){(function(t,r){var o;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i,s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",_=1,f=2,d=4,g=1,p=2,C=1,x=2,y=4,w=8,A=16,b=32,m=64,v=128,k=256,S=512,T=30,E="...",O=800,R=16,L=1,I=2,B=1/0,M=9007199254740991,N=1.7976931348623157e308,z=NaN,D=4294967295,U=D-1,G=D>>>1,F=[["ary",v],["bind",C],["bindKey",x],["curry",w],["curryRight",A],["flip",S],["partial",b],["partialRight",m],["rearg",k]],j="[object Arguments]",P="[object Array]",Y="[object AsyncFunction]",V="[object Boolean]",H="[object Date]",Q="[object DOMException]",J="[object Error]",W="[object Function]",q="[object GeneratorFunction]",K="[object Map]",X="[object Number]",Z="[object Null]",$="[object Object]",tt="[object Proxy]",et="[object RegExp]",nt="[object Set]",rt="[object String]",ot="[object Symbol]",it="[object Undefined]",st="[object WeakMap]",at="[object WeakSet]",lt="[object ArrayBuffer]",ct="[object DataView]",ut="[object Float32Array]",ht="[object Float64Array]",_t="[object Int8Array]",ft="[object Int16Array]",dt="[object Int32Array]",gt="[object Uint8Array]",pt="[object Uint8ClampedArray]",Ct="[object Uint16Array]",xt="[object Uint32Array]",yt=/\b__p \+= '';/g,wt=/\b(__p \+=) '' \+/g,At=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,mt=/[&<>"']/g,vt=RegExp(bt.source),kt=RegExp(mt.source),St=/<%-([\s\S]+?)%>/g,Tt=/<%([\s\S]+?)%>/g,Et=/<%=([\s\S]+?)%>/g,Ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rt=/^\w*$/,Lt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Bt=RegExp(It.source),Mt=/^\s+|\s+$/g,Nt=/^\s+/,zt=/\s+$/,Dt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ut=/\{\n\/\* \[wrapped with (.+)\] \*/,Gt=/,? & /,Ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,jt=/\\(\\)?/g,Pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Yt=/\w*$/,Vt=/^[-+]0x[0-9a-f]+$/i,Ht=/^0b[01]+$/i,Qt=/^\[object .+?Constructor\]$/,Jt=/^0o[0-7]+$/i,Wt=/^(?:0|[1-9]\d*)$/,qt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=/($^)/,Xt=/['\n\r\u2028\u2029\\]/g,Zt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",$t="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="[\\ud800-\\udfff]",ee="["+$t+"]",ne="["+Zt+"]",re="\\d+",oe="[\\u2700-\\u27bf]",ie="[a-z\\xdf-\\xf6\\xf8-\\xff]",se="[^\\ud800-\\udfff"+$t+re+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ae="\\ud83c[\\udffb-\\udfff]",le="[^\\ud800-\\udfff]",ce="(?:\\ud83c[\\udde6-\\uddff]){2}",ue="[\\ud800-\\udbff][\\udc00-\\udfff]",he="[A-Z\\xc0-\\xd6\\xd8-\\xde]",_e="(?:"+ie+"|"+se+")",fe="(?:"+he+"|"+se+")",de="(?:"+ne+"|"+ae+")"+"?",ge="[\\ufe0e\\ufe0f]?"+de+("(?:\\u200d(?:"+[le,ce,ue].join("|")+")[\\ufe0e\\ufe0f]?"+de+")*"),pe="(?:"+[oe,ce,ue].join("|")+")"+ge,Ce="(?:"+[le+ne+"?",ne,ce,ue,te].join("|")+")",xe=RegExp("['’]","g"),ye=RegExp(ne,"g"),we=RegExp(ae+"(?="+ae+")|"+Ce+ge,"g"),Ae=RegExp([he+"?"+ie+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ee,he,"$"].join("|")+")",fe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ee,he+_e,"$"].join("|")+")",he+"?"+_e+"+(?:['’](?:d|ll|m|re|s|t|ve))?",he+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",re,pe].join("|"),"g"),be=RegExp("[\\u200d\\ud800-\\udfff"+Zt+"\\ufe0e\\ufe0f]"),me=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ve=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ke=-1,Se={};Se[ut]=Se[ht]=Se[_t]=Se[ft]=Se[dt]=Se[gt]=Se[pt]=Se[Ct]=Se[xt]=!0,Se[j]=Se[P]=Se[lt]=Se[V]=Se[ct]=Se[H]=Se[J]=Se[W]=Se[K]=Se[X]=Se[$]=Se[et]=Se[nt]=Se[rt]=Se[st]=!1;var Te={};Te[j]=Te[P]=Te[lt]=Te[ct]=Te[V]=Te[H]=Te[ut]=Te[ht]=Te[_t]=Te[ft]=Te[dt]=Te[K]=Te[X]=Te[$]=Te[et]=Te[nt]=Te[rt]=Te[ot]=Te[gt]=Te[pt]=Te[Ct]=Te[xt]=!0,Te[J]=Te[W]=Te[st]=!1;var Ee={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Oe=parseFloat,Re=parseInt,Le="object"==typeof t&&t&&t.Object===Object&&t,Ie="object"==typeof self&&self&&self.Object===Object&&self,Be=Le||Ie||Function("return this")(),Me=e&&!e.nodeType&&e,Ne=Me&&"object"==typeof r&&r&&!r.nodeType&&r,ze=Ne&&Ne.exports===Me,De=ze&&Le.process,Ue=function(){try{var t=Ne&&Ne.require&&Ne.require("util").types;return t||De&&De.binding&&De.binding("util")}catch(t){}}(),Ge=Ue&&Ue.isArrayBuffer,Fe=Ue&&Ue.isDate,je=Ue&&Ue.isMap,Pe=Ue&&Ue.isRegExp,Ye=Ue&&Ue.isSet,Ve=Ue&&Ue.isTypedArray;function He(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Qe(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var s=t[o];e(r,s,n(s),t)}return r}function Je(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function We(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function qe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ke(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i}function Xe(t,e){return!!(null==t?0:t.length)&&ln(t,e,0)>-1}function Ze(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function $e(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function tn(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function en(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function nn(t,e,n,r){var o=null==t?0:t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function rn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var on=_n("length");function sn(t,e,n){var r;return n(t,function(t,n,o){if(e(t,n,o))return r=n,!1}),r}function an(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function ln(t,e,n){return e==e?function(t,e,n){var r=n-1,o=t.length;for(;++r<o;)if(t[r]===e)return r;return-1}(t,e,n):an(t,un,n)}function cn(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}function un(t){return t!=t}function hn(t,e){var n=null==t?0:t.length;return n?gn(t,e)/n:z}function _n(t){return function(e){return null==e?i:e[t]}}function fn(t){return function(e){return null==t?i:t[e]}}function dn(t,e,n,r,o){return o(t,function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)}),n}function gn(t,e){for(var n,r=-1,o=t.length;++r<o;){var s=e(t[r]);s!==i&&(n=n===i?s:n+s)}return n}function pn(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Cn(t){return function(e){return t(e)}}function xn(t,e){return $e(e,function(e){return t[e]})}function yn(t,e){return t.has(e)}function wn(t,e){for(var n=-1,r=t.length;++n<r&&ln(e,t[n],0)>-1;);return n}function An(t,e){for(var n=t.length;n--&&ln(e,t[n],0)>-1;);return n}var bn=fn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),mn=fn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function vn(t){return"\\"+Ee[t]}function kn(t){return be.test(t)}function Sn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function Tn(t,e){return function(n){return t(e(n))}}function En(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var s=t[n];s!==e&&s!==h||(t[n]=h,i[o++]=n)}return i}function On(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Rn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Ln(t){return kn(t)?function(t){var e=we.lastIndex=0;for(;we.test(t);)++e;return e}(t):on(t)}function In(t){return kn(t)?function(t){return t.match(we)||[]}(t):function(t){return t.split("")}(t)}var Bn=fn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Mn=function t(e){var n,r=(e=null==e?Be:Mn.defaults(Be.Object(),e,Mn.pick(Be,ve))).Array,o=e.Date,Zt=e.Error,$t=e.Function,te=e.Math,ee=e.Object,ne=e.RegExp,re=e.String,oe=e.TypeError,ie=r.prototype,se=$t.prototype,ae=ee.prototype,le=e["__core-js_shared__"],ce=se.toString,ue=ae.hasOwnProperty,he=0,_e=(n=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",fe=ae.toString,de=ce.call(ee),ge=Be._,pe=ne("^"+ce.call(ue).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ce=ze?e.Buffer:i,we=e.Symbol,be=e.Uint8Array,Ee=Ce?Ce.allocUnsafe:i,Le=Tn(ee.getPrototypeOf,ee),Ie=ee.create,Me=ae.propertyIsEnumerable,Ne=ie.splice,De=we?we.isConcatSpreadable:i,Ue=we?we.iterator:i,on=we?we.toStringTag:i,fn=function(){try{var t=Gi(ee,"defineProperty");return t({},"",{}),t}catch(t){}}(),Nn=e.clearTimeout!==Be.clearTimeout&&e.clearTimeout,zn=o&&o.now!==Be.Date.now&&o.now,Dn=e.setTimeout!==Be.setTimeout&&e.setTimeout,Un=te.ceil,Gn=te.floor,Fn=ee.getOwnPropertySymbols,jn=Ce?Ce.isBuffer:i,Pn=e.isFinite,Yn=ie.join,Vn=Tn(ee.keys,ee),Hn=te.max,Qn=te.min,Jn=o.now,Wn=e.parseInt,qn=te.random,Kn=ie.reverse,Xn=Gi(e,"DataView"),Zn=Gi(e,"Map"),$n=Gi(e,"Promise"),tr=Gi(e,"Set"),er=Gi(e,"WeakMap"),nr=Gi(ee,"create"),rr=er&&new er,or={},ir=hs(Xn),sr=hs(Zn),ar=hs($n),lr=hs(tr),cr=hs(er),ur=we?we.prototype:i,hr=ur?ur.valueOf:i,_r=ur?ur.toString:i;function fr(t){if(Ea(t)&&!Ca(t)&&!(t instanceof Cr)){if(t instanceof pr)return t;if(ue.call(t,"__wrapped__"))return _s(t)}return new pr(t)}var dr=function(){function t(){}return function(e){if(!Ta(e))return{};if(Ie)return Ie(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function gr(){}function pr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Cr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=D,this.__views__=[]}function xr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function yr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ar(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new wr;++e<n;)this.add(t[e])}function br(t){var e=this.__data__=new yr(t);this.size=e.size}function mr(t,e){var n=Ca(t),r=!n&&pa(t),o=!n&&!r&&Aa(t),i=!n&&!r&&!o&&za(t),s=n||r||o||i,a=s?pn(t.length,re):[],l=a.length;for(var c in t)!e&&!ue.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Qi(c,l))||a.push(c);return a}function vr(t){var e=t.length;return e?t[bo(0,e-1)]:i}function kr(t,e){return ls(ri(t),Mr(e,0,t.length))}function Sr(t){return ls(ri(t))}function Tr(t,e,n){(n===i||fa(t[e],n))&&(n!==i||e in t)||Ir(t,e,n)}function Er(t,e,n){var r=t[e];ue.call(t,e)&&fa(r,n)&&(n!==i||e in t)||Ir(t,e,n)}function Or(t,e){for(var n=t.length;n--;)if(fa(t[n][0],e))return n;return-1}function Rr(t,e,n,r){return Gr(t,function(t,o,i){e(r,t,n(t),i)}),r}function Lr(t,e){return t&&oi(e,ol(e),t)}function Ir(t,e,n){"__proto__"==e&&fn?fn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Br(t,e){for(var n=-1,o=e.length,s=r(o),a=null==t;++n<o;)s[n]=a?i:$a(t,e[n]);return s}function Mr(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function Nr(t,e,n,r,o,s){var a,l=e&_,c=e&f,u=e&d;if(n&&(a=o?n(t,r,o,s):n(t)),a!==i)return a;if(!Ta(t))return t;var h=Ca(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ue.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return ri(t,a)}else{var g=Pi(t),p=g==W||g==q;if(Aa(t))return Xo(t,l);if(g==$||g==j||p&&!o){if(a=c||p?{}:Vi(t),!l)return c?function(t,e){return oi(t,ji(t),e)}(t,function(t,e){return t&&oi(e,il(e),t)}(a,t)):function(t,e){return oi(t,Fi(t),e)}(t,Lr(a,t))}else{if(!Te[g])return o?t:{};a=function(t,e,n){var r,o=t.constructor;switch(e){case lt:return Zo(t);case V:case H:return new o(+t);case ct:return function(t,e){var n=e?Zo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ut:case ht:case _t:case ft:case dt:case gt:case pt:case Ct:case xt:return $o(t,n);case K:return new o;case X:case rt:return new o(t);case et:return function(t){var e=new t.constructor(t.source,Yt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case nt:return new o;case ot:return r=t,hr?ee(hr.call(r)):{}}}(t,g,l)}}s||(s=new br);var C=s.get(t);if(C)return C;if(s.set(t,a),Ba(t))return t.forEach(function(r){a.add(Nr(r,e,n,r,t,s))}),a;if(Oa(t))return t.forEach(function(r,o){a.set(o,Nr(r,e,n,o,t,s))}),a;var x=h?i:(u?c?Ii:Li:c?il:ol)(t);return Je(x||t,function(r,o){x&&(r=t[o=r]),Er(a,o,Nr(r,e,n,o,t,s))}),a}function zr(t,e,n){var r=n.length;if(null==t)return!r;for(t=ee(t);r--;){var o=n[r],s=e[o],a=t[o];if(a===i&&!(o in t)||!s(a))return!1}return!0}function Dr(t,e,n){if("function"!=typeof t)throw new oe(l);return os(function(){t.apply(i,n)},e)}function Ur(t,e,n,r){var o=-1,i=Xe,a=!0,l=t.length,c=[],u=e.length;if(!l)return c;n&&(e=$e(e,Cn(n))),r?(i=Ze,a=!1):e.length>=s&&(i=yn,a=!1,e=new Ar(e));t:for(;++o<l;){var h=t[o],_=null==n?h:n(h);if(h=r||0!==h?h:0,a&&_==_){for(var f=u;f--;)if(e[f]===_)continue t;c.push(h)}else i(e,_,r)||c.push(h)}return c}fr.templateSettings={escape:St,evaluate:Tt,interpolate:Et,variable:"",imports:{_:fr}},fr.prototype=gr.prototype,fr.prototype.constructor=fr,pr.prototype=dr(gr.prototype),pr.prototype.constructor=pr,Cr.prototype=dr(gr.prototype),Cr.prototype.constructor=Cr,xr.prototype.clear=function(){this.__data__=nr?nr(null):{},this.size=0},xr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},xr.prototype.get=function(t){var e=this.__data__;if(nr){var n=e[t];return n===c?i:n}return ue.call(e,t)?e[t]:i},xr.prototype.has=function(t){var e=this.__data__;return nr?e[t]!==i:ue.call(e,t)},xr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=nr&&e===i?c:e,this},yr.prototype.clear=function(){this.__data__=[],this.size=0},yr.prototype.delete=function(t){var e=this.__data__,n=Or(e,t);return!(n<0||(n==e.length-1?e.pop():Ne.call(e,n,1),--this.size,0))},yr.prototype.get=function(t){var e=this.__data__,n=Or(e,t);return n<0?i:e[n][1]},yr.prototype.has=function(t){return Or(this.__data__,t)>-1},yr.prototype.set=function(t,e){var n=this.__data__,r=Or(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},wr.prototype.clear=function(){this.size=0,this.__data__={hash:new xr,map:new(Zn||yr),string:new xr}},wr.prototype.delete=function(t){var e=Di(this,t).delete(t);return this.size-=e?1:0,e},wr.prototype.get=function(t){return Di(this,t).get(t)},wr.prototype.has=function(t){return Di(this,t).has(t)},wr.prototype.set=function(t,e){var n=Di(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Ar.prototype.add=Ar.prototype.push=function(t){return this.__data__.set(t,c),this},Ar.prototype.has=function(t){return this.__data__.has(t)},br.prototype.clear=function(){this.__data__=new yr,this.size=0},br.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},br.prototype.get=function(t){return this.__data__.get(t)},br.prototype.has=function(t){return this.__data__.has(t)},br.prototype.set=function(t,e){var n=this.__data__;if(n instanceof yr){var r=n.__data__;if(!Zn||r.length<s-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new wr(r)}return n.set(t,e),this.size=n.size,this};var Gr=ai(Jr),Fr=ai(Wr,!0);function jr(t,e){var n=!0;return Gr(t,function(t,r,o){return n=!!e(t,r,o)}),n}function Pr(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],a=e(s);if(null!=a&&(l===i?a==a&&!Na(a):n(a,l)))var l=a,c=s}return c}function Yr(t,e){var n=[];return Gr(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n}function Vr(t,e,n,r,o){var i=-1,s=t.length;for(n||(n=Hi),o||(o=[]);++i<s;){var a=t[i];e>0&&n(a)?e>1?Vr(a,e-1,n,r,o):tn(o,a):r||(o[o.length]=a)}return o}var Hr=li(),Qr=li(!0);function Jr(t,e){return t&&Hr(t,e,ol)}function Wr(t,e){return t&&Qr(t,e,ol)}function qr(t,e){return Ke(e,function(e){return va(t[e])})}function Kr(t,e){for(var n=0,r=(e=Jo(e,t)).length;null!=t&&n<r;)t=t[us(e[n++])];return n&&n==r?t:i}function Xr(t,e,n){var r=e(t);return Ca(t)?r:tn(r,n(t))}function Zr(t){return null==t?t===i?it:Z:on&&on in ee(t)?function(t){var e=ue.call(t,on),n=t[on];try{t[on]=i;var r=!0}catch(t){}var o=fe.call(t);return r&&(e?t[on]=n:delete t[on]),o}(t):function(t){return fe.call(t)}(t)}function $r(t,e){return t>e}function to(t,e){return null!=t&&ue.call(t,e)}function eo(t,e){return null!=t&&e in ee(t)}function no(t,e,n){for(var o=n?Ze:Xe,s=t[0].length,a=t.length,l=a,c=r(a),u=1/0,h=[];l--;){var _=t[l];l&&e&&(_=$e(_,Cn(e))),u=Qn(_.length,u),c[l]=!n&&(e||s>=120&&_.length>=120)?new Ar(l&&_):i}_=t[0];var f=-1,d=c[0];t:for(;++f<s&&h.length<u;){var g=_[f],p=e?e(g):g;if(g=n||0!==g?g:0,!(d?yn(d,p):o(h,p,n))){for(l=a;--l;){var C=c[l];if(!(C?yn(C,p):o(t[l],p,n)))continue t}d&&d.push(p),h.push(g)}}return h}function ro(t,e,n){var r=null==(t=es(t,e=Jo(e,t)))?t:t[us(ms(e))];return null==r?i:He(r,t,n)}function oo(t){return Ea(t)&&Zr(t)==j}function io(t,e,n,r,o){return t===e||(null==t||null==e||!Ea(t)&&!Ea(e)?t!=t&&e!=e:function(t,e,n,r,o,s){var a=Ca(t),l=Ca(e),c=a?P:Pi(t),u=l?P:Pi(e),h=(c=c==j?$:c)==$,_=(u=u==j?$:u)==$,f=c==u;if(f&&Aa(t)){if(!Aa(e))return!1;a=!0,h=!1}if(f&&!h)return s||(s=new br),a||za(t)?Oi(t,e,n,r,o,s):function(t,e,n,r,o,i,s){switch(n){case ct:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case lt:return!(t.byteLength!=e.byteLength||!i(new be(t),new be(e)));case V:case H:case X:return fa(+t,+e);case J:return t.name==e.name&&t.message==e.message;case et:case rt:return t==e+"";case K:var a=Sn;case nt:var l=r&g;if(a||(a=On),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=p,s.set(t,e);var u=Oi(a(t),a(e),r,o,i,s);return s.delete(t),u;case ot:if(hr)return hr.call(t)==hr.call(e)}return!1}(t,e,c,n,r,o,s);if(!(n&g)){var d=h&&ue.call(t,"__wrapped__"),C=_&&ue.call(e,"__wrapped__");if(d||C){var x=d?t.value():t,y=C?e.value():e;return s||(s=new br),o(x,y,n,r,s)}}return!!f&&(s||(s=new br),function(t,e,n,r,o,s){var a=n&g,l=Li(t),c=l.length,u=Li(e).length;if(c!=u&&!a)return!1;for(var h=c;h--;){var _=l[h];if(!(a?_ in e:ue.call(e,_)))return!1}var f=s.get(t);if(f&&s.get(e))return f==e;var d=!0;s.set(t,e),s.set(e,t);for(var p=a;++h<c;){_=l[h];var C=t[_],x=e[_];if(r)var y=a?r(x,C,_,e,t,s):r(C,x,_,t,e,s);if(!(y===i?C===x||o(C,x,n,r,s):y)){d=!1;break}p||(p="constructor"==_)}if(d&&!p){var w=t.constructor,A=e.constructor;w!=A&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof A&&A instanceof A)&&(d=!1)}return s.delete(t),s.delete(e),d}(t,e,n,r,o,s))}(t,e,n,r,io,o))}function so(t,e,n,r){var o=n.length,s=o,a=!r;if(null==t)return!s;for(t=ee(t);o--;){var l=n[o];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<s;){var c=(l=n[o])[0],u=t[c],h=l[1];if(a&&l[2]){if(u===i&&!(c in t))return!1}else{var _=new br;if(r)var f=r(u,h,c,t,e,_);if(!(f===i?io(h,u,g|p,r,_):f))return!1}}return!0}function ao(t){return!(!Ta(t)||(e=t,_e&&_e in e))&&(va(t)?pe:Qt).test(hs(t));var e}function lo(t){return"function"==typeof t?t:null==t?Rl:"object"==typeof t?Ca(t)?go(t[0],t[1]):fo(t):Gl(t)}function co(t){if(!Xi(t))return Vn(t);var e=[];for(var n in ee(t))ue.call(t,n)&&"constructor"!=n&&e.push(n);return e}function uo(t){if(!Ta(t))return function(t){var e=[];if(null!=t)for(var n in ee(t))e.push(n);return e}(t);var e=Xi(t),n=[];for(var r in t)("constructor"!=r||!e&&ue.call(t,r))&&n.push(r);return n}function ho(t,e){return t<e}function _o(t,e){var n=-1,o=ya(t)?r(t.length):[];return Gr(t,function(t,r,i){o[++n]=e(t,r,i)}),o}function fo(t){var e=Ui(t);return 1==e.length&&e[0][2]?$i(e[0][0],e[0][1]):function(n){return n===t||so(n,t,e)}}function go(t,e){return Wi(t)&&Zi(e)?$i(us(t),e):function(n){var r=$a(n,t);return r===i&&r===e?tl(n,t):io(e,r,g|p)}}function po(t,e,n,r,o){t!==e&&Hr(e,function(s,a){if(Ta(s))o||(o=new br),function(t,e,n,r,o,s,a){var l=ns(t,n),c=ns(e,n),u=a.get(c);if(u)Tr(t,n,u);else{var h=s?s(l,c,n+"",t,e,a):i,_=h===i;if(_){var f=Ca(c),d=!f&&Aa(c),g=!f&&!d&&za(c);h=c,f||d||g?Ca(l)?h=l:wa(l)?h=ri(l):d?(_=!1,h=Xo(c,!0)):g?(_=!1,h=$o(c,!0)):h=[]:La(c)||pa(c)?(h=l,pa(l)?h=Va(l):Ta(l)&&!va(l)||(h=Vi(c))):_=!1}_&&(a.set(c,h),o(h,c,r,s,a),a.delete(c)),Tr(t,n,h)}}(t,e,a,n,po,r,o);else{var l=r?r(ns(t,a),s,a+"",t,e,o):i;l===i&&(l=s),Tr(t,a,l)}},il)}function Co(t,e){var n=t.length;if(n)return Qi(e+=e<0?n:0,n)?t[e]:i}function xo(t,e,n){var r=-1;return e=$e(e.length?e:[Rl],Cn(zi())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(_o(t,function(t,n,o){return{criteria:$e(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,o=t.criteria,i=e.criteria,s=o.length,a=n.length;++r<s;){var l=ti(o[r],i[r]);if(l){if(r>=a)return l;var c=n[r];return l*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)})}function yo(t,e,n){for(var r=-1,o=e.length,i={};++r<o;){var s=e[r],a=Kr(t,s);n(a,s)&&To(i,Jo(s,t),a)}return i}function wo(t,e,n,r){var o=r?cn:ln,i=-1,s=e.length,a=t;for(t===e&&(e=ri(e)),n&&(a=$e(t,Cn(n)));++i<s;)for(var l=0,c=e[i],u=n?n(c):c;(l=o(a,u,l,r))>-1;)a!==t&&Ne.call(a,l,1),Ne.call(t,l,1);return t}function Ao(t,e){for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];if(n==r||o!==i){var i=o;Qi(o)?Ne.call(t,o,1):Go(t,o)}}return t}function bo(t,e){return t+Gn(qn()*(e-t+1))}function mo(t,e){var n="";if(!t||e<1||e>M)return n;do{e%2&&(n+=t),(e=Gn(e/2))&&(t+=t)}while(e);return n}function vo(t,e){return is(ts(t,e,Rl),t+"")}function ko(t){return vr(fl(t))}function So(t,e){var n=fl(t);return ls(n,Mr(e,0,n.length))}function To(t,e,n,r){if(!Ta(t))return t;for(var o=-1,s=(e=Jo(e,t)).length,a=s-1,l=t;null!=l&&++o<s;){var c=us(e[o]),u=n;if(o!=a){var h=l[c];(u=r?r(h,c,l):i)===i&&(u=Ta(h)?h:Qi(e[o+1])?[]:{})}Er(l,c,u),l=l[c]}return t}var Eo=rr?function(t,e){return rr.set(t,e),t}:Rl,Oo=fn?function(t,e){return fn(t,"toString",{configurable:!0,enumerable:!1,value:Tl(e),writable:!0})}:Rl;function Ro(t){return ls(fl(t))}function Lo(t,e,n){var o=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=r(i);++o<i;)s[o]=t[o+e];return s}function Io(t,e){var n;return Gr(t,function(t,r,o){return!(n=e(t,r,o))}),!!n}function Bo(t,e,n){var r=0,o=null==t?r:t.length;if("number"==typeof e&&e==e&&o<=G){for(;r<o;){var i=r+o>>>1,s=t[i];null!==s&&!Na(s)&&(n?s<=e:s<e)?r=i+1:o=i}return o}return Mo(t,e,Rl,n)}function Mo(t,e,n,r){e=n(e);for(var o=0,s=null==t?0:t.length,a=e!=e,l=null===e,c=Na(e),u=e===i;o<s;){var h=Gn((o+s)/2),_=n(t[h]),f=_!==i,d=null===_,g=_==_,p=Na(_);if(a)var C=r||g;else C=u?g&&(r||f):l?g&&f&&(r||!d):c?g&&f&&!d&&(r||!p):!d&&!p&&(r?_<=e:_<e);C?o=h+1:s=h}return Qn(s,U)}function No(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!fa(a,l)){var l=a;i[o++]=0===s?0:s}}return i}function zo(t){return"number"==typeof t?t:Na(t)?z:+t}function Do(t){if("string"==typeof t)return t;if(Ca(t))return $e(t,Do)+"";if(Na(t))return _r?_r.call(t):"";var e=t+"";return"0"==e&&1/t==-B?"-0":e}function Uo(t,e,n){var r=-1,o=Xe,i=t.length,a=!0,l=[],c=l;if(n)a=!1,o=Ze;else if(i>=s){var u=e?null:mi(t);if(u)return On(u);a=!1,o=yn,c=new Ar}else c=e?[]:l;t:for(;++r<i;){var h=t[r],_=e?e(h):h;if(h=n||0!==h?h:0,a&&_==_){for(var f=c.length;f--;)if(c[f]===_)continue t;e&&c.push(_),l.push(h)}else o(c,_,n)||(c!==l&&c.push(_),l.push(h))}return l}function Go(t,e){return null==(t=es(t,e=Jo(e,t)))||delete t[us(ms(e))]}function Fo(t,e,n,r){return To(t,e,n(Kr(t,e)),r)}function jo(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?Lo(t,r?0:i,r?i+1:o):Lo(t,r?i+1:0,r?o:i)}function Po(t,e){var n=t;return n instanceof Cr&&(n=n.value()),en(e,function(t,e){return e.func.apply(e.thisArg,tn([t],e.args))},n)}function Yo(t,e,n){var o=t.length;if(o<2)return o?Uo(t[0]):[];for(var i=-1,s=r(o);++i<o;)for(var a=t[i],l=-1;++l<o;)l!=i&&(s[i]=Ur(s[i]||a,t[l],e,n));return Uo(Vr(s,1),e,n)}function Vo(t,e,n){for(var r=-1,o=t.length,s=e.length,a={};++r<o;){var l=r<s?e[r]:i;n(a,t[r],l)}return a}function Ho(t){return wa(t)?t:[]}function Qo(t){return"function"==typeof t?t:Rl}function Jo(t,e){return Ca(t)?t:Wi(t,e)?[t]:cs(Ha(t))}var Wo=vo;function qo(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:Lo(t,e,n)}var Ko=Nn||function(t){return Be.clearTimeout(t)};function Xo(t,e){if(e)return t.slice();var n=t.length,r=Ee?Ee(n):new t.constructor(n);return t.copy(r),r}function Zo(t){var e=new t.constructor(t.byteLength);return new be(e).set(new be(t)),e}function $o(t,e){var n=e?Zo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ti(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,s=Na(t),a=e!==i,l=null===e,c=e==e,u=Na(e);if(!l&&!u&&!s&&t>e||s&&a&&c&&!l&&!u||r&&a&&c||!n&&c||!o)return 1;if(!r&&!s&&!u&&t<e||u&&n&&o&&!r&&!s||l&&n&&o||!a&&o||!c)return-1}return 0}function ei(t,e,n,o){for(var i=-1,s=t.length,a=n.length,l=-1,c=e.length,u=Hn(s-a,0),h=r(c+u),_=!o;++l<c;)h[l]=e[l];for(;++i<a;)(_||i<s)&&(h[n[i]]=t[i]);for(;u--;)h[l++]=t[i++];return h}function ni(t,e,n,o){for(var i=-1,s=t.length,a=-1,l=n.length,c=-1,u=e.length,h=Hn(s-l,0),_=r(h+u),f=!o;++i<h;)_[i]=t[i];for(var d=i;++c<u;)_[d+c]=e[c];for(;++a<l;)(f||i<s)&&(_[d+n[a]]=t[i++]);return _}function ri(t,e){var n=-1,o=t.length;for(e||(e=r(o));++n<o;)e[n]=t[n];return e}function oi(t,e,n,r){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var l=e[s],c=r?r(n[l],t[l],l,n,t):i;c===i&&(c=t[l]),o?Ir(n,l,c):Er(n,l,c)}return n}function ii(t,e){return function(n,r){var o=Ca(n)?Qe:Rr,i=e?e():{};return o(n,t,zi(r,2),i)}}function si(t){return vo(function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=t.length>3&&"function"==typeof s?(o--,s):i,a&&Ji(n[0],n[1],a)&&(s=o<3?i:s,o=1),e=ee(e);++r<o;){var l=n[r];l&&t(e,l,r,s)}return e})}function ai(t,e){return function(n,r){if(null==n)return n;if(!ya(n))return t(n,r);for(var o=n.length,i=e?o:-1,s=ee(n);(e?i--:++i<o)&&!1!==r(s[i],i,s););return n}}function li(t){return function(e,n,r){for(var o=-1,i=ee(e),s=r(e),a=s.length;a--;){var l=s[t?a:++o];if(!1===n(i[l],l,i))break}return e}}function ci(t){return function(e){var n=kn(e=Ha(e))?In(e):i,r=n?n[0]:e.charAt(0),o=n?qo(n,1).join(""):e.slice(1);return r[t]()+o}}function ui(t){return function(e){return en(vl(pl(e).replace(xe,"")),t,"")}}function hi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=dr(t.prototype),r=t.apply(n,e);return Ta(r)?r:n}}function _i(t){return function(e,n,r){var o=ee(e);if(!ya(e)){var s=zi(n,3);e=ol(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,r);return a>-1?o[s?e[a]:a]:i}}function fi(t){return Ri(function(e){var n=e.length,r=n,o=pr.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new oe(l);if(o&&!a&&"wrapper"==Mi(s))var a=new pr([],!0)}for(r=a?r:n;++r<n;){var c=Mi(s=e[r]),u="wrapper"==c?Bi(s):i;a=u&&qi(u[0])&&u[1]==(v|w|b|k)&&!u[4].length&&1==u[9]?a[Mi(u[0])].apply(a,u[3]):1==s.length&&qi(s)?a[c]():a.thru(s)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&Ca(r))return a.plant(r).value();for(var o=0,i=n?e[o].apply(this,t):r;++o<n;)i=e[o].call(this,i);return i}})}function di(t,e,n,o,s,a,l,c,u,h){var _=e&v,f=e&C,d=e&x,g=e&(w|A),p=e&S,y=d?i:hi(t);return function C(){for(var x=arguments.length,w=r(x),A=x;A--;)w[A]=arguments[A];if(g)var b=Ni(C),m=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(w,b);if(o&&(w=ei(w,o,s,g)),a&&(w=ni(w,a,l,g)),x-=m,g&&x<h){var v=En(w,b);return Ai(t,e,di,C.placeholder,n,w,v,c,u,h-x)}var k=f?n:this,S=d?k[t]:t;return x=w.length,c?w=function(t,e){for(var n=t.length,r=Qn(e.length,n),o=ri(t);r--;){var s=e[r];t[r]=Qi(s,n)?o[s]:i}return t}(w,c):p&&x>1&&w.reverse(),_&&u<x&&(w.length=u),this&&this!==Be&&this instanceof C&&(S=y||hi(S)),S.apply(k,w)}}function gi(t,e){return function(n,r){return function(t,e,n,r){return Jr(t,function(t,o,i){e(r,n(t),o,i)}),r}(n,t,e(r),{})}}function pi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=Do(n),r=Do(r)):(n=zo(n),r=zo(r)),o=t(n,r)}return o}}function Ci(t){return Ri(function(e){return e=$e(e,Cn(zi())),vo(function(n){var r=this;return t(e,function(t){return He(t,r,n)})})})}function xi(t,e){var n=(e=e===i?" ":Do(e)).length;if(n<2)return n?mo(e,t):e;var r=mo(e,Un(t/Ln(e)));return kn(e)?qo(In(r),0,t).join(""):r.slice(0,t)}function yi(t){return function(e,n,o){return o&&"number"!=typeof o&&Ji(e,n,o)&&(n=o=i),e=Fa(e),n===i?(n=e,e=0):n=Fa(n),function(t,e,n,o){for(var i=-1,s=Hn(Un((e-t)/(n||1)),0),a=r(s);s--;)a[o?s:++i]=t,t+=n;return a}(e,n,o=o===i?e<n?1:-1:Fa(o),t)}}function wi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Ya(e),n=Ya(n)),t(e,n)}}function Ai(t,e,n,r,o,s,a,l,c,u){var h=e&w;e|=h?b:m,(e&=~(h?m:b))&y||(e&=~(C|x));var _=[t,e,o,h?s:i,h?a:i,h?i:s,h?i:a,l,c,u],f=n.apply(i,_);return qi(t)&&rs(f,_),f.placeholder=r,ss(f,t,e)}function bi(t){var e=te[t];return function(t,n){if(t=Ya(t),n=null==n?0:Qn(ja(n),292)){var r=(Ha(t)+"e").split("e");return+((r=(Ha(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var mi=tr&&1/On(new tr([,-0]))[1]==B?function(t){return new tr(t)}:Nl;function vi(t){return function(e){var n=Pi(e);return n==K?Sn(e):n==nt?Rn(e):function(t,e){return $e(e,function(e){return[e,t[e]]})}(e,t(e))}}function ki(t,e,n,o,s,a,c,u){var _=e&x;if(!_&&"function"!=typeof t)throw new oe(l);var f=o?o.length:0;if(f||(e&=~(b|m),o=s=i),c=c===i?c:Hn(ja(c),0),u=u===i?u:ja(u),f-=s?s.length:0,e&m){var d=o,g=s;o=s=i}var p=_?i:Bi(t),S=[t,e,n,o,s,d,g,a,c,u];if(p&&function(t,e){var n=t[1],r=e[1],o=n|r,i=o<(C|x|v),s=r==v&&n==w||r==v&&n==k&&t[7].length<=e[8]||r==(v|k)&&e[7].length<=e[8]&&n==w;if(!i&&!s)return t;r&C&&(t[2]=e[2],o|=n&C?0:y);var a=e[3];if(a){var l=t[3];t[3]=l?ei(l,a,e[4]):a,t[4]=l?En(t[3],h):e[4]}(a=e[5])&&(l=t[5],t[5]=l?ni(l,a,e[6]):a,t[6]=l?En(t[5],h):e[6]),(a=e[7])&&(t[7]=a),r&v&&(t[8]=null==t[8]?e[8]:Qn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o}(S,p),t=S[0],e=S[1],n=S[2],o=S[3],s=S[4],!(u=S[9]=S[9]===i?_?0:t.length:Hn(S[9]-f,0))&&e&(w|A)&&(e&=~(w|A)),e&&e!=C)T=e==w||e==A?function(t,e,n){var o=hi(t);return function s(){for(var a=arguments.length,l=r(a),c=a,u=Ni(s);c--;)l[c]=arguments[c];var h=a<3&&l[0]!==u&&l[a-1]!==u?[]:En(l,u);return(a-=h.length)<n?Ai(t,e,di,s.placeholder,i,l,h,i,i,n-a):He(this&&this!==Be&&this instanceof s?o:t,this,l)}}(t,e,u):e!=b&&e!=(C|b)||s.length?di.apply(i,S):function(t,e,n,o){var i=e&C,s=hi(t);return function e(){for(var a=-1,l=arguments.length,c=-1,u=o.length,h=r(u+l),_=this&&this!==Be&&this instanceof e?s:t;++c<u;)h[c]=o[c];for(;l--;)h[c++]=arguments[++a];return He(_,i?n:this,h)}}(t,e,n,o);else var T=function(t,e,n){var r=e&C,o=hi(t);return function e(){return(this&&this!==Be&&this instanceof e?o:t).apply(r?n:this,arguments)}}(t,e,n);return ss((p?Eo:rs)(T,S),t,e)}function Si(t,e,n,r){return t===i||fa(t,ae[n])&&!ue.call(r,n)?e:t}function Ti(t,e,n,r,o,s){return Ta(t)&&Ta(e)&&(s.set(e,t),po(t,e,i,Ti,s),s.delete(e)),t}function Ei(t){return La(t)?i:t}function Oi(t,e,n,r,o,s){var a=n&g,l=t.length,c=e.length;if(l!=c&&!(a&&c>l))return!1;var u=s.get(t);if(u&&s.get(e))return u==e;var h=-1,_=!0,f=n&p?new Ar:i;for(s.set(t,e),s.set(e,t);++h<l;){var d=t[h],C=e[h];if(r)var x=a?r(C,d,h,e,t,s):r(d,C,h,t,e,s);if(x!==i){if(x)continue;_=!1;break}if(f){if(!rn(e,function(t,e){if(!yn(f,e)&&(d===t||o(d,t,n,r,s)))return f.push(e)})){_=!1;break}}else if(d!==C&&!o(d,C,n,r,s)){_=!1;break}}return s.delete(t),s.delete(e),_}function Ri(t){return is(ts(t,i,xs),t+"")}function Li(t){return Xr(t,ol,Fi)}function Ii(t){return Xr(t,il,ji)}var Bi=rr?function(t){return rr.get(t)}:Nl;function Mi(t){for(var e=t.name+"",n=or[e],r=ue.call(or,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e}function Ni(t){return(ue.call(fr,"placeholder")?fr:t).placeholder}function zi(){var t=fr.iteratee||Ll;return t=t===Ll?lo:t,arguments.length?t(arguments[0],arguments[1]):t}function Di(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function Ui(t){for(var e=ol(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,Zi(o)]}return e}function Gi(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return ao(n)?n:i}var Fi=Fn?function(t){return null==t?[]:(t=ee(t),Ke(Fn(t),function(e){return Me.call(t,e)}))}:Pl,ji=Fn?function(t){for(var e=[];t;)tn(e,Fi(t)),t=Le(t);return e}:Pl,Pi=Zr;function Yi(t,e,n){for(var r=-1,o=(e=Jo(e,t)).length,i=!1;++r<o;){var s=us(e[r]);if(!(i=null!=t&&n(t,s)))break;t=t[s]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&Sa(o)&&Qi(s,o)&&(Ca(t)||pa(t))}function Vi(t){return"function"!=typeof t.constructor||Xi(t)?{}:dr(Le(t))}function Hi(t){return Ca(t)||pa(t)||!!(De&&t&&t[De])}function Qi(t,e){var n=typeof t;return!!(e=null==e?M:e)&&("number"==n||"symbol"!=n&&Wt.test(t))&&t>-1&&t%1==0&&t<e}function Ji(t,e,n){if(!Ta(n))return!1;var r=typeof e;return!!("number"==r?ya(n)&&Qi(e,n.length):"string"==r&&e in n)&&fa(n[e],t)}function Wi(t,e){if(Ca(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Na(t))||Rt.test(t)||!Ot.test(t)||null!=e&&t in ee(e)}function qi(t){var e=Mi(t),n=fr[e];if("function"!=typeof n||!(e in Cr.prototype))return!1;if(t===n)return!0;var r=Bi(n);return!!r&&t===r[0]}(Xn&&Pi(new Xn(new ArrayBuffer(1)))!=ct||Zn&&Pi(new Zn)!=K||$n&&"[object Promise]"!=Pi($n.resolve())||tr&&Pi(new tr)!=nt||er&&Pi(new er)!=st)&&(Pi=function(t){var e=Zr(t),n=e==$?t.constructor:i,r=n?hs(n):"";if(r)switch(r){case ir:return ct;case sr:return K;case ar:return"[object Promise]";case lr:return nt;case cr:return st}return e});var Ki=le?va:Yl;function Xi(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ae)}function Zi(t){return t==t&&!Ta(t)}function $i(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in ee(n))}}function ts(t,e,n){return e=Hn(e===i?t.length-1:e,0),function(){for(var o=arguments,i=-1,s=Hn(o.length-e,0),a=r(s);++i<s;)a[i]=o[e+i];i=-1;for(var l=r(e+1);++i<e;)l[i]=o[i];return l[e]=n(a),He(t,this,l)}}function es(t,e){return e.length<2?t:Kr(t,Lo(e,0,-1))}function ns(t,e){if("__proto__"!=e)return t[e]}var rs=as(Eo),os=Dn||function(t,e){return Be.setTimeout(t,e)},is=as(Oo);function ss(t,e,n){var r=e+"";return is(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Dt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Je(F,function(n){var r="_."+n[0];e&n[1]&&!Xe(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(Ut);return e?e[1].split(Gt):[]}(r),n)))}function as(t){var e=0,n=0;return function(){var r=Jn(),o=R-(r-n);if(n=r,o>0){if(++e>=O)return arguments[0]}else e=0;return t.apply(i,arguments)}}function ls(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var s=bo(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var cs=function(t){var e=aa(t,function(t){return n.size===u&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Lt,function(t,n,r,o){e.push(r?o.replace(jt,"$1"):n||t)}),e});function us(t){if("string"==typeof t||Na(t))return t;var e=t+"";return"0"==e&&1/t==-B?"-0":e}function hs(t){if(null!=t){try{return ce.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function _s(t){if(t instanceof Cr)return t.clone();var e=new pr(t.__wrapped__,t.__chain__);return e.__actions__=ri(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var fs=vo(function(t,e){return wa(t)?Ur(t,Vr(e,1,wa,!0)):[]}),ds=vo(function(t,e){var n=ms(e);return wa(n)&&(n=i),wa(t)?Ur(t,Vr(e,1,wa,!0),zi(n,2)):[]}),gs=vo(function(t,e){var n=ms(e);return wa(n)&&(n=i),wa(t)?Ur(t,Vr(e,1,wa,!0),i,n):[]});function ps(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:ja(n);return o<0&&(o=Hn(r+o,0)),an(t,zi(e,3),o)}function Cs(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ja(n),o=n<0?Hn(r+o,0):Qn(o,r-1)),an(t,zi(e,3),o,!0)}function xs(t){return null!=t&&t.length?Vr(t,1):[]}function ys(t){return t&&t.length?t[0]:i}var ws=vo(function(t){var e=$e(t,Ho);return e.length&&e[0]===t[0]?no(e):[]}),As=vo(function(t){var e=ms(t),n=$e(t,Ho);return e===ms(n)?e=i:n.pop(),n.length&&n[0]===t[0]?no(n,zi(e,2)):[]}),bs=vo(function(t){var e=ms(t),n=$e(t,Ho);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?no(n,i,e):[]});function ms(t){var e=null==t?0:t.length;return e?t[e-1]:i}var vs=vo(ks);function ks(t,e){return t&&t.length&&e&&e.length?wo(t,e):t}var Ss=Ri(function(t,e){var n=null==t?0:t.length,r=Br(t,e);return Ao(t,$e(e,function(t){return Qi(t,n)?+t:t}).sort(ti)),r});function Ts(t){return null==t?t:Kn.call(t)}var Es=vo(function(t){return Uo(Vr(t,1,wa,!0))}),Os=vo(function(t){var e=ms(t);return wa(e)&&(e=i),Uo(Vr(t,1,wa,!0),zi(e,2))}),Rs=vo(function(t){var e=ms(t);return e="function"==typeof e?e:i,Uo(Vr(t,1,wa,!0),i,e)});function Ls(t){if(!t||!t.length)return[];var e=0;return t=Ke(t,function(t){if(wa(t))return e=Hn(t.length,e),!0}),pn(e,function(e){return $e(t,_n(e))})}function Is(t,e){if(!t||!t.length)return[];var n=Ls(t);return null==e?n:$e(n,function(t){return He(e,i,t)})}var Bs=vo(function(t,e){return wa(t)?Ur(t,e):[]}),Ms=vo(function(t){return Yo(Ke(t,wa))}),Ns=vo(function(t){var e=ms(t);return wa(e)&&(e=i),Yo(Ke(t,wa),zi(e,2))}),zs=vo(function(t){var e=ms(t);return e="function"==typeof e?e:i,Yo(Ke(t,wa),i,e)}),Ds=vo(Ls);var Us=vo(function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,Is(t,n)});function Gs(t){var e=fr(t);return e.__chain__=!0,e}function Fs(t,e){return e(t)}var js=Ri(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return Br(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Cr&&Qi(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Fs,args:[o],thisArg:i}),new pr(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(i),t})):this.thru(o)});var Ps=ii(function(t,e,n){ue.call(t,n)?++t[n]:Ir(t,n,1)});var Ys=_i(ps),Vs=_i(Cs);function Hs(t,e){return(Ca(t)?Je:Gr)(t,zi(e,3))}function Qs(t,e){return(Ca(t)?We:Fr)(t,zi(e,3))}var Js=ii(function(t,e,n){ue.call(t,n)?t[n].push(e):Ir(t,n,[e])});var Ws=vo(function(t,e,n){var o=-1,i="function"==typeof e,s=ya(t)?r(t.length):[];return Gr(t,function(t){s[++o]=i?He(e,t,n):ro(t,e,n)}),s}),qs=ii(function(t,e,n){Ir(t,n,e)});function Ks(t,e){return(Ca(t)?$e:_o)(t,zi(e,3))}var Xs=ii(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Zs=vo(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Ji(t,e[0],e[1])?e=[]:n>2&&Ji(e[0],e[1],e[2])&&(e=[e[0]]),xo(t,Vr(e,1),[])}),$s=zn||function(){return Be.Date.now()};function ta(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,ki(t,v,i,i,i,i,e)}function ea(t,e){var n;if("function"!=typeof e)throw new oe(l);return t=ja(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var na=vo(function(t,e,n){var r=C;if(n.length){var o=En(n,Ni(na));r|=b}return ki(t,r,e,n,o)}),ra=vo(function(t,e,n){var r=C|x;if(n.length){var o=En(n,Ni(ra));r|=b}return ki(e,r,t,n,o)});function oa(t,e,n){var r,o,s,a,c,u,h=0,_=!1,f=!1,d=!0;if("function"!=typeof t)throw new oe(l);function g(e){var n=r,s=o;return r=o=i,h=e,a=t.apply(s,n)}function p(t){var n=t-u;return u===i||n>=e||n<0||f&&t-h>=s}function C(){var t=$s();if(p(t))return x(t);c=os(C,function(t){var n=e-(t-u);return f?Qn(n,s-(t-h)):n}(t))}function x(t){return c=i,d&&r?g(t):(r=o=i,a)}function y(){var t=$s(),n=p(t);if(r=arguments,o=this,u=t,n){if(c===i)return function(t){return h=t,c=os(C,e),_?g(t):a}(u);if(f)return c=os(C,e),g(u)}return c===i&&(c=os(C,e)),a}return e=Ya(e)||0,Ta(n)&&(_=!!n.leading,s=(f="maxWait"in n)?Hn(Ya(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),y.cancel=function(){c!==i&&Ko(c),h=0,r=u=o=c=i},y.flush=function(){return c===i?a:x($s())},y}var ia=vo(function(t,e){return Dr(t,1,e)}),sa=vo(function(t,e,n){return Dr(t,Ya(e)||0,n)});function aa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new oe(l);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(aa.Cache||wr),n}function la(t){if("function"!=typeof t)throw new oe(l);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}aa.Cache=wr;var ca=Wo(function(t,e){var n=(e=1==e.length&&Ca(e[0])?$e(e[0],Cn(zi())):$e(Vr(e,1),Cn(zi()))).length;return vo(function(r){for(var o=-1,i=Qn(r.length,n);++o<i;)r[o]=e[o].call(this,r[o]);return He(t,this,r)})}),ua=vo(function(t,e){var n=En(e,Ni(ua));return ki(t,b,i,e,n)}),ha=vo(function(t,e){var n=En(e,Ni(ha));return ki(t,m,i,e,n)}),_a=Ri(function(t,e){return ki(t,k,i,i,i,e)});function fa(t,e){return t===e||t!=t&&e!=e}var da=wi($r),ga=wi(function(t,e){return t>=e}),pa=oo(function(){return arguments}())?oo:function(t){return Ea(t)&&ue.call(t,"callee")&&!Me.call(t,"callee")},Ca=r.isArray,xa=Ge?Cn(Ge):function(t){return Ea(t)&&Zr(t)==lt};function ya(t){return null!=t&&Sa(t.length)&&!va(t)}function wa(t){return Ea(t)&&ya(t)}var Aa=jn||Yl,ba=Fe?Cn(Fe):function(t){return Ea(t)&&Zr(t)==H};function ma(t){if(!Ea(t))return!1;var e=Zr(t);return e==J||e==Q||"string"==typeof t.message&&"string"==typeof t.name&&!La(t)}function va(t){if(!Ta(t))return!1;var e=Zr(t);return e==W||e==q||e==Y||e==tt}function ka(t){return"number"==typeof t&&t==ja(t)}function Sa(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=M}function Ta(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ea(t){return null!=t&&"object"==typeof t}var Oa=je?Cn(je):function(t){return Ea(t)&&Pi(t)==K};function Ra(t){return"number"==typeof t||Ea(t)&&Zr(t)==X}function La(t){if(!Ea(t)||Zr(t)!=$)return!1;var e=Le(t);if(null===e)return!0;var n=ue.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ce.call(n)==de}var Ia=Pe?Cn(Pe):function(t){return Ea(t)&&Zr(t)==et};var Ba=Ye?Cn(Ye):function(t){return Ea(t)&&Pi(t)==nt};function Ma(t){return"string"==typeof t||!Ca(t)&&Ea(t)&&Zr(t)==rt}function Na(t){return"symbol"==typeof t||Ea(t)&&Zr(t)==ot}var za=Ve?Cn(Ve):function(t){return Ea(t)&&Sa(t.length)&&!!Se[Zr(t)]};var Da=wi(ho),Ua=wi(function(t,e){return t<=e});function Ga(t){if(!t)return[];if(ya(t))return Ma(t)?In(t):ri(t);if(Ue&&t[Ue])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Ue]());var e=Pi(t);return(e==K?Sn:e==nt?On:fl)(t)}function Fa(t){return t?(t=Ya(t))===B||t===-B?(t<0?-1:1)*N:t==t?t:0:0===t?t:0}function ja(t){var e=Fa(t),n=e%1;return e==e?n?e-n:e:0}function Pa(t){return t?Mr(ja(t),0,D):0}function Ya(t){if("number"==typeof t)return t;if(Na(t))return z;if(Ta(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ta(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Mt,"");var n=Ht.test(t);return n||Jt.test(t)?Re(t.slice(2),n?2:8):Vt.test(t)?z:+t}function Va(t){return oi(t,il(t))}function Ha(t){return null==t?"":Do(t)}var Qa=si(function(t,e){if(Xi(e)||ya(e))oi(e,ol(e),t);else for(var n in e)ue.call(e,n)&&Er(t,n,e[n])}),Ja=si(function(t,e){oi(e,il(e),t)}),Wa=si(function(t,e,n,r){oi(e,il(e),t,r)}),qa=si(function(t,e,n,r){oi(e,ol(e),t,r)}),Ka=Ri(Br);var Xa=vo(function(t,e){t=ee(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&Ji(e[0],e[1],o)&&(r=1);++n<r;)for(var s=e[n],a=il(s),l=-1,c=a.length;++l<c;){var u=a[l],h=t[u];(h===i||fa(h,ae[u])&&!ue.call(t,u))&&(t[u]=s[u])}return t}),Za=vo(function(t){return t.push(i,Ti),He(al,i,t)});function $a(t,e,n){var r=null==t?i:Kr(t,e);return r===i?n:r}function tl(t,e){return null!=t&&Yi(t,e,eo)}var el=gi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),t[e]=n},Tl(Rl)),nl=gi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),ue.call(t,e)?t[e].push(n):t[e]=[n]},zi),rl=vo(ro);function ol(t){return ya(t)?mr(t):co(t)}function il(t){return ya(t)?mr(t,!0):uo(t)}var sl=si(function(t,e,n){po(t,e,n)}),al=si(function(t,e,n,r){po(t,e,n,r)}),ll=Ri(function(t,e){var n={};if(null==t)return n;var r=!1;e=$e(e,function(e){return e=Jo(e,t),r||(r=e.length>1),e}),oi(t,Ii(t),n),r&&(n=Nr(n,_|f|d,Ei));for(var o=e.length;o--;)Go(n,e[o]);return n});var cl=Ri(function(t,e){return null==t?{}:function(t,e){return yo(t,e,function(e,n){return tl(t,n)})}(t,e)});function ul(t,e){if(null==t)return{};var n=$e(Ii(t),function(t){return[t]});return e=zi(e),yo(t,n,function(t,n){return e(t,n[0])})}var hl=vi(ol),_l=vi(il);function fl(t){return null==t?[]:xn(t,ol(t))}var dl=ui(function(t,e,n){return e=e.toLowerCase(),t+(n?gl(e):e)});function gl(t){return ml(Ha(t).toLowerCase())}function pl(t){return(t=Ha(t))&&t.replace(qt,bn).replace(ye,"")}var Cl=ui(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),xl=ui(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),yl=ci("toLowerCase");var wl=ui(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var Al=ui(function(t,e,n){return t+(n?" ":"")+ml(e)});var bl=ui(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),ml=ci("toUpperCase");function vl(t,e,n){return t=Ha(t),(e=n?i:e)===i?function(t){return me.test(t)}(t)?function(t){return t.match(Ae)||[]}(t):function(t){return t.match(Ft)||[]}(t):t.match(e)||[]}var kl=vo(function(t,e){try{return He(t,i,e)}catch(t){return ma(t)?t:new Zt(t)}}),Sl=Ri(function(t,e){return Je(e,function(e){e=us(e),Ir(t,e,na(t[e],t))}),t});function Tl(t){return function(){return t}}var El=fi(),Ol=fi(!0);function Rl(t){return t}function Ll(t){return lo("function"==typeof t?t:Nr(t,_))}var Il=vo(function(t,e){return function(n){return ro(n,t,e)}}),Bl=vo(function(t,e){return function(n){return ro(t,n,e)}});function Ml(t,e,n){var r=ol(e),o=qr(e,r);null!=n||Ta(e)&&(o.length||!r.length)||(n=e,e=t,t=this,o=qr(e,ol(e)));var i=!(Ta(n)&&"chain"in n&&!n.chain),s=va(t);return Je(o,function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(i||e){var n=t(this.__wrapped__),o=n.__actions__=ri(this.__actions__);return o.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,tn([this.value()],arguments))})}),t}function Nl(){}var zl=Ci($e),Dl=Ci(qe),Ul=Ci(rn);function Gl(t){return Wi(t)?_n(us(t)):function(t){return function(e){return Kr(e,t)}}(t)}var Fl=yi(),jl=yi(!0);function Pl(){return[]}function Yl(){return!1}var Vl=pi(function(t,e){return t+e},0),Hl=bi("ceil"),Ql=pi(function(t,e){return t/e},1),Jl=bi("floor");var Wl,ql=pi(function(t,e){return t*e},1),Kl=bi("round"),Xl=pi(function(t,e){return t-e},0);return fr.after=function(t,e){if("function"!=typeof e)throw new oe(l);return t=ja(t),function(){if(--t<1)return e.apply(this,arguments)}},fr.ary=ta,fr.assign=Qa,fr.assignIn=Ja,fr.assignInWith=Wa,fr.assignWith=qa,fr.at=Ka,fr.before=ea,fr.bind=na,fr.bindAll=Sl,fr.bindKey=ra,fr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ca(t)?t:[t]},fr.chain=Gs,fr.chunk=function(t,e,n){e=(n?Ji(t,e,n):e===i)?1:Hn(ja(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,l=r(Un(o/e));s<o;)l[a++]=Lo(t,s,s+=e);return l},fr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var i=t[e];i&&(o[r++]=i)}return o},fr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],o=t;o--;)e[o-1]=arguments[o];return tn(Ca(n)?ri(n):[n],Vr(e,1))},fr.cond=function(t){var e=null==t?0:t.length,n=zi();return t=e?$e(t,function(t){if("function"!=typeof t[1])throw new oe(l);return[n(t[0]),t[1]]}):[],vo(function(n){for(var r=-1;++r<e;){var o=t[r];if(He(o[0],this,n))return He(o[1],this,n)}})},fr.conforms=function(t){return function(t){var e=ol(t);return function(n){return zr(n,t,e)}}(Nr(t,_))},fr.constant=Tl,fr.countBy=Ps,fr.create=function(t,e){var n=dr(t);return null==e?n:Lr(n,e)},fr.curry=function t(e,n,r){var o=ki(e,w,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},fr.curryRight=function t(e,n,r){var o=ki(e,A,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},fr.debounce=oa,fr.defaults=Xa,fr.defaultsDeep=Za,fr.defer=ia,fr.delay=sa,fr.difference=fs,fr.differenceBy=ds,fr.differenceWith=gs,fr.drop=function(t,e,n){var r=null==t?0:t.length;return r?Lo(t,(e=n||e===i?1:ja(e))<0?0:e,r):[]},fr.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Lo(t,0,(e=r-(e=n||e===i?1:ja(e)))<0?0:e):[]},fr.dropRightWhile=function(t,e){return t&&t.length?jo(t,zi(e,3),!0,!0):[]},fr.dropWhile=function(t,e){return t&&t.length?jo(t,zi(e,3),!0):[]},fr.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Ji(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=ja(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ja(r))<0&&(r+=o),r=n>r?0:Pa(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},fr.filter=function(t,e){return(Ca(t)?Ke:Yr)(t,zi(e,3))},fr.flatMap=function(t,e){return Vr(Ks(t,e),1)},fr.flatMapDeep=function(t,e){return Vr(Ks(t,e),B)},fr.flatMapDepth=function(t,e,n){return n=n===i?1:ja(n),Vr(Ks(t,e),n)},fr.flatten=xs,fr.flattenDeep=function(t){return null!=t&&t.length?Vr(t,B):[]},fr.flattenDepth=function(t,e){return null!=t&&t.length?Vr(t,e=e===i?1:ja(e)):[]},fr.flip=function(t){return ki(t,S)},fr.flow=El,fr.flowRight=Ol,fr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r},fr.functions=function(t){return null==t?[]:qr(t,ol(t))},fr.functionsIn=function(t){return null==t?[]:qr(t,il(t))},fr.groupBy=Js,fr.initial=function(t){return null!=t&&t.length?Lo(t,0,-1):[]},fr.intersection=ws,fr.intersectionBy=As,fr.intersectionWith=bs,fr.invert=el,fr.invertBy=nl,fr.invokeMap=Ws,fr.iteratee=Ll,fr.keyBy=qs,fr.keys=ol,fr.keysIn=il,fr.map=Ks,fr.mapKeys=function(t,e){var n={};return e=zi(e,3),Jr(t,function(t,r,o){Ir(n,e(t,r,o),t)}),n},fr.mapValues=function(t,e){var n={};return e=zi(e,3),Jr(t,function(t,r,o){Ir(n,r,e(t,r,o))}),n},fr.matches=function(t){return fo(Nr(t,_))},fr.matchesProperty=function(t,e){return go(t,Nr(e,_))},fr.memoize=aa,fr.merge=sl,fr.mergeWith=al,fr.method=Il,fr.methodOf=Bl,fr.mixin=Ml,fr.negate=la,fr.nthArg=function(t){return t=ja(t),vo(function(e){return Co(e,t)})},fr.omit=ll,fr.omitBy=function(t,e){return ul(t,la(zi(e)))},fr.once=function(t){return ea(2,t)},fr.orderBy=function(t,e,n,r){return null==t?[]:(Ca(e)||(e=null==e?[]:[e]),Ca(n=r?i:n)||(n=null==n?[]:[n]),xo(t,e,n))},fr.over=zl,fr.overArgs=ca,fr.overEvery=Dl,fr.overSome=Ul,fr.partial=ua,fr.partialRight=ha,fr.partition=Xs,fr.pick=cl,fr.pickBy=ul,fr.property=Gl,fr.propertyOf=function(t){return function(e){return null==t?i:Kr(t,e)}},fr.pull=vs,fr.pullAll=ks,fr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?wo(t,e,zi(n,2)):t},fr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?wo(t,e,i,n):t},fr.pullAt=Ss,fr.range=Fl,fr.rangeRight=jl,fr.rearg=_a,fr.reject=function(t,e){return(Ca(t)?Ke:Yr)(t,la(zi(e,3)))},fr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,o=[],i=t.length;for(e=zi(e,3);++r<i;){var s=t[r];e(s,r,t)&&(n.push(s),o.push(r))}return Ao(t,o),n},fr.rest=function(t,e){if("function"!=typeof t)throw new oe(l);return vo(t,e=e===i?e:ja(e))},fr.reverse=Ts,fr.sampleSize=function(t,e,n){return e=(n?Ji(t,e,n):e===i)?1:ja(e),(Ca(t)?kr:So)(t,e)},fr.set=function(t,e,n){return null==t?t:To(t,e,n)},fr.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:To(t,e,n,r)},fr.shuffle=function(t){return(Ca(t)?Sr:Ro)(t)},fr.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Ji(t,e,n)?(e=0,n=r):(e=null==e?0:ja(e),n=n===i?r:ja(n)),Lo(t,e,n)):[]},fr.sortBy=Zs,fr.sortedUniq=function(t){return t&&t.length?No(t):[]},fr.sortedUniqBy=function(t,e){return t&&t.length?No(t,zi(e,2)):[]},fr.split=function(t,e,n){return n&&"number"!=typeof n&&Ji(t,e,n)&&(e=n=i),(n=n===i?D:n>>>0)?(t=Ha(t))&&("string"==typeof e||null!=e&&!Ia(e))&&!(e=Do(e))&&kn(t)?qo(In(t),0,n):t.split(e,n):[]},fr.spread=function(t,e){if("function"!=typeof t)throw new oe(l);return e=null==e?0:Hn(ja(e),0),vo(function(n){var r=n[e],o=qo(n,0,e);return r&&tn(o,r),He(t,this,o)})},fr.tail=function(t){var e=null==t?0:t.length;return e?Lo(t,1,e):[]},fr.take=function(t,e,n){return t&&t.length?Lo(t,0,(e=n||e===i?1:ja(e))<0?0:e):[]},fr.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Lo(t,(e=r-(e=n||e===i?1:ja(e)))<0?0:e,r):[]},fr.takeRightWhile=function(t,e){return t&&t.length?jo(t,zi(e,3),!1,!0):[]},fr.takeWhile=function(t,e){return t&&t.length?jo(t,zi(e,3)):[]},fr.tap=function(t,e){return e(t),t},fr.throttle=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new oe(l);return Ta(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),oa(t,e,{leading:r,maxWait:e,trailing:o})},fr.thru=Fs,fr.toArray=Ga,fr.toPairs=hl,fr.toPairsIn=_l,fr.toPath=function(t){return Ca(t)?$e(t,us):Na(t)?[t]:ri(cs(Ha(t)))},fr.toPlainObject=Va,fr.transform=function(t,e,n){var r=Ca(t),o=r||Aa(t)||za(t);if(e=zi(e,4),null==n){var i=t&&t.constructor;n=o?r?new i:[]:Ta(t)&&va(i)?dr(Le(t)):{}}return(o?Je:Jr)(t,function(t,r,o){return e(n,t,r,o)}),n},fr.unary=function(t){return ta(t,1)},fr.union=Es,fr.unionBy=Os,fr.unionWith=Rs,fr.uniq=function(t){return t&&t.length?Uo(t):[]},fr.uniqBy=function(t,e){return t&&t.length?Uo(t,zi(e,2)):[]},fr.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?Uo(t,i,e):[]},fr.unset=function(t,e){return null==t||Go(t,e)},fr.unzip=Ls,fr.unzipWith=Is,fr.update=function(t,e,n){return null==t?t:Fo(t,e,Qo(n))},fr.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Fo(t,e,Qo(n),r)},fr.values=fl,fr.valuesIn=function(t){return null==t?[]:xn(t,il(t))},fr.without=Bs,fr.words=vl,fr.wrap=function(t,e){return ua(Qo(e),t)},fr.xor=Ms,fr.xorBy=Ns,fr.xorWith=zs,fr.zip=Ds,fr.zipObject=function(t,e){return Vo(t||[],e||[],Er)},fr.zipObjectDeep=function(t,e){return Vo(t||[],e||[],To)},fr.zipWith=Us,fr.entries=hl,fr.entriesIn=_l,fr.extend=Ja,fr.extendWith=Wa,Ml(fr,fr),fr.add=Vl,fr.attempt=kl,fr.camelCase=dl,fr.capitalize=gl,fr.ceil=Hl,fr.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=Ya(n))==n?n:0),e!==i&&(e=(e=Ya(e))==e?e:0),Mr(Ya(t),e,n)},fr.clone=function(t){return Nr(t,d)},fr.cloneDeep=function(t){return Nr(t,_|d)},fr.cloneDeepWith=function(t,e){return Nr(t,_|d,e="function"==typeof e?e:i)},fr.cloneWith=function(t,e){return Nr(t,d,e="function"==typeof e?e:i)},fr.conformsTo=function(t,e){return null==e||zr(t,e,ol(e))},fr.deburr=pl,fr.defaultTo=function(t,e){return null==t||t!=t?e:t},fr.divide=Ql,fr.endsWith=function(t,e,n){t=Ha(t),e=Do(e);var r=t.length,o=n=n===i?r:Mr(ja(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},fr.eq=fa,fr.escape=function(t){return(t=Ha(t))&&kt.test(t)?t.replace(mt,mn):t},fr.escapeRegExp=function(t){return(t=Ha(t))&&Bt.test(t)?t.replace(It,"\\$&"):t},fr.every=function(t,e,n){var r=Ca(t)?qe:jr;return n&&Ji(t,e,n)&&(e=i),r(t,zi(e,3))},fr.find=Ys,fr.findIndex=ps,fr.findKey=function(t,e){return sn(t,zi(e,3),Jr)},fr.findLast=Vs,fr.findLastIndex=Cs,fr.findLastKey=function(t,e){return sn(t,zi(e,3),Wr)},fr.floor=Jl,fr.forEach=Hs,fr.forEachRight=Qs,fr.forIn=function(t,e){return null==t?t:Hr(t,zi(e,3),il)},fr.forInRight=function(t,e){return null==t?t:Qr(t,zi(e,3),il)},fr.forOwn=function(t,e){return t&&Jr(t,zi(e,3))},fr.forOwnRight=function(t,e){return t&&Wr(t,zi(e,3))},fr.get=$a,fr.gt=da,fr.gte=ga,fr.has=function(t,e){return null!=t&&Yi(t,e,to)},fr.hasIn=tl,fr.head=ys,fr.identity=Rl,fr.includes=function(t,e,n,r){t=ya(t)?t:fl(t),n=n&&!r?ja(n):0;var o=t.length;return n<0&&(n=Hn(o+n,0)),Ma(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&ln(t,e,n)>-1},fr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:ja(n);return o<0&&(o=Hn(r+o,0)),ln(t,e,o)},fr.inRange=function(t,e,n){return e=Fa(e),n===i?(n=e,e=0):n=Fa(n),function(t,e,n){return t>=Qn(e,n)&&t<Hn(e,n)}(t=Ya(t),e,n)},fr.invoke=rl,fr.isArguments=pa,fr.isArray=Ca,fr.isArrayBuffer=xa,fr.isArrayLike=ya,fr.isArrayLikeObject=wa,fr.isBoolean=function(t){return!0===t||!1===t||Ea(t)&&Zr(t)==V},fr.isBuffer=Aa,fr.isDate=ba,fr.isElement=function(t){return Ea(t)&&1===t.nodeType&&!La(t)},fr.isEmpty=function(t){if(null==t)return!0;if(ya(t)&&(Ca(t)||"string"==typeof t||"function"==typeof t.splice||Aa(t)||za(t)||pa(t)))return!t.length;var e=Pi(t);if(e==K||e==nt)return!t.size;if(Xi(t))return!co(t).length;for(var n in t)if(ue.call(t,n))return!1;return!0},fr.isEqual=function(t,e){return io(t,e)},fr.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?io(t,e,i,n):!!r},fr.isError=ma,fr.isFinite=function(t){return"number"==typeof t&&Pn(t)},fr.isFunction=va,fr.isInteger=ka,fr.isLength=Sa,fr.isMap=Oa,fr.isMatch=function(t,e){return t===e||so(t,e,Ui(e))},fr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,so(t,e,Ui(e),n)},fr.isNaN=function(t){return Ra(t)&&t!=+t},fr.isNative=function(t){if(Ki(t))throw new Zt(a);return ao(t)},fr.isNil=function(t){return null==t},fr.isNull=function(t){return null===t},fr.isNumber=Ra,fr.isObject=Ta,fr.isObjectLike=Ea,fr.isPlainObject=La,fr.isRegExp=Ia,fr.isSafeInteger=function(t){return ka(t)&&t>=-M&&t<=M},fr.isSet=Ba,fr.isString=Ma,fr.isSymbol=Na,fr.isTypedArray=za,fr.isUndefined=function(t){return t===i},fr.isWeakMap=function(t){return Ea(t)&&Pi(t)==st},fr.isWeakSet=function(t){return Ea(t)&&Zr(t)==at},fr.join=function(t,e){return null==t?"":Yn.call(t,e)},fr.kebabCase=Cl,fr.last=ms,fr.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ja(n))<0?Hn(r+o,0):Qn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):an(t,un,o,!0)},fr.lowerCase=xl,fr.lowerFirst=yl,fr.lt=Da,fr.lte=Ua,fr.max=function(t){return t&&t.length?Pr(t,Rl,$r):i},fr.maxBy=function(t,e){return t&&t.length?Pr(t,zi(e,2),$r):i},fr.mean=function(t){return hn(t,Rl)},fr.meanBy=function(t,e){return hn(t,zi(e,2))},fr.min=function(t){return t&&t.length?Pr(t,Rl,ho):i},fr.minBy=function(t,e){return t&&t.length?Pr(t,zi(e,2),ho):i},fr.stubArray=Pl,fr.stubFalse=Yl,fr.stubObject=function(){return{}},fr.stubString=function(){return""},fr.stubTrue=function(){return!0},fr.multiply=ql,fr.nth=function(t,e){return t&&t.length?Co(t,ja(e)):i},fr.noConflict=function(){return Be._===this&&(Be._=ge),this},fr.noop=Nl,fr.now=$s,fr.pad=function(t,e,n){t=Ha(t);var r=(e=ja(e))?Ln(t):0;if(!e||r>=e)return t;var o=(e-r)/2;return xi(Gn(o),n)+t+xi(Un(o),n)},fr.padEnd=function(t,e,n){t=Ha(t);var r=(e=ja(e))?Ln(t):0;return e&&r<e?t+xi(e-r,n):t},fr.padStart=function(t,e,n){t=Ha(t);var r=(e=ja(e))?Ln(t):0;return e&&r<e?xi(e-r,n)+t:t},fr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Wn(Ha(t).replace(Nt,""),e||0)},fr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Ji(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=Fa(t),e===i?(e=t,t=0):e=Fa(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=qn();return Qn(t+o*(e-t+Oe("1e-"+((o+"").length-1))),e)}return bo(t,e)},fr.reduce=function(t,e,n){var r=Ca(t)?en:dn,o=arguments.length<3;return r(t,zi(e,4),n,o,Gr)},fr.reduceRight=function(t,e,n){var r=Ca(t)?nn:dn,o=arguments.length<3;return r(t,zi(e,4),n,o,Fr)},fr.repeat=function(t,e,n){return e=(n?Ji(t,e,n):e===i)?1:ja(e),mo(Ha(t),e)},fr.replace=function(){var t=arguments,e=Ha(t[0]);return t.length<3?e:e.replace(t[1],t[2])},fr.result=function(t,e,n){var r=-1,o=(e=Jo(e,t)).length;for(o||(o=1,t=i);++r<o;){var s=null==t?i:t[us(e[r])];s===i&&(r=o,s=n),t=va(s)?s.call(t):s}return t},fr.round=Kl,fr.runInContext=t,fr.sample=function(t){return(Ca(t)?vr:ko)(t)},fr.size=function(t){if(null==t)return 0;if(ya(t))return Ma(t)?Ln(t):t.length;var e=Pi(t);return e==K||e==nt?t.size:co(t).length},fr.snakeCase=wl,fr.some=function(t,e,n){var r=Ca(t)?rn:Io;return n&&Ji(t,e,n)&&(e=i),r(t,zi(e,3))},fr.sortedIndex=function(t,e){return Bo(t,e)},fr.sortedIndexBy=function(t,e,n){return Mo(t,e,zi(n,2))},fr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Bo(t,e);if(r<n&&fa(t[r],e))return r}return-1},fr.sortedLastIndex=function(t,e){return Bo(t,e,!0)},fr.sortedLastIndexBy=function(t,e,n){return Mo(t,e,zi(n,2),!0)},fr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Bo(t,e,!0)-1;if(fa(t[n],e))return n}return-1},fr.startCase=Al,fr.startsWith=function(t,e,n){return t=Ha(t),n=null==n?0:Mr(ja(n),0,t.length),e=Do(e),t.slice(n,n+e.length)==e},fr.subtract=Xl,fr.sum=function(t){return t&&t.length?gn(t,Rl):0},fr.sumBy=function(t,e){return t&&t.length?gn(t,zi(e,2)):0},fr.template=function(t,e,n){var r=fr.templateSettings;n&&Ji(t,e,n)&&(e=i),t=Ha(t),e=Wa({},e,r,Si);var o,s,a=Wa({},e.imports,r.imports,Si),l=ol(a),c=xn(a,l),u=0,h=e.interpolate||Kt,_="__p += '",f=ne((e.escape||Kt).source+"|"+h.source+"|"+(h===Et?Pt:Kt).source+"|"+(e.evaluate||Kt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++ke+"]")+"\n";t.replace(f,function(e,n,r,i,a,l){return r||(r=i),_+=t.slice(u,l).replace(Xt,vn),n&&(o=!0,_+="' +\n__e("+n+") +\n'"),a&&(s=!0,_+="';\n"+a+";\n__p += '"),r&&(_+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),_+="';\n";var g=e.variable;g||(_="with (obj) {\n"+_+"\n}\n"),_=(s?_.replace(yt,""):_).replace(wt,"$1").replace(At,"$1;"),_="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+_+"return __p\n}";var p=kl(function(){return $t(l,d+"return "+_).apply(i,c)});if(p.source=_,ma(p))throw p;return p},fr.times=function(t,e){if((t=ja(t))<1||t>M)return[];var n=D,r=Qn(t,D);e=zi(e),t-=D;for(var o=pn(r,e);++n<t;)e(n);return o},fr.toFinite=Fa,fr.toInteger=ja,fr.toLength=Pa,fr.toLower=function(t){return Ha(t).toLowerCase()},fr.toNumber=Ya,fr.toSafeInteger=function(t){return t?Mr(ja(t),-M,M):0===t?t:0},fr.toString=Ha,fr.toUpper=function(t){return Ha(t).toUpperCase()},fr.trim=function(t,e,n){if((t=Ha(t))&&(n||e===i))return t.replace(Mt,"");if(!t||!(e=Do(e)))return t;var r=In(t),o=In(e);return qo(r,wn(r,o),An(r,o)+1).join("")},fr.trimEnd=function(t,e,n){if((t=Ha(t))&&(n||e===i))return t.replace(zt,"");if(!t||!(e=Do(e)))return t;var r=In(t);return qo(r,0,An(r,In(e))+1).join("")},fr.trimStart=function(t,e,n){if((t=Ha(t))&&(n||e===i))return t.replace(Nt,"");if(!t||!(e=Do(e)))return t;var r=In(t);return qo(r,wn(r,In(e))).join("")},fr.truncate=function(t,e){var n=T,r=E;if(Ta(e)){var o="separator"in e?e.separator:o;n="length"in e?ja(e.length):n,r="omission"in e?Do(e.omission):r}var s=(t=Ha(t)).length;if(kn(t)){var a=In(t);s=a.length}if(n>=s)return t;var l=n-Ln(r);if(l<1)return r;var c=a?qo(a,0,l).join(""):t.slice(0,l);if(o===i)return c+r;if(a&&(l+=c.length-l),Ia(o)){if(t.slice(l).search(o)){var u,h=c;for(o.global||(o=ne(o.source,Ha(Yt.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var _=u.index;c=c.slice(0,_===i?l:_)}}else if(t.indexOf(Do(o),l)!=l){var f=c.lastIndexOf(o);f>-1&&(c=c.slice(0,f))}return c+r},fr.unescape=function(t){return(t=Ha(t))&&vt.test(t)?t.replace(bt,Bn):t},fr.uniqueId=function(t){var e=++he;return Ha(t)+e},fr.upperCase=bl,fr.upperFirst=ml,fr.each=Hs,fr.eachRight=Qs,fr.first=ys,Ml(fr,(Wl={},Jr(fr,function(t,e){ue.call(fr.prototype,e)||(Wl[e]=t)}),Wl),{chain:!1}),fr.VERSION="4.17.11",Je(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){fr[t].placeholder=fr}),Je(["drop","take"],function(t,e){Cr.prototype[t]=function(n){n=n===i?1:Hn(ja(n),0);var r=this.__filtered__&&!e?new Cr(this):this.clone();return r.__filtered__?r.__takeCount__=Qn(n,r.__takeCount__):r.__views__.push({size:Qn(n,D),type:t+(r.__dir__<0?"Right":"")}),r},Cr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Je(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==L||3==n;Cr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:zi(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),Je(["head","last"],function(t,e){var n="take"+(e?"Right":"");Cr.prototype[t]=function(){return this[n](1).value()[0]}}),Je(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Cr.prototype[t]=function(){return this.__filtered__?new Cr(this):this[n](1)}}),Cr.prototype.compact=function(){return this.filter(Rl)},Cr.prototype.find=function(t){return this.filter(t).head()},Cr.prototype.findLast=function(t){return this.reverse().find(t)},Cr.prototype.invokeMap=vo(function(t,e){return"function"==typeof t?new Cr(this):this.map(function(n){return ro(n,t,e)})}),Cr.prototype.reject=function(t){return this.filter(la(zi(t)))},Cr.prototype.slice=function(t,e){t=ja(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Cr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ja(e))<0?n.dropRight(-e):n.take(e-t)),n)},Cr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Cr.prototype.toArray=function(){return this.take(D)},Jr(Cr.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=fr[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);o&&(fr.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,l=e instanceof Cr,c=a[0],u=l||Ca(e),h=function(t){var e=o.apply(fr,tn([t],a));return r&&_?e[0]:e};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var _=this.__chain__,f=!!this.__actions__.length,d=s&&!_,g=l&&!f;if(!s&&u){e=g?e:new Cr(this);var p=t.apply(e,a);return p.__actions__.push({func:Fs,args:[h],thisArg:i}),new pr(p,_)}return d&&g?t.apply(this,a):(p=this.thru(h),d?r?p.value()[0]:p.value():p)})}),Je(["pop","push","shift","sort","splice","unshift"],function(t){var e=ie[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);fr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var o=this.value();return e.apply(Ca(o)?o:[],t)}return this[n](function(n){return e.apply(Ca(n)?n:[],t)})}}),Jr(Cr.prototype,function(t,e){var n=fr[e];if(n){var r=n.name+"";(or[r]||(or[r]=[])).push({name:e,func:n})}}),or[di(i,x).name]=[{name:"wrapper",func:i}],Cr.prototype.clone=function(){var t=new Cr(this.__wrapped__);return t.__actions__=ri(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ri(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ri(this.__views__),t},Cr.prototype.reverse=function(){if(this.__filtered__){var t=new Cr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Cr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ca(t),r=e<0,o=n?t.length:0,i=function(t,e,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],s=i.size;switch(i.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Qn(e,t+s);break;case"takeRight":t=Hn(t,e-s)}}return{start:t,end:e}}(0,o,this.__views__),s=i.start,a=i.end,l=a-s,c=r?a:s-1,u=this.__iteratees__,h=u.length,_=0,f=Qn(l,this.__takeCount__);if(!n||!r&&o==l&&f==l)return Po(t,this.__actions__);var d=[];t:for(;l--&&_<f;){for(var g=-1,p=t[c+=e];++g<h;){var C=u[g],x=C.iteratee,y=C.type,w=x(p);if(y==I)p=w;else if(!w){if(y==L)continue t;break t}}d[_++]=p}return d},fr.prototype.at=js,fr.prototype.chain=function(){return Gs(this)},fr.prototype.commit=function(){return new pr(this.value(),this.__chain__)},fr.prototype.next=function(){this.__values__===i&&(this.__values__=Ga(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},fr.prototype.plant=function(t){for(var e,n=this;n instanceof gr;){var r=_s(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},fr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Cr){var e=t;return this.__actions__.length&&(e=new Cr(this)),(e=e.reverse()).__actions__.push({func:Fs,args:[Ts],thisArg:i}),new pr(e,this.__chain__)}return this.thru(Ts)},fr.prototype.toJSON=fr.prototype.valueOf=fr.prototype.value=function(){return Po(this.__wrapped__,this.__actions__)},fr.prototype.first=fr.prototype.head,Ue&&(fr.prototype[Ue]=function(){return this}),fr}();Be._=Mn,(o=function(){return Mn}.call(e,n,e,r))===i||(r.exports=o)}).call(this)}).call(this,n(24),n(25)(t))},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),o=n(10),i=n(7),s=n(3);class a{constructor(t,e,n=0,r=0,o=s.a.Line,a=0,l=!1){this.ctx=t,this.p=new i.a(t,n,r),this.number=e,this.pixmap_size=a,this.draw_type=o,this.relative_pos=l}open(t){}draw(t,e,n,i,s){let a=this.p.z_x()+t.z_x(),l=this.p.z_y()+t.z_y(),c=s.pixmapv[this.number];if(!c)return;s.inverse&&c++;let u=o.a.img[c];if(null===u){let t=new Image;t.src=o.a.images[c],o.a.img[c]=t,o.a.pending[c]=[],o.a.pending[c].push(new r.f(a,l));let e=this.ctx.gdraw;t.onload=function(){for(let n=0;n<o.a.pending[c].length;n++)e.gctx.drawImage(t,o.a.pending[c][n].x,o.a.pending[c][n].y);o.a.pending[c]=null}}else u.complete?this.ctx.gdraw.gctx.drawImage(u,a,l):o.a.pending[c].push(new r.f(a,l))}configure_annotations(t){if(!t.annotpixmapv[this.number])return;this.relative_pos&&(t.rel_annotpixmap_x[this.number]=t.relative_annot_x);let e=t.annotpixmapv[this.number].pixmap_data[this.pixmap_size].width/this.ctx.base_zoom_factor;t.relative_annot_x=Math.max(this.p.x,t.rel_annotpixmap_x[this.number]+e+this.ctx.annotation_space)}move(t){this.p.set(t),this.ctx.set_dirty()}shift(t){this.p.set(r.f.add(this.p,t)),this.ctx.set_dirty()}get_borders(t,e,n){}}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(0),o=n(3),i=n(11),s=n(2),a=n(1),l=n(7);class c{constructor(t,e=0,n=0,r=0,i=o.a.TextHelveticaBold,a=2,c=s.a.OneLine,u=!1,h=s.f.One){this.draw_type=0,this.text_size=0,this.display_level=0,this.annot_type=0,this.number=0,this.ctx=t,this.p=new l.a(t,e,n),this.text_size=a,this.draw_type=i,this.annot_type=c,this.number=r,this.relative_pos=u,this.display_level=h}tsize(t){return this.ctx.zoom_factor/this.ctx.base_zoom_factor*(8+2*t)}draw(t,e,n,r,a){if(!(this.display_level&this.ctx.display_level))return;if(!a||!a.annotv[this.number])return;let l=this.ctx.zoom_factor/this.ctx.base_zoom_factor*(this.text_size+4)-4;if(l<0)return;l=Math.min(l,s.d-1);let c=this.tsize(this.text_size),u=this.p.z_x()+t.z_x(),h=this.p.z_y()+t.z_y()-c/4;if(this.annot_type===s.a.OneLine)this.relative_pos&&a.relative_annot_pos&&(u=Math.floor(t.z_x()+Math.max(this.p.z_x(),a.rel_annot_x[this.number]*this.ctx.zoom_factor))),this.ctx.gdraw.text(u,h,a.annotv[this.number],this.draw_type,o.a.Line,i.a.Helvetica,c,0,e,n);else if(this.annot_type===s.a.MultiLine){let t=a.annotv[this.number].split("\n");for(let r=0;r<t.length;r++)this.ctx.gdraw.text(u,h+r*c,t[r],this.draw_type,o.a.Line,i.a.Helvetica,c,0,e,n)}}open(t){for(;;){let e=t.consumeInt();switch(e){case a.k.Annot:break;case a.k.Annot_number:this.number=t.consumeInt();break;case a.k.Annot_draw_type:this.draw_type=t.consumeInt();break;case a.k.Annot_text_size:this.text_size=t.consumeInt();break;case a.k.Annot_display_level:this.display_level=t.consumeInt();break;case a.k.Annot_p:this.p.open(t);break;case a.k.Annot_annot_type:this.annot_type=t.consumeInt();break;case a.k.End:return;default:console.log("Syntax error in FlowAnnot:",e),t.consumeLine()}}}get_borders(t,e,n){if(n&&n.annotv[this.number]&&this.display_level===s.f.One&&this.annot_type===s.a.MultiLine){let o=this.measure_annot_text(n.annotv[this.number],8+2*this.text_size,this.ctx.base_zoom_factor);e.set(r.i.union(e,new r.i(t.x+this.p.x,t.y+this.p.y,t.x+this.p.x+o.width,t.y+this.p.y+o.height)))}}measure_annot_text(t,e,n){if(this.annot_type===s.a.OneLine){let r=this.ctx.gdraw.getTextExtent(t,this.draw_type,i.a.Helvetica,e);return{width:r.width/n,height:r.height/n,rows:1}}if(this.annot_type===s.a.MultiLine){let r=this.ctx.gdraw.getTextExtent(t,this.draw_type,i.a.Helvetica,e);return{width:r.width/n,height:r.height/n,rows:Math.max(t.split("\n").length,1)}}}measure_annot(t){return Math.floor(this.ctx.zoom_factor/this.ctx.base_zoom_factor*(this.text_size+4)-4)<0?{width:0,height:0,rows:0}:this.measure_annot_text(t,this.tsize(this.text_size),this.ctx.zoom_factor)}configure_annotations(t){if(!t.annotv[this.number])return;this.relative_pos&&(t.rel_annot_x[this.number]=t.relative_annot_x);let e=this.measure_annot(t.annotv[this.number]);t.relative_annot_x=Math.max(this.p.x,t.rel_annot_x[this.number])+e.width+this.ctx.annotation_space}}},function(t,e,n){"use strict";n.d(e,"a",function(){return M});var r=n(15),o=n(3),i=n(0),s=n(2),a=n(1),l=n(12),c=n(13),u=n(7),h=n(14),_=n(19);const f=8,d=500,g=500,p=111,C=1e4,x=1e-4;var y,w;!function(t){t[t.RightToUp=0]="RightToUp",t[t.RightToDown=1]="RightToDown",t[t.UpToLeft=2]="UpToLeft",t[t.UpToRight=3]="UpToRight",t[t.DownToLeft=4]="DownToLeft",t[t.DownToRight=5]="DownToRight",t[t.LeftToUp=6]="LeftToUp",t[t.LeftToDown=7]="LeftToDown",t[t.Sharp=8]="Sharp"}(y||(y={})),function(t){t[t.Vert=0]="Vert",t[t.Horiz=1]="Horiz"}(w||(w={}));class A{constructor(t,e,n,r){this.x=t,this.ly=e,this.uy=n,this.dest=r}}class b{constructor(t,e,n,r){this.y=t,this.lx=e,this.ux=n,this.dest=r}}let m,v,k=new Array,S=new Array,T=new Array,E=new i.f,O=function(t,e){return t.x<E.x&&e.x>E.x?1:e.x<E.x&&t.x>E.x?-1:Number(Math.abs(t.x-E.x)>Math.abs(e.x-E.x))},R=function(t,e){return t.x>E.x&&e.x<E.x?1:e.x>E.x&&t.x<E.x?-1:Number(Math.abs(t.x-E.x)>Math.abs(e.x-E.x))},L=function(t,e){return Number(Math.abs(t.y-E.y)>Math.abs(e.y-E.y))},I=function(t,e){return v.obst.ll.y<t.y&&t.y<v.obst.ur.y&&t.lx>E.x&&!(v.obst.ll.y<e.y&&e.y<v.obst.ur.y&&e.lx>E.x)?1:v.obst.ll.y<e.y&&e.y<v.obst.ur.y&&e.lx>E.x&&!(v.obst.ll.y<t.y&&t.y<v.obst.ur.y&&t.lx>E.x)?-1:v.obst.ur.y<m.obst.ll.y&&v.obst.ur.y<t.y&&t.y<m.obst.ll.y&&e.y<v.obst.ll.y?-1:v.obst.ur.y<m.obst.ll.y&&v.obst.ur.y<e.y&&e.y<m.obst.ll.y&&t.y<v.obst.ll.y?1:v.obst.ll.y>m.obst.ur.y&&m.obst.ur.y<t.y&&t.y<v.obst.ll.y&&(e.y<m.obst.ll.y||e.y>v.obst.ur.y)?-1:v.obst.ll.y>m.obst.ur.y&&m.obst.ur.y<e.y&&e.y<v.obst.ll.y&&(t.y<m.obst.ll.y||t.y>v.obst.ur.y)?1:Number(Math.abs(t.y-E.y)>Math.abs(e.y-E.y))},B=function(t,e){return v.obst.ll.y<t.y&&t.y<v.obst.ur.y&&t.lx<E.x&&!(v.obst.ll.y<e.y&&e.y<v.obst.ur.y&&e.lx<E.x)?1:v.obst.ll.y<e.y&&e.y<v.obst.ur.y&&e.lx<E.x&&!(v.obst.ll.y<t.y&&t.y<v.obst.ur.y&&t.lx<E.x)?-1:v.obst.ur.y<m.obst.ll.y&&v.obst.ur.y<t.y&&t.y<m.obst.ll.y&&(e.y<m.obst.ll.y||e.y>v.obst.ur.y)?-1:v.obst.ur.y<m.obst.ll.y&&v.obst.ur.y<e.y&&e.y<m.obst.ll.y&&(t.y<m.obst.ll.y||t.y>v.obst.ur.y)?1:v.obst.ll.y>m.obst.ur.y&&m.obst.ur.y<t.y&&t.y<v.obst.ll.y&&e.y>v.obst.ur.y?-1:v.obst.ll.y>m.obst.ur.y&&m.obst.ur.y<e.y&&e.y<v.obst.ll.y&&t.y>v.obst.ur.y?1:Number(Math.abs(t.y-E.y)>Math.abs(e.y-E.y))};class M extends i.i{constructor(t){super(),this.points=new Array(8),this.cc=null,this.p_num=0,this.l_num=0,this.a_num=0,this.arrow_num=0,this.ref_num=0,this.c_name="",this.trace_object="",this.trace_attribute="",this.trace_attr_type=0,this.temporary_ref=!1,this.highlight=!1,this.dimmed=!1,this.hot=!1,this.ctx=t,this.line_a=new l.a(t),this.arc_a=new l.a(t),this.arrow_a=new l.a(t),this.ref_a=new l.a(t);for(let t=0;t<8;t++)this.points[t]=new i.f}draw(t){let e=new u.a(this.ctx);this.temporary_ref||this.cc.con_type===s.b.Reference?this.ref_a.draw(e,this.highlight,this.dimmed,this.hot,null):(this.line_a.draw(e,this.highlight,this.dimmed,this.hot,null),this.arc_a.draw(e,this.highlight,this.dimmed,this.hot,null),this.arrow_a.draw(e,this.highlight,this.dimmed,this.hot,null))}open(t){for(;;){let e=t.consumeInt();switch(e){case a.k.Con:break;case a.k.Con_cc:{let e=t.consumeLine();this.cc=this.ctx.a_cc.find(t=>t.cc_name===e),this.cc||console.log("FlowCon:conclass not found: "+e);break}case a.k.Con_c_name:this.c_name=t.consumeLine();break;case a.k.Con_x_right:this.ur.x=t.consumeFloat();break;case a.k.Con_x_left:this.ll.x=t.consumeFloat();break;case a.k.Con_y_high:this.ur.y=t.consumeFloat();break;case a.k.Con_y_low:this.ll.y=t.consumeFloat();break;case a.k.Con_dest_node:{let e=t.consumeLine();this.dest_node=this.ctx.a.find(t=>t instanceof c.a&&t.n_name===e),this.dest_node||console.log("FlowCon:dest_node not found: "+e);break}case a.k.Con_source_node:{let e=t.consumeLine();this.source_node=this.ctx.a.find(t=>t instanceof c.a&&t.n_name===e),this.source_node||console.log("FlowCon:source_node not found: "+e);break}case a.k.Con_dest_conpoint:case a.k.Con_source_conpoint:case a.k.Con_dest_direction:case a.k.Con_source_direction:t.consumeLine();break;case a.k.Con_line_a:this.line_a.open(t);break;case a.k.Con_arc_a:this.arc_a.open(t);break;case a.k.Con_arrow_a:this.arrow_a.open(t);break;case a.k.Con_ref_a:this.ref_a.open(t);break;case a.k.Con_p_num:this.p_num=t.consumeInt();break;case a.k.Con_l_num:this.l_num=t.consumeInt();break;case a.k.Con_a_num:this.a_num=t.consumeInt();break;case a.k.Con_arrow_num:this.arrow_num=t.consumeInt();break;case a.k.Con_ref_num:this.ref_num=t.consumeInt();break;case a.k.Con_point_x:for(let e=0;e<this.p_num;e++)this.points[e].x=t.consumeFloat();break;case a.k.Con_point_y:for(let e=0;e<this.p_num;e++)this.points[e].y=t.consumeFloat();break;case a.k.Con_source_ref_cnt:case a.k.Con_dest_ref_cnt:t.consumeLine();break;case a.k.Con_trace_object:this.trace_object=t.consumeLine();break;case a.k.Con_trace_attribute:this.trace_attribute=t.consumeLine();break;case a.k.Con_trace_attr_type:this.trace_attr_type=t.consumeInt();break;case a.k.Con_temporary_ref:this.temporary_ref=t.consumeBool();break;case a.k.End:return;default:console.log("Syntax error in FlowCon:",e),t.consumeLine()}}}connect(){}scan(){}get_con_borders(){this.ll.x=this.ll.y=1e10,this.ur.x=this.ur.y=-1e10;let t=this;this.temporary_ref||this.cc.con_type===s.b.Reference?this.ref_a.get_borders(new i.f,t,null):(this.line_a.get_borders(new i.f,t,null),this.arc_a.get_borders(new i.f,t,null))}move_ref(t,e){let n=new i.f(t.x-this.ctx.refcon_width/2,t.y-this.ctx.refcon_height/2);this.source_direction===s.e.Center?n.y=t.y-(this.source_ref_cnt-.5)*this.ctx.refcon_height:this.source_direction===s.e.Right?n.y=t.x+this.source_ref_cnt*this.ctx.refcon_width:this.source_direction===s.e.Left?n.y=t.x-(this.source_ref_cnt+1)*this.ctx.refcon_width:this.source_direction===s.e.Up?n.y=t.y+this.source_ref_cnt*this.ctx.refcon_height:this.source_direction===s.e.Down&&(n.y=t.y-(this.source_ref_cnt+1)*this.ctx.refcon_height);let r=new i.f(n.x+.2*this.ctx.refcon_width,n.y+.8*this.ctx.refcon_height),a=0===this.ref_a.length;a?(this.ref_a.push(new h.a(this.ctx,n.x,n.y,this.ctx.refcon_width,this.ctx.refcon_height,o.a.Line,this.ctx.refcon_linewidth)),this.ref_a.push(new _.a(this.ctx,"R"+String(this.ctx.refcon_cnt),r.x,r.y,o.a.TextHelveticaBold,this.ctx.refcon_textsize)),this.ctx.refcon_cnt++):(this.ref_a[0].move(n),this.ref_a[1].move(r)),n.x=e.x-this.ctx.refcon_width/2,n.y=e.y-this.ctx.refcon_height/2,this.dest_direction===s.e.Center?n.y=e.y-(this.dest_ref_cnt-.5)*this.ctx.refcon_height:this.dest_direction===s.e.Right?n.x=e.x+this.dest_ref_cnt*this.ctx.refcon_width:this.dest_direction===s.e.Left?n.x=e.x-(this.dest_ref_cnt+1)*this.ctx.refcon_width:this.dest_direction===s.e.Up?n.y=e.y-this.dest_ref_cnt*this.ctx.refcon_height:this.dest_direction===s.e.Down&&(n.y=e.y-(this.dest_ref_cnt+1)*this.ctx.refcon_height),r.x=n.x+.2*this.ctx.refcon_width,r.y=n.y+.8*this.ctx.refcon_height,a?(this.ref_a.push(new h.a(this.ctx,n.x,n.y,this.ctx.refcon_width,this.ctx.refcon_height,o.a.Line,this.ctx.refcon_linewidth)),this.ref_a.push(new _.a(this.ctx,"R"+String(this.ctx.refcon_cnt),r.x,r.y,o.a.TextHelveticaBold,this.ctx.refcon_textsize))):(this.ref_a[0].move(n),this.ref_a[1].move(r))}move(t,e){let n=new i.f(t.x/this.ctx.zoom_factor,t.y/this.ctx.zoom_factor);if(this.movement_type===a.h.Route||e)this.reconfigure();else{for(let t=0;t<this.p_num;t++)this.points[t].x+=n.x,this.points[t].y+=n.y;if(this.temporary_ref||this.cc.con_type===s.b.Reference)for(let t=0;t<this.ref_a.length;t++)this.ref_a[t].shift(n);else{for(let t=0;t<this.line_a.length;t++)this.line_a[t].shift(n);for(let t=0;t<this.arc_a.length;t++)this.arc_a[t].shift(n);for(let t=0;t<this.arrow_a.length;t++)this.arrow_a[t].shift(n)}this.get_con_borders()}this.ctx.set_dirty()}move_noerase(t,e){if(this.movement_type===a.h.Route||e)this.ctx.set_nodraw(),this.reconfigure(),this.ctx.reset_nodraw();else{for(let e=0;e<this.p_num;e++)this.points[e].x+=t.x/this.ctx.zoom_factor,this.points[e].y+=t.y/this.ctx.zoom_factor;this.l_num=this.a_num=0,this.temporary_ref||this.cc.con_type===s.b.Reference?this.draw_routed_roundcorner(this.p_num,this.points):this.draw_routed(this.p_num,this.points),this.get_con_borders()}this.ctx.set_dirty()}reconfigure(){let t=this.source_node.get_conpoint(this.source_conpoint);if(!t)return void console.log("FlowCon: no such conpoint:",this.source_conpoint,"\n");let e=this.dest_node.get_conpoint(this.dest_conpoint);if(e){switch(this.cc.con_type){case s.b.Straight:this.line_a[0].move(t.p,e.p);break;case s.b.Reference:this.move_ref(t.p,e.p);break;case s.b.StraightOneArrow:this.line_a[0].move(t.p,e.p),this.arrow_a[0].move(t.p,e.p);break;case s.b.StepDiv:case s.b.StepConv:case s.b.TransDiv:case s.b.TransConv:this.con_route_grafcet(this.cc.con_type,t.p,e.p);break;case s.b.Fixed:this.p_num?(this.line_a[0].move(t.p,this.points[0]),this.line_a[this.p_num].move(this.points[this.p_num-1],e.p)):this.line_a[0].move(t.p,e.p);case s.b.Routed:0===this.con_route(t.p,e.p)?(this.temporary_ref||(this.temporary_ref=!0,this.a_num=this.l_num=this.p_num=0,this.source_ref_cnt=this.source_node.refcon_cnt[this.source_conpoint]++,this.dest_ref_cnt=this.dest_node.refcon_cnt[this.dest_conpoint]++),this.move_ref(t.p,e.p)):this.temporary_ref&&(this.temporary_ref=!1,this.source_node.conpoint_refcon_reconfig(this.source_conpoint),this.dest_node.conpoint_refcon_reconfig(this.dest_conpoint));case s.b.AllFixed:}this.get_con_borders()}else console.log("FlowCon: no such conpoint:",this.dest_conpoint,"\n")}link_insert(t){return this.link=t,this}con_route(t,e){let n=Math.min(this.source_node.ll.x,this.dest_node.ll.x)-10*this.ctx.draw_delta,r=Math.min(this.source_node.ll.y,this.dest_node.ll.y)-10*this.ctx.draw_delta,o=Math.min(this.source_node.ur.x,this.dest_node.ur.x)+10*this.ctx.draw_delta,s=Math.min(this.source_node.ur.y,this.dest_node.ur.y)+10*this.ctx.draw_delta,a=this.ctx.get_document(t);return a&&(n=Math.max(n,a.ll.x),o=Math.max(o,a.ur.x),r=Math.max(r,a.ll.y),s=Math.max(s,a.ur.y),e.x<a.ll.x||e.x>a.ur.x||e.y<a.ll.y||e.y>a.ur.y||t.x<a.ll.x||t.x>a.ur.x||t.y<a.ll.y||t.y>a.ur.y)?0:this.con_route_area(new i.i(n,r,o,s))}con_route_area(t){let e=null,n=null;for(let r=0;r<this.ctx.a.length;r++){let o=this.ctx.a[r];o.in_area(t)&&(o instanceof c.a&&(e=o.link_insert(e)),o instanceof M&&o!=this&&(n=o.link_insert(n)))}if(!e)return 0;let r=this.dest_node.get_conpoint(this.dest_conpoint);if(!r)return 0;let o=this.source_node.get_conpoint(this.source_conpoint);if(!o)return 0;if(Math.abs(r.p.y-o.p.y)<x&&(r.dir==s.e.Right&&o.dir==s.e.Left&&r.p.x<=o.p.x||r.dir==s.e.Left&&o.dir==s.e.Right&&r.p.x>=o.p.x)){if(!this.nodelist_find(e,t=>t.in_horiz_line(r.p.y,Math.min(r.p.x,o.p.x)+this.ctx.draw_delta+x,Math.max(r.p.x,o.p.x)-this.ctx.draw_delta-x))){this.points[0]=r.p,this.points[1]=o.p;let t=this.p_num=2;return this.cc.corner==s.c.Rounded?this.draw_routed_roundcorner(t,[r.p,o.p]):this.draw_routed(t,[r.p,o.p]),1}}else if(Math.abs(r.p.x-o.p.x)<x&&(r.dir==s.e.Up&&o.dir==s.e.Down&&r.p.y<=o.p.y||r.dir==s.e.Down&&o.dir==s.e.Up&&r.p.y>=o.p.y)){if(!this.nodelist_find(e,t=>t.in_vert_line(r.p.x,Math.min(r.p.y,o.p.y)+this.ctx.draw_delta+x,Math.max(r.p.y,o.p.y)-this.ctx.draw_delta-x))){this.points[0]=r.p,this.points[1]=o.p;let t=this.p_num=2;return this.cc.corner==s.c.Rounded?this.draw_routed_roundcorner(t,[r.p,o.p]):this.draw_routed(t,[r.p,o.p]),1}}k.length=0,this.find_vert_line_right(t.ll.x,t.ll.y,t.ur.y,e,e,n,n,t.ll.y,t.ur.y),this.find_vert_line_left(t.ur.x,t.ll.y,t.ur.y,e,e,n,n,t.ll.y,t.ur.y);for(let r=e[0];r&&(r.obst.ur.x<t.ur.x&&this.find_vert_line_right(r.obst.ur.x,r.obst.ll.y,r.obst.ur.y,e,r.link,n,n,t.ll.y,t.ur.y),r.obst.ll.x>t.ll.x&&this.find_vert_line_left(r.obst.ll.x,r.obst.ll.y,r.obst.ur.y,e,r.link,n,n,t.ll.y,t.ur.y),!(k.length>g-3));r=r.link);S.length=0,this.find_horiz_line_up(t.ll.y,t.ll.x,t.ur.x,e,e,n,n,t.ll.x,t.ur.x),this.find_horiz_line_down(t.ur.y,t.ll.x,t.ur.x,e,e,n,n,t.ll.x,t.ur.x);for(let r=e[0];r&&(r.obst.ur.y<t.ur.y&&this.find_horiz_line_up(r.obst.ur.y,r.obst.ll.x,r.obst.ur.x,e,r.link,n,n,t.ll.x,t.ur.x),r.obst.ll.y>t.ll.y&&this.find_horiz_line_down(r.obst.ll.y,r.obst.ll.x,r.obst.ur.x,e,r.link,n,n,t.ll.x,t.ur.x),!(S.length>g-3));r=r.link);if(r.dir==s.e.Center)switch(o.dir){case s.e.Center:r.dir=o.p.y>r.p.y?s.e.Up:s.e.Down,o.dir=r.p.x>o.p.x?s.e.Right:s.e.Left;break;case s.e.Right:case s.e.Left:r.dir=o.p.y>r.p.y?s.e.Up:s.e.Down;break;case s.e.Up:case s.e.Down:r.dir=o.p.x>r.p.y?s.e.Right:s.e.Left}else if(o.dir==s.e.Center)switch(r.dir){case s.e.Right:case s.e.Left:o.dir=r.p.y>o.p.y?s.e.Up:s.e.Down;break;case s.e.Up:case s.e.Down:o.dir=r.p.x>o.p.x?s.e.Right:s.e.Left}switch(r.dir){case s.e.Right:S.push(new b(r.p.y,r.p.x,t.ur.x-this.ctx.draw_delta,!0)),this.find_horiz_line_right_border(r.p.y,r.p.x,r.p.x,S[S.length-1].ux,e,n);break;case s.e.Left:S.push(new b(r.p.y,t.ll.x+this.ctx.draw_delta,r.p.x,!0)),this.find_horiz_line_left_border(r.p.y,r.p.x,r.p.x,S[S.length-1].lx,e,n);break;case s.e.Up:k.push(new A(r.p.x,r.p.y,t.ur.y-this.ctx.draw_delta,!0)),this.find_vert_line_high_border(r.p.x,r.p.y,r.p.y,k[k.length-1].uy,e,n);break;case s.e.Down:k.push(new A(r.p.x,t.ll.y+this.ctx.draw_delta,r.p.y,!0)),this.find_vert_line_low_border(r.p.x,r.p.y,r.p.y,k[k.length-1].ly,e,n);break;case s.e.Center:}switch(this.sort_lines(r.p,r.dir,o.p,o.dir),this.current_line_cnt=1e3,this.loop_cnt=0,T.length=0,o.dir){case s.e.Right:S.push(new b(o.p.y,o.p.x,t.ur.x-this.ctx.draw_delta,!1)),this.find_horiz_line_right_border(o.p.y,o.p.x,o.p.x,S[S.length-1].ux,e,n),T[0].horiz[0]=S[S.length-1],T[0].horiz_p[0]=o.p,T[0].horiz_cnt=1,T[0].vert_cnt=0,T[0].complete=!1,T[0].start_type=w.Horiz,this.find_horiz_line_next_line(S[S.length-1]);break;case s.e.Left:S.push(new b(o.p.y,t.ll.x+this.ctx.draw_delta,o.p.x,!1)),this.find_horiz_line_left_border(o.p.y,o.p.x,o.p.x,S[S.length-1].lx,e,n),T[0].horiz[0]=S[S.length-1],T[0].horiz_p[0]=o.p,T[0].horiz_cnt=1,T[0].vert_cnt=0,T[0].complete=!1,T[0].start_type=w.Horiz,this.find_horiz_line_next_line(S[S.length-1]);break;case s.e.Up:k.push(new A(o.p.x,o.p.y,t.ur.y-this.ctx.draw_delta,!1)),this.find_vert_line_high_border(o.p.x,o.p.y,o.p.y,k[k.length-1].uy,e,n),T[0].vert[0]=k[k.length-1],T[0].vert_p[0]=o.p,T[0].vert_cnt=1,T[0].horiz_cnt=0,T[0].complete=!1,T[0].start_type=w.Vert,this.find_vert_line_next_line(k[k.length-1-1]);break;case s.e.Down:k.push(new A(o.p.x,t.ll.y+this.ctx.draw_delta,o.p.y,!1)),this.find_vert_line_low_border(o.p.x,o.p.y,o.p.y,k[k.length-1].ly,e,n),T[0].vert[0]=k[k.length-1],T[0].vert_p[0]=o.p,T[0].vert_cnt=1,T[0].horiz_cnt=0,T[0].complete=!1,T[0].start_type=w.Vert,this.find_vert_line_next_line(k[k.length-1-1]);break;case s.e.Center:}let i=0,a=1e4;for(let t=0;t<T.length;t++)T[t].complete&&(T[t].start_type==w.Horiz?a>T[t].horiz_cnt&&(a=T[t].horiz_cnt,i=t):a>T[t].horiz_cnt&&(a=T[t].vert_cnt,i=t));if(!T.length)return 0;let l=0,u=Array(8);if(T[i].start_type==w.Horiz)for(let t=0;t<T[i].horiz_cnt;t++)this.points[l].x=u[l].x=T[i].horiz_p[t].x,this.points[l].y=u[l].y=T[i].horiz_p[t].y,l++,t<T[i].vert_cnt&&(this.points[l].x=u[l].x=T[i].vert_p[t].x,this.points[l].y=u[l].y=T[i].vert_p[t].y,l++);else for(let t=0;t<T[i].vert_cnt;t++)this.points[l].x=u[l].x=T[i].vert_p[t].x,this.points[l].y=u[l].y=T[i].vert_p[t].y,l++,t<T[i].horiz_cnt&&(this.points[l].x=u[l].x=T[i].horiz_p[t].x,this.points[l].y=u[l].y=T[i].horiz_p[t].y,l++);return l>f-1?0:(this.points[l].x=u[l].x=r.p.x,this.points[l].y=u[l].y=r.p.y,l++,this.p_num=l,this.cc.corner==s.c.Rounded?this.draw_routed_roundcorner(l,u):this.draw_routed(l,u),1)}conpoint_refcon_redraw(t,e){if(this.temporary_ref||this.cc.con_type===s.b.Reference)if(this.source_node===t&&e===this.source_conpoint){let t=this.source_node.get_conpoint(this.source_conpoint),n=this.dest_node.get_conpoint(this.dest_conpoint);this.source_ref_cnt=this.source_node.refcon_cnt[e]++,this.move_ref(t.p,n.p)}else if(this.dest_node===t&&e===this.dest_conpoint){let t=this.source_node.get_conpoint(this.source_conpoint),n=this.dest_node.get_conpoint(this.dest_conpoint);this.dest_ref_cnt=this.dest_node.refcon_cnt[e]++,this.move_ref(t.p,n.p)}}con_route_grafcet(t,e,n){let r=new Array(8),o=this.ctx.grafcet_con_delta;if(t===s.b.StepDiv){let t=0;r[t++]=e,r[t++]=new i.f(e.x,e.y+o),e.y+o<n.y?r[t++]=new i.f(n.x,e.y+o):e.x>n.x?(r[t++]=new i.f(n.x+2*o,e.y+o),r[t++]=new i.f(n.x+2*o,n.y-o),r[t++]=new i.f(n.x,n.y-o)):(r[t++]=new i.f(n.x-2*o,e.y+o),r[t++]=new i.f(n.x-2*o,n.y-o),r[t++]=new i.f(n.x,n.y-o)),r[t++]=n,this.p_num=t,this.draw_routed(t,r)}else if(t===s.b.StepConv){let t=0;r[t++]=n,r[t++]=new i.f(n.x,n.y-o),n.y-o>e.y?r[t++]=new i.f(e.x,n.y-o):n.x>e.x?(r[t++]=new i.f(e.x+2*o,n.y-o),r[t++]=new i.f(e.x+2*o,e.y+o),r[t++]=new i.f(e.x,e.y+o)):(r[t++]=new i.f(e.x-2*o,n.y-o),r[t++]=new i.f(e.x-2*o,e.y+o),r[t++]=new i.f(e.x,e.y+o)),r[t++]=e,this.p_num=t,this.draw_routed(t,r)}else if(t===s.b.TransDiv){let t=0;r[t++]=e,r[t++]=new i.f(e.x,e.y+.8*o),e.y+o<n.y?(r[t++]=new i.f(n.x,e.y+.8*o),r[t++]=new i.f(e.x,e.y+1.2*o),r[t++]=new i.f(n.x,e.y+1.2*o)):e.x>n.x?(r[t++]=new i.f(n.x+2*o,e.y+.8*o),r[t++]=new i.f(e.x,e.y+1.2*o),r[t++]=new i.f(n.x+2*o,e.y+1.2*o),r[t++]=new i.f(n.x+2*o,n.y-o),r[t++]=new i.f(n.x,n.y-o)):(r[t++]=new i.f(n.x-2*o,e.y+.8*o),r[t++]=new i.f(e.x,e.y+1.2*o),r[t++]=new i.f(n.x-2*o,e.y+1.2*o),r[t++]=new i.f(n.x-2*o,n.y-o),r[t++]=new i.f(n.x,n.y-o)),r[t++]=n,this.p_num=t,this.draw_routed_trans(t,r)}else if(t===s.b.TransConv){let t=0;r[t++]=n,r[t++]=new i.f(n.x,n.y-.8*o),n.y-o>e.y?(r[t++]=new i.f(e.x,n.y-.8*o),r[t++]=new i.f(n.x,n.y-1.2*o),r[t++]=new i.f(e.x,n.y-1.2*o)):n.x>e.x?(r[t++]=new i.f(e.x+2*o,n.y-.8*o),r[t++]=new i.f(n.x,n.y-1.2*o),r[t++]=new i.f(e.x+2*o,n.y-1.2*o),r[t++]=new i.f(e.x+2*o,e.y+o),r[t++]=new i.f(e.x,e.y+o)):(r[t++]=new i.f(e.x-2*o,n.y-.8*o),r[t++]=new i.f(n.x,n.y-1.2*o),r[t++]=new i.f(e.x-2*o,n.y-1.2*o),r[t++]=new i.f(e.x-2*o,e.y+o),r[t++]=new i.f(e.x,e.y+o)),r[t++]=e,this.p_num=t,this.draw_routed_trans(t,r)}this.points=r}draw_routed(t,e){for(let n=0;n<t-1;n++)this.line_a[n].move(e[n],e[n+1]);this.p_num=t,this.l_num=t-1,this.ctx.set_dirty()}draw_routed_trans(t,e){let n=0;for(let r=0;r<t-1;r++)2!==r&&(this.line_a[n].move(e[r],e[r+1]),n++);this.p_num=t,this.l_num=n,this.ctx.set_dirty()}draw_routed_roundcorner(t,e){let n=new Array(8),r=new Array(8);for(let o=1;o<t-1;o++){let i=this.cc.round_corner_amount;if(1==o&&Math.abs(e[0].y-e[1].y)<Number.EPSILON&&Math.abs(e[0].x-e[1].x)<Number.EPSILON&&(n[0]=y.Sharp,o!=t-2))n[o]=y.Sharp,o++;else if(Math.abs(e[o-1].y-e[o].y)<Number.EPSILON){if(Math.abs(e[o].y-e[o+1].y)<Number.EPSILON&&(n[o-1]=y.Sharp,o!=t-2)){n[o]=y.Sharp,o++;continue}e[o-1].x<e[o].x&&e[o].y<e[o+1].y?n[o-1]=y.RightToUp:e[o-1].x<e[o].x&&e[o].y>e[o+1].y?n[o-1]=y.RightToDown:e[o-1].x>e[o].x&&e[o].y<e[o+1].y?n[o-1]=y.LeftToUp:e[o-1].x>e[o].x&&e[o].y>e[o+1].y&&(n[o-1]=y.LeftToDown),Math.abs(e[o].x-e[o-1].x)<2*i?(r[o-1].x=Math.abs(e[o].x-e[o-1].x)/2,o>1&&(r[o-2].x=r[o-1].x)):r[o-1].x=i,r[o-1].y=i}else if(Math.abs(e[o-1].x-e[o].x)<Number.EPSILON){if(Math.abs(e[o].x-e[o+1].x)<Number.EPSILON&&(n[o-1]=y.Sharp,o!=t-2)){n[o]=y.Sharp,o++;continue}e[o-1].y<e[o].y&&e[o].x<e[o+1].x?n[o-1]=y.UpToRight:e[o-1].y<e[o].y&&e[o].x>e[o+1].x?n[o-1]=y.UpToLeft:e[o-1].y>e[o].y&&e[o].x<e[o+1].x?n[o-1]=y.DownToRight:e[o-1].y>e[o].y&&e[o].x>e[o+1].x&&(n[o-1]=y.DownToLeft),Math.abs(e[o].y-e[o-1].y)<2*i?(r[o-1].y=Math.abs(e[o].y-e[o-1].y)/2,o>1&&(r[o-2].y=r[o-1].y)):r[o-1].y=i,r[o-1].x=i}else n[o-1]=y.Sharp}let o=new Array(8),s=new Array(8),a=new Array(8),l=new Array(8),c=new Array(8);o[0]=e[0];for(let u=1;u<t-1;u++)switch(n[u-1]){case y.RightToUp:o[u]=new i.f(e[u].x,e[u].y+r[u-1].y),s[u-1]=new i.f(e[u].x-r[u-1].x,e[u].y),a[u-1]=new i.f(e[u].x-2*r[u-1].x,e[u].y),l[u-1]=new i.f(e[u].x,e[u].y+2*r[u-1].y),c[u-1]=new i.f(0,90);break;case y.RightToDown:o[u]=new i.f(e[u].x,e[u].y-r[u-1].y),s[u-1]=new i.f(e[u].x-r[u-1].x,e[u].y),a[u-1]=new i.f(e[u].x-2*r[u-1].x,e[u].y-2*r[u-1].y),l[u-1]=e[u],c[u-1]=new i.f(270,90);break;case y.LeftToUp:o[u]=new i.f(e[u].x,e[u].y+r[u-1].y),s[u-1]=new i.f(e[u].x+r[u-1].x,e[u].y),a[u-1]=e[u],l[u-1]=new i.f(e[u].x+2*r[u-1].x,e[u].y+2*r[u-1].y),c[u-1]=new i.f(90,90);break;case y.LeftToDown:o[u]=new i.f(e[u].x,e[u].y-r[u-1].y),s[u-1]=new i.f(e[u].x+r[u-1].x,e[u].y),a[u-1]=new i.f(e[u].x,e[u].y-2*r[u-1].y),l[u-1]=new i.f(e[u].x+2*r[u-1].x,e[u].y),c[u-1]=new i.f(180,90);break;case y.UpToRight:o[u]=new i.f(e[u].x+r[u-1].x,e[u].y),s[u-1]=new i.f(e[u].x,e[u].y-r[u-1].y),a[u-1]=new i.f(e[u].x,e[u].y-2*r[u-1].y),l[u-1]=new i.f(e[u].x+2*r[u-1].x,e[u].y),c[u-1]=new i.f(180,90);break;case y.UpToLeft:o[u]=new i.f(e[u].x-r[u-1].x,e[u].y),s[u-1]=new i.f(e[u].x,e[u].y-r[u-1].y),a[u-1]=new i.f(e[u].x-2*r[u-1].x,e[u].y-2*r[u-1].y),l[u-1]=e[u],c[u-1]=new i.f(270,90);break;case y.DownToRight:o[u]=new i.f(e[u].x+r[u-1].x,e[u].y),s[u-1]=new i.f(e[u].x,e[u].y+r[u-1].y),a[u-1]=e[u],l[u-1]=new i.f(e[u].x+2*r[u-1].x,e[u].y+2*r[u-1].y),c[u-1]=new i.f(90,90);break;case y.DownToLeft:o[u]=new i.f(e[u].x-r[u-1].x,e[u].y),s[u-1]=new i.f(e[u].x,e[u].y+r[u-1].y),a[u-1]=new i.f(e[u].x-2*r[u-1].x,e[u].y),l[u-1]=new i.f(e[u].x,e[u].y+2*r[u-1].y),c[u-1]=new i.f(0,90);break;case y.Sharp:s[u-1]=e[u],o[u]=e[u],a[u-1]=new i.f,l[u-1]=new i.f}s[t-2]=e[t-1];for(let e=0;e<t-1;e++)this.line_a[e].move(o[e],s[e]);for(let e=0;e<t-2;e++)this.arc_a[e].move(a[e],l[e],c[e].x,c[e].y);this.p_num=t,this.l_num=t-1,this.a_num=t-2,this.ctx.set_dirty()}find_horiz_line_next_line(t){if(this.loop_cnt++,this.loop_cnt>C)return 0;if(T.length>=d)return 0;for(let e=0;e<k.length;e++)if(t.lx<=k[e].x&&k[e].x<=t.ux&&k[e].ly<=t.y&&t.y<=k[e].uy)if(k[e].dest){if(T.length>=d)return 0;if(T[T.length-1].vert_cnt+T[T.length-1].horiz_cnt>=this.current_line_cnt-1)return 1;if(T.push(Object(r.cloneDeep)(T[T.length-1])),T[T.length-1].vert[T[T.length-1].vert_cnt]=k[e],T[T.length-1].vert_p[T[T.length-1].vert_cnt].x=k[e].x,T[T.length-1].vert_p[T[T.length-1].vert_cnt].y=t.y,T[T.length-1].vert_cnt++,this.current_line_cnt=T[T.length-1].vert_cnt+T[T.length-1].horiz_cnt,T[T.length-1].complete=!0,T.length++,this.current_line_cnt==this.ideal_line_cnt)return p}else if(T[T.length-1].vert_cnt+T[T.length-1].horiz_cnt<this.current_line_cnt-1&&T[T.length-1].vert_cnt+T[T.length-1].horiz_cnt<f-1){if(!T[T.length-1].vert.find(t=>t==k[e])){let n=T[T.length-1].vert_cnt,r=T[T.length-1].horiz_cnt;T[T.length-1].vert[T[T.length-1].vert_cnt]=k[e],T[T.length-1].vert_p[T[T.length-1].vert_cnt].x=k[e].x,T[T.length-1].vert_p[T[T.length-1].vert_cnt].y=t.y,T[T.length-1].vert_cnt++;let o=this.find_vert_line_next_line(k[e]);if(o==p||Object(i.o)(o))return o;T[T.length-1].vert_cnt=n,T[T.length-1].horiz_cnt=r}}return 1}find_vert_line_next_line(t){if(this.loop_cnt++,this.loop_cnt>C)return 0;if(T.length>=d)return 0;for(let e=0;e<S.length;e++)if(t.ly<=S[e].y&&S[e].y<=t.uy&&S[e].lx<=t.x&&t.x<=S[e].ux)if(S[e].dest){if(T.length>=d)return 0;if(T[T.length-1].vert_cnt+T[T.length-1].horiz_cnt>=this.current_line_cnt-1)return 1;if(T.push(Object(r.cloneDeep)(T[T.length-1])),T[T.length-1].horiz[T[T.length-1].horiz_cnt]=S[e],T[T.length-1].horiz_p[T[T.length-1].horiz_cnt].y=S[e].y,T[T.length-1].horiz_p[T[T.length-1].horiz_cnt].x=t.x,T[T.length-1].horiz_cnt++,this.current_line_cnt=T[T.length-1].vert_cnt+T[T.length-1].horiz_cnt,T[T.length-1].complete=!0,T.length++,this.current_line_cnt==this.ideal_line_cnt)return p}else if(T[T.length-1].vert_cnt+T[T.length-1].horiz_cnt<this.current_line_cnt-1&&T[T.length-1].vert_cnt+T[T.length-1].horiz_cnt<f-1){if(!T[T.length-1].horiz.find(t=>t==S[e])){let n=T[T.length-1].vert_cnt,r=T[T.length-1].horiz_cnt;T[T.length-1].horiz[T[T.length-1].horiz_cnt]=S[e],T[T.length-1].horiz_p[T[T.length-1].horiz_cnt].y=S[e].y,T[T.length-1].horiz_p[T[T.length-1].horiz_cnt].x=t.x,T[T.length-1].horiz_cnt++;let o=this.find_horiz_line_next_line(S[e]);if(o==p||Object(i.o)(o))return o;T[T.length-1].vert_cnt=n,T[T.length-1].horiz_cnt=r}}return 1}find_horiz_line_up(t,e,n,r,o,i,a,l,c){for(let s=o;s;s=s.link)if(s.obst.ll.y>t){let o,a;if(s.obst.ll.x>n?(a=s.obst.ll.x,o=n):s.obst.ur.x<e?(a=e,o=s.obst.ur.x):(o=Math.max(e,s.obst.ll.x),a=Math.min(n,s.obst.ur.x)),!this.nodelist_find(r,e=>e!=s&&e.in_area_exact(o,t,a,s.obst.ll.y))){let e=(t+s.obst.ll.y)/2;if(S.find(t=>Math.abs(t.y-e)<this.ctx.draw_delta))continue;S.push(new b((t+s.obst.ll.y)/2,l+this.ctx.draw_delta,c-this.ctx.draw_delta,!1)),this.find_horiz_line_left_border(S[S.length-1].y,o,S[S.length-1].ux,S[S.length-1].lx,r,i),this.find_horiz_line_right_border(S[S.length-1].y,a,S[S.length-1].lx,S[S.length-1].ux,r,i)}}for(let o=a;o;o=o.link)if(o!=this&&this.cc.con_type==s.b.Routed){let a=Number(!(o.source_direction==s.e.Right||o.source_direction==s.e.Left));for(;a<o.p_num-1;a+=2)if(o.points[a].y<t){let s,u,h=Math.min(o.points[a].x,o.points[a+1].x),_=Math.max(o.points[a].x,o.points[a+1].x);if(h>n?(u=h,s=n):_<e?(u=e,s=_):(s=Math.max(e,h),u=Math.min(n,_)),!this.nodelist_find(r,e=>e.in_area_exact(s,o.points[a].y,u,t))){let e=(t+o.points[a].y)/2;if(S.find(t=>Math.abs(t.y-e)<this.ctx.draw_delta))continue;if(S.push(new b((t+o.points[a].y)/2,l+this.ctx.draw_delta,c-this.ctx.draw_delta,!1)),this.find_horiz_line_left_border(S[S.length-1].y,s,S[S.length-1].ux,S[S.length-1].lx,r,i),this.find_horiz_line_right_border(S[S.length-1].y,u,S[S.length-1].lx,S[S.length-1].ux,r,i),S[S.length-1].ux<S[S.length-1].lx)continue}}}return 1}find_horiz_line_down(t,e,n,r,o,i,a,l,c){for(let s=o;s;s=s.link)if(s.obst.ur.y<t){let o,a;if(s.obst.ll.x>n?(a=s.obst.ll.x,o=n):s.obst.ur.x<e?(a=e,o=s.obst.ur.x):(o=Math.max(e,s.obst.ll.x),a=Math.min(n,s.obst.ur.x)),!this.nodelist_find(r,e=>e!=s&&e.in_area_exact(o,s.obst.ur.y,a,t))){let e=(t+s.obst.ur.y)/2;if(S.find(t=>Math.abs(t.y-e)<this.ctx.draw_delta))continue;S.push(new b((t+s.obst.ur.y)/2,l+this.ctx.draw_delta,c-this.ctx.draw_delta,!1)),this.find_horiz_line_left_border(S[S.length-1].y,o,S[S.length-1].ux,S[S.length-1].lx,r,i),this.find_horiz_line_right_border(S[S.length-1].y,a,S[S.length-1].lx,S[S.length-1].ux,r,i)}}for(let o=a;o;o=o.link)if(o!=this&&this.cc.con_type==s.b.Routed){let a=Number(!(o.source_direction==s.e.Right||o.source_direction==s.e.Left));for(;a<o.p_num-1;a+=2)if(o.points[a].y<t){let s,u,h=Math.min(o.points[a].x,o.points[a+1].x),_=Math.max(o.points[a].x,o.points[a+1].x);if(h>n?(u=h,s=n):_<e?(u=e,s=_):(s=Math.max(e,h),u=Math.min(n,_)),!this.nodelist_find(r,e=>e.in_area_exact(s,o.points[a].y,u,t))){let e=(t+o.points[a].y)/2;if(S.find(t=>Math.abs(t.y-e)<this.ctx.draw_delta))continue;if(S.push(new b((t+o.points[a].y)/2,l+this.ctx.draw_delta,c-this.ctx.draw_delta,!1)),this.find_horiz_line_left_border(S[S.length-1].y,s,S[S.length-1].ux,S[S.length-1].lx,r,i),this.find_horiz_line_right_border(S[S.length-1].y,u,S[S.length-1].lx,S[S.length-1].ux,r,i),S[S.length-1].ux<S[S.length-1].lx)continue}}}return 1}find_vert_line_right(t,e,n,r,o,i,a,l,c){for(let s=o;s;s=s.link)if(s.obst.ll.x>t){let o,a;if(s.obst.ll.y>n?(a=s.obst.ll.y,o=n):s.obst.ur.y<e?(a=e,o=s.obst.ur.y):(o=Math.max(e,s.obst.ll.y),a=Math.min(n,s.obst.ur.y)),!this.nodelist_find(r,e=>e!==s&&e.in_area_exact(t,o,s.obst.ll.x,a))){let e=(t+s.obst.ll.x)/2;if(k.find(t=>Math.abs(t.x-e)<this.ctx.draw_delta))continue;k.push(new A((t+s.obst.ll.x)/2,l+this.ctx.draw_delta,c-this.ctx.draw_delta,!1)),this.find_vert_line_low_border(k[k.length-1].x,o,k[k.length-1].uy,k[k.length-1].ly,r,i),this.find_vert_line_high_border(k[k.length-1].x,a,k[k.length-1].ly,k[k.length-1].uy,r,i)}}for(let o=a;o;o=o.link)if(o!=this&&o.cc.con_type==s.b.Routed&&!o.temporary_ref){let a=Number(o.source_direction==s.e.Right||o.source_direction==s.e.Left);for(;a<o.p_num-1;a+=2)if(o.points[a].x>t){let s,u,h=Math.min(o.points[a].y,o.points[a+1].y),_=Math.max(o.points[a].y,o.points[a+1].y);if(h>n?(u=h,s=n):_<e?(u=e,s=_):(s=Math.max(e,h),u=Math.min(n,_)),!this.nodelist_find(r,e=>e.in_area_exact(t,s,o.points[a].x,u))){let e=(t+o.points[a].x)/2;if(k.find(t=>Math.abs(t.x-e)<this.ctx.draw_delta))continue;if(k.push(new A((t+o.points[a].x)/2,l+this.ctx.draw_delta,c-this.ctx.draw_delta,!1)),this.find_vert_line_low_border(k[k.length-1].x,s,k[k.length-1].uy,k[k.length-1].ly,r,i),this.find_vert_line_high_border(k[k.length-1].x,u,k[k.length-1].ly,k[k.length-1].uy,r,i),k[k.length-1].uy<k[k.length-1].ly)continue}}}return 1}find_vert_line_left(t,e,n,r,o,i,a,l,c){for(let s=o;s;s=s.link)if(s.obst.ur.x<t){let o,a;if(s.obst.ll.y>n?(a=s.obst.ll.y,o=n):s.obst.ur.y<e?(a=e,o=s.obst.ur.y):(o=Math.max(e,s.obst.ll.y),a=Math.min(n,s.obst.ur.y)),!this.nodelist_find(r,e=>e!==s&&e.in_area_exact(s.obst.ur.x,o,t,a))){let e=(t+s.obst.ur.x)/2;if(k.find(t=>Math.abs(t.x-e)<this.ctx.draw_delta))continue;k.push(new A((t+s.obst.ur.x)/2,l+this.ctx.draw_delta,c-this.ctx.draw_delta,!1)),this.find_vert_line_low_border(k[k.length-1].x,o,k[k.length-1].uy,k[k.length-1].ly,r,i),this.find_vert_line_high_border(k[k.length-1].x,a,k[k.length-1].ly,k[k.length-1].uy,r,i)}}for(let o=a;o;o=o.link)if(o!=this&&o.cc.con_type==s.b.Routed&&!o.temporary_ref){let a=Number(o.source_direction==s.e.Right||o.source_direction==s.e.Left);for(;a<o.p_num-1;a+=2)if(o.points[a].x<t){let s,u,h=Math.min(o.points[a].y,o.points[a+1].y),_=Math.max(o.points[a].y,o.points[a+1].y);if(h>n?(u=h,s=n):_<e?(u=e,s=_):(s=Math.max(e,h),u=Math.min(n,_)),!this.nodelist_find(r,e=>e.in_area_exact(o.points[a].x,s,t,u))){let e=(t+o.points[a].x)/2;if(k.find(t=>Math.abs(t.x-e)<this.ctx.draw_delta))continue;if(k.push(new A((t+o.points[a].x)/2,l+this.ctx.draw_delta,c-this.ctx.draw_delta,!1)),this.find_vert_line_low_border(k[k.length-1].x,s,k[k.length-1].uy,k[k.length-1].ly,r,i),this.find_vert_line_high_border(k[k.length-1].x,u,k[k.length-1].ly,k[k.length-1].uy,r,i),k[k.length-1].uy<k[k.length-1].ly)continue}}}return 1}find_horiz_line_right_border(t,e,n,r,o,i){for(let n=o;n;n=n.link)n.in_horiz_line(t,e,r)&&n.obst.ll.x<r&&n.obst.ll.x>=e-x&&(r=n.obst.ll.x);for(let e=i;e;e=e.link)if(e!=this&&!(e.source_node==this.source_node&&e.source_conpoint==this.source_conpoint||e.source_node==this.dest_node&&e.source_conpoint==this.dest_conpoint||e.dest_node==this.source_node&&e.dest_conpoint==this.source_conpoint||e.dest_node==this.dest_node&&e.dest_conpoint==this.dest_conpoint||e.cc.con_type!=s.b.Routed||e.temporary_ref)){let o=Number(!(e.source_direction==s.e.Right||e.source_direction==s.e.Left));for(;o<e.p_num-1;o+=2){let i=Math.min(e.points[o].x,e.points[o+1].x);e.points[o].y-this.ctx.draw_delta<t&&t<e.points[o].y+this.ctx.draw_delta&&i<r&&i>=n-x&&(r=i)}}return r}find_horiz_line_left_border(t,e,n,r,o,i){for(let n=o;n;n=n.link)n.in_horiz_line(t,r,e)&&n.obst.ur.x>r&&n.obst.ur.x<=e+x&&(r=n.obst.ur.x);for(let e=i;e;e=e.link)if(e!=this&&!(e.source_node==this.source_node&&e.source_conpoint==this.source_conpoint||e.source_node==this.dest_node&&e.source_conpoint==this.dest_conpoint||e.dest_node==this.source_node&&e.dest_conpoint==this.source_conpoint||e.dest_node==this.dest_node&&e.dest_conpoint==this.dest_conpoint||e.cc.con_type!=s.b.Routed||e.temporary_ref)){let o=Number(!(e.source_direction==s.e.Right||e.source_direction==s.e.Left));for(;o<e.p_num-1;o+=2){let i=Math.max(e.points[o].x,e.points[o+1].x);e.points[o].y-this.ctx.draw_delta<t&&t<e.points[o].y+this.ctx.draw_delta&&i>r&&i<=n+x&&(r=i)}}return r}find_vert_line_high_border(t,e,n,r,o,i){for(let n=o;n;n=n.link)n.in_vert_line(t,e,r)&&n.obst.ll.y<r&&n.obst.ll.y>=e-x&&(r=n.obst.ll.y);for(let e=i;e;e=e.link)if(e!=this&&!(e.source_node==this.source_node&&e.source_conpoint==this.source_conpoint||e.source_node==this.dest_node&&e.source_conpoint==this.dest_conpoint||e.dest_node==this.source_node&&e.dest_conpoint==this.source_conpoint||e.dest_node==this.dest_node&&e.dest_conpoint==this.dest_conpoint||e.cc.con_type!=s.b.Routed||e.temporary_ref)){let o=Number(e.source_direction==s.e.Right||e.source_direction==s.e.Left);for(;o<e.p_num-1;o+=2){let i=Math.min(e.points[o].y,e.points[o+1].y);e.points[o].x-this.ctx.draw_delta<t&&t<e.points[o].x+this.ctx.draw_delta&&i<r&&i>=n-x&&(r=i)}}return r}find_vert_line_low_border(t,e,n,r,o,i){for(let n=o;n;n=n.link)n.in_vert_line(t,r,e)&&n.obst.ur.y>r&&n.obst.ur.y<=e+x&&(r=n.obst.ur.y);for(let e=i;e;e=e.link)if(e!=this&&!(e.source_node==this.source_node&&e.source_conpoint==this.source_conpoint||e.source_node==this.dest_node&&e.source_conpoint==this.dest_conpoint||e.dest_node==this.source_node&&e.dest_conpoint==this.source_conpoint||e.dest_node==this.dest_node&&e.dest_conpoint==this.dest_conpoint||e.cc.con_type!=s.b.Routed||e.temporary_ref)){let o=Number(e.source_direction==s.e.Right||e.source_direction==s.e.Left);for(;o<e.p_num-1;o+=2){let i=Math.max(e.points[o].y,e.points[o+1].y);e.points[o].x-this.ctx.draw_delta<t&&t<e.points[o].x+this.ctx.draw_delta&&i>r&&i<=n+x&&(r=i)}}return r}nodelist_find(t,e){for(let n=t;n;n=n.link)if(e(n))return!0;return!1}sort_lines(t,e,n,r){E=t,m=this.source_node,v=this.dest_node,e===s.e.Right?k.sort(O):e===s.e.Left&&k.sort(R),e==s.e.Right&&r==s.e.Left&&n.x<=t.x?(S.sort(B),this.ideal_line_cnt=5):e==s.e.Left&&r==s.e.Right&&n.x>t.x?(S.sort(I),this.ideal_line_cnt=5):(S.sort(L),this.ideal_line_cnt=3)}get_borders(t,e,n){}}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(3),o=n(1),i=n(7),s=n(0);class a{constructor(t,e="",n=0,o=0,s=r.a.Line,a=0){this.draw_type=0,this.text_size=0,this.text="",this.ctx=t,this.p=new i.a(t,n,o),this.text=e,this.draw_type=s,this.text_size=a}draw(t,e,n,r,o){let i=this.ctx.zoom_factor/this.ctx.base_zoom_factor*(this.text_size+4)-4;if(i<0)return;let s=this.p.z_x()+t.z_x(),a=this.p.z_y()+t.z_y(),l=i<0||i>7?3*i:[8,10,12,14,14,18,18,18][i];this.ctx.gdraw.gctx.font=l+"px Arial",this.ctx.gdraw.gctx.lineWidth=.5,this.ctx.gdraw.gctx.fillStyle=e?"red":"black",this.ctx.gdraw.gctx.fillText(this.text,s,a)}open(t){for(;;){let e=t.consumeInt();switch(e){case o.k.Text:break;case o.k.Text_text_size:this.text_size=t.consumeInt();break;case o.k.Text_draw_type:this.draw_type=t.consumeInt();break;case o.k.Text_text:this.text=t.consumeLine();break;case o.k.Text_p:this.p.open(t);break;case o.k.End:return;default:console.log("Syntax error in FlowText:",e),t.consumeLine()}}}move(t){this.p.set(t),this.ctx.set_dirty()}shift(t){this.p.set(s.f.add(this.p,t)),this.ctx.set_dirty()}get_borders(t,e,n){}}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(2),o=n(1),i=n(12),s=n(14),a=n(17),l=n(16);class c{constructor(t,e="",n=0){this.nc_name="",this.group=0,this.push=t=>this.a.push(t),this.a=new i.a(t),this.ctx=t,this.nc_name=e,this.group=n}draw(t,e,n,r,o){this.a.draw(t,e,n,r,o)}open(t){for(;;){let e=t.consumeInt();switch(e){case o.k.NodeClass_nc_name:this.nc_name=t.consumeLine();break;case o.k.NodeClass_a:this.a.open(t);break;case o.k.NodeClass_group:this.group=t.consumeInt();break;case o.k.NodeClass_no_con_obstacle:t.consumeLine();break;case o.k.End:return;default:console.log("Syntax error in FlowNodeClass:",e),t.consumeLine()}}}event_handler(t,e){return 0}get_obstacle_borders(t,e,n){if(this.group===r.g.Document||this.no_con_obstacle)for(let r=0;r<this.a.length;r++)this.a[r]instanceof s.a&&this.a[r].get_borders(t,e,n);else this.a.get_borders(t,e,n)}get_conpoint(t){for(let e=0;e<this.a.length;e++){let n=this.a[e].get_conpoint(t);if(n)return n}return null}configure_annotations(t){for(let e=0;e<this.a.length;e++)this.a[e]instanceof a.a?this.a[e].configure_annotations(t):this.a[e]instanceof l.a&&this.a[e].configure_annotations(t)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),o=n(4),i=n(3);class s{constructor(){this.clip=new Array(10),this.clipCount=0,this.CUSTOMCOLORS_STACK_SIZE=10,this.customcolors=new Array(this.CUSTOMCOLORS_STACK_SIZE),this.customcolors_cnt=0,this.canvas=document.querySelector("canvas"),this.gctx=this.canvas.getContext("2d"),this.gctx.save()}drawTypeToColor(t,e,n){n?t=i.a.LineGray:t==i.a.LineGray&&e?t=i.a.Line:e&&(t+=1);let r=o.a.rgb_color(t,this.get_customcolors());return"rgb("+Math.floor(255*r.r)+","+Math.floor(255*r.g)+","+Math.floor(255*r.b)+")"}getFont(t,e,n){return(e===i.a.TextHelveticaBold?"bold ":"")+n+"px "+["Helvetica","Times","NewCenturySchoolbook","Courier","LucidaSans"][t]}setupGCtx(t,e,n,r){this.gctx.lineWidth=e+1,this.gctx.fillStyle=this.drawTypeToColor(t,n,r),this.gctx.strokeStyle=this.gctx.fillStyle}rect(t,e,n,r,o,i,s=0,a=!1,l=!1){this.setupGCtx(o,s,a,l),i?this.gctx.fillRect(t,e,n,r):this.gctx.strokeRect(t,e,n,r)}arc(t,e,n,r,o,i,s,a,l=0,c=!1,u=!1){this.setupGCtx(s,l,c,u),this.gctx.beginPath(),360!==i&&this.gctx.moveTo(t+n/2,e+r/2),"function"==typeof this.gctx.ellipse?this.gctx.ellipse(t+n/2,e+r/2,n/2,r/2,0,-o*Math.PI/180,-(o+i)*Math.PI/180,!0):this.gctx.arc(t+n/2,e+r/2,n/2,-o*Math.PI/180,-(o+i)*Math.PI/180,!0),a?this.gctx.fill():this.gctx.stroke()}line(t,e,n,o,s=i.a.Line,a=0,l=r.e.Solid,c=!1,u=!1){switch(this.setupGCtx(s,a,c,u),l){case r.e.Dashed1:this.gctx.setLineDash([a,a]);break;case r.e.Dashed2:this.gctx.setLineDash([2*a,2*a]);break;case r.e.Dashed3:this.gctx.setLineDash([4*a,4*a]);break;case r.e.Dotted:this.gctx.setLineDash([a,6*a]);break;case r.e.DotDashed1:this.gctx.setLineDash([a,2*a,4*a,2*a]);break;case r.e.DotDashed2:this.gctx.setLineDash([a,4*a,8*a,4*a])}this.gctx.beginPath(),this.gctx.moveTo(t,e),this.gctx.lineTo(n,o),this.gctx.stroke(),l!==r.e.Solid&&this.gctx.setLineDash([])}polyline(t,e,n,r,o=0,i=!1,s=!1){if(t&&t.length){this.setupGCtx(n,o,i,s),this.gctx.beginPath(),this.gctx.moveTo(t[0].x,t[0].y);for(let n=1;n<e;n++)this.gctx.lineTo(t[n].x,t[n].y);r?this.gctx.fill():this.gctx.stroke()}}text(t,e,n,r,o,i,s,a=0,l=!1,c=!1){this.gctx.font=this.getFont(i,r,s),this.gctx.lineWidth=s+1,this.gctx.fillStyle=this.drawTypeToColor(o,l,c);let u=this.getTextExtent(n,r,i,s),h=t+u.width/2,_=e+u.height/2;180===a?(h+=u.width/2,_+=u.height/4):270===a?(h-=u.height/4,_+=u.width/2):90===a?(h+=u.height/4,_-=u.width/2):(h-=u.width/2,_-=u.height/4),this.gctx.save(),this.gctx.translate(h,_),this.gctx.rotate(a*Math.PI/180);let f=n.split("\n");for(let t=0;t<f.length;t++)this.gctx.fillText(f[t],0,t*s);this.gctx.restore()}image(t,e,n,r,o,i=null){this.gctx.save(),i&&(this.gctx.putImageData(i,t,e),this.gctx.globalCompositeOperation="source-in"),this.gctx.drawImage(o,t,e,n,r),this.gctx.restore()}pixmaps_create(t){let e=null,n=new Array(9);for(let r=0;r<9;r++){if(0===r||t[r].bits!==e.bits){n[r]=this.gctx.createImageData(t[r].width,t[r].height);for(let e=0;e<t[r].bits.length;e++)n[r].data[e]=t[r].bits[e]}else n[r]=n[r-1];e=t[r]}return n}pixmap(t,e,n,r,o,i,s){this.setupGCtx(o,s,!1,!1),this.gctx.fillRect(t,e,n.width,n.height),this.setupGCtx(i,s,!1,!1),this.gctx.save(),this.gctx.putImageData(r,t,e),this.gctx.globalCompositeOperation="source-in",this.gctx.fillRect(t,e,n.width,n.height),this.gctx.restore()}getTextExtent(t,e,n,r,o=0){this.gctx.font=this.getFont(n,e,r),this.gctx.lineWidth=r+1;let i=0,s=0,a=t.split("\n");for(let t=0;t<a.length;t++)i=Math.max(i,this.gctx.measureText(a[t]).width),s+=r;return 90===o||270===o?{width:s,height:i,descent:.22*s}:{width:i,height:s,descent:.22*s}}createGradient(t,e,n,o,i,s,a,l){let c=Math.sqrt(n*n+o*o);l!==r.d.Globe&&l!==r.d.RadialCenter||(c/=2);let u,h=this.drawTypeToColor(i,!1,!1),_=this.drawTypeToColor(s,!1,!1),f=this.drawTypeToColor(a,!1,!1);switch(l){case r.d.HorizontalUp:case r.d.HorizontalDown:case r.d.HorizontalTube1:case r.d.HorizontalTube2:u=this.gctx.createLinearGradient(t,e,t,e+o);break;case r.d.VerticalRight:case r.d.VerticalLeft:case r.d.VerticalTube1:case r.d.VerticalTube2:u=this.gctx.createLinearGradient(t,e,t+n,e);break;case r.d.DiagonalUpperLeft:u=this.gctx.createLinearGradient(t,e,t+n,e+o);break;case r.d.DiagonalLowerLeft:u=this.gctx.createLinearGradient(t,e+o,t+n,e);break;case r.d.DiagonalUpperRight:u=this.gctx.createLinearGradient(t+n,e,t,e+o);break;case r.d.DiagonalLowerRight:u=this.gctx.createLinearGradient(t+n,e+o,t,e);break;case r.d.DiagonalUpTube:u=this.gctx.createLinearGradient(t+n/5,e+o/5,t+4*n/5,e+4*o/5);break;case r.d.DiagonalDownTube:u=this.gctx.createLinearGradient(t+4*n/5,e+o/5,t+n/5,e+4*o/5);break;case r.d.Globe:u=this.gctx.createRadialGradient(t+.3*n,e+.3*o,1,t+.3*n,e+.3*o,c);break;case r.d.RadialCenter:u=this.gctx.createRadialGradient(t+.5*n,e+.5*o,1,t+.5*n,e+.5*o,c);break;case r.d.RadialUpperLeft:u=this.gctx.createRadialGradient(t,e,1,t,e,c);break;case r.d.RadialLowerLeft:u=this.gctx.createRadialGradient(t,e+o,1,t,e+o,c);break;case r.d.RadialUpperRight:u=this.gctx.createRadialGradient(t+n,e,1,t+n,e,c);break;case r.d.RadialLowerRight:u=this.gctx.createRadialGradient(t+n,e+o,1,t+n,e+o,c);break;default:return}switch(l){case r.d.HorizontalTube1:case r.d.VerticalTube1:u.addColorStop(0,_),u.addColorStop(.5,f),u.addColorStop(1,_);break;case r.d.DiagonalUpTube:case r.d.DiagonalDownTube:u.addColorStop(.1,_),u.addColorStop(.5,f),u.addColorStop(.9,_);break;case r.d.HorizontalTube2:case r.d.VerticalTube2:u.addColorStop(0,h),u.addColorStop(.3,f),u.addColorStop(.95,_);break;default:u.addColorStop(.1,f),u.addColorStop(.9,_)}return u}gradient_rotate(t,e){let n=e,o=360*(t/360-Math.floor(t/360));for(;o>45;){switch(n){case r.d.HorizontalUp:n=r.d.VerticalRight;break;case r.d.HorizontalDown:n=r.d.VerticalLeft;break;case r.d.HorizontalTube1:n=r.d.VerticalTube1;break;case r.d.HorizontalTube2:n=r.d.VerticalTube2;break;case r.d.VerticalLeft:n=r.d.HorizontalUp;break;case r.d.VerticalRight:n=r.d.HorizontalDown;break;case r.d.VerticalTube1:n=r.d.HorizontalTube1;break;case r.d.VerticalTube2:n=r.d.HorizontalTube2;break;case r.d.DiagonalUpperLeft:n=r.d.DiagonalUpperRight;break;case r.d.DiagonalLowerLeft:n=r.d.DiagonalUpperLeft;break;case r.d.DiagonalUpperRight:n=r.d.DiagonalLowerRight;break;case r.d.DiagonalLowerRight:n=r.d.DiagonalLowerLeft;break;case r.d.DiagonalUpTube:n=r.d.DiagonalDownTube;break;case r.d.DiagonalDownTube:n=r.d.DiagonalUpTube;break;case r.d.RadialUpperLeft:n=r.d.RadialUpperRight;break;case r.d.RadialLowerLeft:n=r.d.RadialUpperLeft;break;case r.d.RadialUpperRight:n=r.d.RadialLowerRight;break;case r.d.RadialLowerRight:n=r.d.RadialLowerLeft}o-=90}return n}gradient_fill_rect(t,e,n,r,o,i,s,a){this.gctx.fillStyle=this.createGradient(t,e,n,r,o,i,s,a),this.gctx.fillRect(t,e,n,r)}gradient_fill_rectrounded(t,e,n,r,o,i,s,a,l){this.gctx.fillStyle=this.createGradient(t,e,n,r,i,s,a,l),this.gctx.beginPath(),this.gctx.moveTo(t+o,e),this.gctx.arcTo(t+n,e,t+n,e+r,o),this.gctx.arcTo(t+n,e+r,t,e+r,o),this.gctx.arcTo(t,e+r,t,e,o),this.gctx.arcTo(t,e,t+n,e,o),this.gctx.closePath(),this.gctx.fill()}gradient_fill_arc(t,e,n,r,o,i,s,a,l,c){this.gctx.fillStyle=this.createGradient(t,e,n,r,s,a,l,c),this.gctx.beginPath(),360!==i&&this.gctx.moveTo(t+n/2,e+r/2),"function"==typeof this.gctx.ellipse?this.gctx.ellipse(t+n/2,e+r/2,n/2,r/2,0,-o*Math.PI/180,-(o+i)*Math.PI/180,!0):this.gctx.arc(t+n/2,e+r/2,n/2,-o*Math.PI/180,-(o+i)*Math.PI/180,!0),this.gctx.fill()}gradient_fill_polyline(t,e,n,r,o,i){if(!t||!t.length)return;let s=t.slice(0,e),a=s.reduce((t,e)=>Math.min(t,e.x),Number.MAX_VALUE),l=s.reduce((t,e)=>Math.min(t,e.y),Number.MAX_VALUE),c=s.reduce((t,e)=>Math.max(t,e.x),-Number.MAX_VALUE),u=s.reduce((t,e)=>Math.max(t,e.y),-Number.MAX_VALUE);this.gctx.beginPath(),this.gctx.moveTo(t[0].x,t[0].y);for(let n=1;n<e;n++)this.gctx.lineTo(t[n].x,t[n].y);this.gctx.fillStyle=this.createGradient(a,l,c-a,u-l,n,r,o,i),this.gctx.fill()}set_clip_rectangle(t,e,n,o){if(this.clipCount>0){if(this.clipCount>=10)return!1;t=Math.max(t,this.clip[this.clipCount-1].ll.x),e=Math.max(e,this.clip[this.clipCount-1].ll.y),n=Math.min(n,this.clip[this.clipCount-1].ur.x),o=Math.min(o,this.clip[this.clipCount-1].ur.y)}return this.clip[this.clipCount]=new r.i(t,e,n,o),this.clipCount++,this.gctx.restore(),this.gctx.save(),this.gctx.beginPath(),this.gctx.rect(t,e,n-t,o-e),this.gctx.clip(),!0}reset_clip_rectangle(){this.clipCount?(this.clipCount--,this.clipCount>0?(this.gctx.restore(),this.gctx.save(),this.gctx.beginPath(),this.gctx.rect(this.clip[this.clipCount-1].ll.x,this.clip[this.clipCount-1].ll.y,this.clip[this.clipCount-1].width(),this.clip[this.clipCount-1].height()),this.gctx.clip()):(this.gctx.restore(),this.gctx.save())):console.log("Clip mismatch")}get_clip_rectangle(){return this.clip[this.clipCount-1]||null}set_customcolors(t){this.customcolors[0]=t,this.customcolors_cnt=1}push_customcolors(t){if(this.customcolors_cnt>this.CUSTOMCOLORS_STACK_SIZE)console.log("** Max number custom colors exceede");else{for(let t=this.customcolors_cnt;t>0;t--)this.customcolors[t]=this.customcolors[t-1];this.customcolors[0]=t,this.customcolors_cnt++}}pop_customcolors(){this.customcolors_cnt;for(let t=0;t<this.customcolors_cnt-1;t++)this.customcolors[t]=this.customcolors[t+1];this.customcolors_cnt--}get_customcolors(){return this.customcolors_cnt?this.customcolors[0]:null}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{constructor(t){this.str=t}consumeChar(){let t=this.str[0];return this.str=this.str.substring(1),t}consumeWord(){let t=this.str.search(/[ \n]/),e=this.str.substring(0,t);return this.str=this.str.substring(t+1),e}consumeLine(){let t=this.str.indexOf("\n"),e=this.str.substring(0,t);return this.str=this.str.substring(t+1),e}consumeBool(){return Boolean(parseInt(this.consumeWord(),10))}consumeInt(){return parseInt(this.consumeWord(),10)}consumeFloat(){return parseFloat(this.consumeWord())}consumeQuotedString(){if('"'!==this.str[0])return"";let t=1;for(;'"'!==this.str[t]||"\\"===this.str[t-1];)t++;let e=this.str.substring(1,t).replace('\\"','"');return this.str=this.str.substring(t+1),e}}},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n(21),o=n(3),i=n(0),s=n(2),a=n(1),l=n(12),c=n(13),u=n(7),h=n(18);class _{constructor(){this.display_level=s.f.One,this.gdh=null,this.zoom_factor=20,this.base_zoom_factor=20,this.offset_x=0,this.offset_y=0,this.name="Claes context",this.nodraw=!1,this.is_dirty=!1,this.select_object=null,this.event_callbacks=new Array(a.e.__),this.ll=new u.a(this),this.ur=new u.a(this),this.a=new l.a(this),this.a_nc=new l.a(this),this.a_cc=new l.a(this),this.a_sel=new l.a(this),this.a_paste=new l.a(this),this.a_move=new l.a(this),this.gdraw=new r.a}type(){return a.a.Flow}draw(){if(this.nodraw||!this.is_dirty)return;this.gdraw.gctx.fillStyle="white",this.gdraw.gctx.fillRect(0,0,this.gdraw.canvas.width,this.gdraw.canvas.height);let t=new i.i(this.ll.x,this.ll.y,this.ur.x,this.ur.y);for(let e=0;e<this.a.length;e++)this.a[e].draw(t);this.select_rect_active&&this.gdraw.rect(this.select_rect.ll.x,this.select_rect.ll.y,this.select_rect.ur.x,this.select_rect.ur.y,o.a.Line,!1,0),this.is_dirty=!1}set_dirty(){this.nodraw||(this.is_dirty=!0,setTimeout(this.draw.bind(this),25))}set_nodraw(){this.nodraw=!0}reset_nodraw(){this.nodraw=!1}open(t){for(;;){let e=t.consumeInt();switch(e){case a.k.Ctx:break;case a.k.Ctx_zoom_factor:this.zoom_factor=t.consumeFloat();break;case a.k.Ctx_base_zoom_factor:this.base_zoom_factor=t.consumeFloat();break;case a.k.Ctx_offset_x:this.offset_x=t.consumeInt();break;case a.k.Ctx_offset_y:this.offset_y=t.consumeInt();break;case a.k.Ctx_nav_zoom_factor:case a.k.Ctx_print_zoom_factor:case a.k.Ctx_nav_offset_x:case a.k.Ctx_nav_offset_y:t.consumeLine();break;case a.k.Ctx_x_right:this.ur.x=t.consumeFloat();break;case a.k.Ctx_x_left:this.ll.x=t.consumeFloat();break;case a.k.Ctx_y_high:this.ur.y=t.consumeFloat();break;case a.k.Ctx_y_low:this.ll.y=t.consumeFloat();break;case a.k.Ctx_nav_rect_ll_x:case a.k.Ctx_nav_rect_ll_y:case a.k.Ctx_nav_rect_ur_x:case a.k.Ctx_nav_rect_ur_y:case a.k.Ctx_nav_rect_hot:t.consumeLine();break;case a.k.Ctx_name:this.name=t.consumeLine();break;case a.k.Ctx_user_highlight:case a.k.Ctx_grid_size_x:case a.k.Ctx_grid_size_y:case a.k.Ctx_grid_on:case a.k.Ctx_draw_delta:case a.k.Ctx_refcon_width:case a.k.Ctx_refcon_height:case a.k.Ctx_refcon_textsize:case a.k.Ctx_refcon_linewidth:case a.k.Ctx_user_version:t.consumeLine();break;case a.k.Ctx_a_nc:this.a_nc.open(t);break;case a.k.Ctx_a_cc:this.a_cc.open(t);break;case a.k.Ctx_a:this.a.open(t);break;case a.k.End:return void this.get_borders();default:console.log("Syntax error in FlowCtx:",e),t.consumeLine()}}}connect(){for(let t=0;t<this.a.length;t++)this.a[t].connect()}scan(){for(let t=0;t<this.a.length;t++)this.a[t].scan()}event_handler(t,e){let n=0;if(t===a.e.MB1Click){for(let r=0;r<this.a.length&&!(this.a[r]instanceof c.a&&1===(n=this.a[r].event_handler(t,e)));r++);1===n&&this.draw()}if(this.event_callbacks[t]&&n!==a.d&&t!==this.event_move_node){let n=new a.f(t);return n.x=(e.x+this.offset_x)/this.zoom_factor,n.y=(e.y+this.offset_y)/this.zoom_factor,n.object_type=a.i.Node,n.object=this.select_object,this.event_callbacks[t](this,n)}return 1}set_select(t){for(let e=0;e<this.a.length;e++)this.a[e]instanceof c.a&&this.a[e].set_select(t)}remove(t){this.select_object===t&&(this.select_object=null),this.a.remove(t)}get_borders(){let t=new i.i(1e10,1e10,-1e10,-1e10);this.a.get_borders(new i.f,t,null),this.ll.set(t.ll),this.ur.set(t.ur)}is_visible(t,e){let n=t.ll.x,r=t.ll.y,o=t.ur.x,i=t.ur.y,s=this.offset_x/this.zoom_factor,l=(this.offset_x+this.gdraw.canvas.width)/this.zoom_factor,c=this.offset_y/this.zoom_factor,u=(this.offset_y+this.gdraw.canvas.height)/this.zoom_factor;return e==a.l.Full?n>=s&&o<=l&&r>=c&&i<=u:e==a.l.Partial?(r>=c&&r<=u||i>=c&&i<=u||r<=c&&i>=u)&&(n>=s&&n<=l||o>=s&&o<=l||n<=s&&o>=l):e==a.l.Top?i>=c&&i<=u&&(n>=s&&n<=l||o>=s&&o<=l||n<=s&&o>=l):e==a.l.Bottom?r>=c&&r<=u&&(n>=s&&n<=l||o>=s&&o<=l||n<=s&&o>=l):e==a.l.Right?o>=s&&o<=l&&(r>=c&&r<=u||i>=c&&i<=u||r<=c&&i>=u):e==a.l.Left&&(n>=s&&n<=l&&(r>=c&&r<=u||i>=c&&i<=u||r<=c&&i>=u))}scroll(t,e){window.scrollTo(window.scrollX,t*this.zoom_factor-window.innerHeight*e)}center_object(t,e){console.log("center_object",t.pos.z_x()+this.offset_x,window.innerWidth,t.pos.z_x()+this.offset_x-window.innerWidth/2,t.pos.z_y()+this.offset_y,window.innerHeight,t.pos.z_y()+this.offset_y-window.innerHeight/2),window.scrollTo(t.pos.z_x()+this.offset_x-window.innerWidth/2,t.pos.z_y()+this.offset_y-window.innerHeight/2)}enable_event(t,e,n){this.event_callbacks[t]=n}zoom(t){this.zoom_factor*=t,this.offset_x=(this.offset_x-this.gdraw.canvas.width/2*(1/t-1))*t,this.offset_y=(this.offset_y-this.gdraw.canvas.height/2*(1/t-1))*t}unzoom(){this.zoom(this.base_zoom_factor/this.zoom_factor)}traverse(t){this.offset_x-=t.x,this.offset_y-=t.y,this.con_create_active&&(this.con_create_conpoint.x+=t.x,this.con_create_conpoint.y+=t.y),this.select_rect_active&&(this.select_rect.ll.x===this.select_rect_start.x&&(this.select_rect.ll.x+=t.x),this.select_rect.ll.y===this.select_rect_start.x&&(this.select_rect.ll.y+=t.y),this.select_rect.ur.x===this.select_rect_start.x&&(this.select_rect.ur.x+=t.x),this.select_rect.ur.y===this.select_rect_start.x&&(this.select_rect.ur.y+=t.y),this.select_rect_start.x+=t.x,this.select_rect_start.y+=t.y)}cursor_present(){return!0}select_clear(){if(this.event_callbacks.SelectClear){let t=new CustomEvent("SelectClear");this.event_callbacks.SelectClear(this,t)}if(!this.user_highlight)for(let t=0;t<this.a_sel.length;t++)this.a_sel[t].set_highlight(0);this.a_sel.clear()}cut(){if(this.a_sel.length){this.a_paste=this.a_sel.deep_copy();for(let t=0;t<this.a_sel.length;t++)this.remove(this.a_sel[t]),this.a_sel[t].remove_notify();this.select_clear()}}copy(){this.a_sel.length&&(this.a_paste=this.a_sel.deep_copy(),this.select_clear())}paste(){this.cursor_present()?this.paste_execute():this.node_movement_paste_pending=!0}paste_execute(){if(this.node_movement_paste_active)return;this.application_paste?this.a_move=this.a_paste.copy():this.a_move=this.a_paste.deep_copy(),this.a_move.forEach(t=>{t instanceof h.a&&(t.movement_type=a.h.Frozen)}),this.select_clear(),this.a_move.forEach(t=>this.a.push(t)),this.application_paste?this.a_sel=this.a_move.copy():this.a_sel=this.a_move.deep_copy();let t=new i.i(1e10,1e10,-1e10,-1e10);this.a_move.get_borders(new i.f(0,0),t,null);let e=Math.floor((t.ur.x+t.ll.x)/2*this.zoom_factor-this.offset_x-this.cursor.x),n=Math.floor((t.ur.y+t.ll.y)/2*this.zoom_factor-this.offset_y-this.cursor.y);this.node_movement_paste_active=!0;for(let t=0;t<this.a_move.length;t++)this.a_move[t].move_noerase(-e,-n,0);this.node_move_last=new i.f(this.cursor.x,this.cursor.y),this.event_callbacks.paste&&this.event_callbacks.paste(this,new ClipboardEvent("paste"))}delete_all(){this.set_nodraw();for(let t=0;t<this.a.length;t++){let e=this.a[t];this.remove(e),this.a_sel.remove(e),this.a_move.remove(e),t--}this.reset_nodraw()}delete_object(t){this.remove(t),this.a_sel.remove(t),this.a_move.remove(t)}find_grid(t){if(!this.grid_on)return t;let e=Math.floor(t.x/this.grid_size.x)*this.grid_size.x,n=Math.floor(t.y/this.grid_size.y)*this.grid_size.y;return new i.f(t.x-e<.5*this.grid_size.x?e:e+this.grid_size.x,t.y-n<.5*this.grid_size.y?n:n+this.grid_size.y)}get_document(t){return this.a.find(e=>e instanceof c.a&&e.nc.group==s.g.Document&&e.ll.x<t.x&&e.ur.x>t.x&&e.ll.y<t.y&&e.ur.y>t.y)}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},,,function(t,e,n){"use strict";n.r(e);var r=n(6),o=n(5),i=n(22),s=n(0),a=n(9),l=n(1),c=n(23),u=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{l(r.next(t))}catch(t){i(t)}}function a(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}l((r=r.apply(t,e||[])).next())})};new class{constructor(){this.timer=null,this.vars_object=null,this.ctx=new c.a,a.a.fetchFromStore();let t="http://"+localStorage.getItem("HOST")+"/"+this.get_filename();console.log("Target: ",t);let e=new XMLHttpRequest,n=this.read_func.bind(this);e.onload=function(){console.log("Done:",e.status),n(e.responseText)},e.onerror=function(){console.log("Error! Failed to fetch resource "+t)},e.open("GET",t,!0),e.send()}render(){return u(this,void 0,void 0,function*(){if(!a.a.priv)return void new a.a(this.render.bind(this));yield o.d.init();let t=Object(r.a)(".toolbar",{role:"toolbar"}),e=["graph","navigator","history","object"],n=[];for(let o=0;o<e.length;o++){let i=Object(r.a)(".toolbar-item",{role:"button",tabindex:0===o?"0":"-1"});n.push(i),Object(r.b)(i,Object(r.a)("img",{src:"toolbar_"+e[o]+".png",title:"Open "+e[o]})),Object(r.b)(t,i)}n[1].addEventListener("click",()=>{console.log("storage",localStorage.getItem("XttMethodNavigator")),null!==c.select_object&&localStorage.setItem("XttMethodNavigator",c.select_object.trace_object),console.log("storage",localStorage.getItem("XttMethodNavigator")),console.log("toolitem2 event window",window.opener),window.opener.focus()});let i=Object(r.a)("canvas",{id:"canvas",width:"1200",height:"800",style:"border: 1px black solid"});this.ctx.gdraw.canvas=i,this.ctx.gdraw.gctx=i.getContext("2d");let c=this.ctx;i.addEventListener("click",function(t){let e=new s.f(t.pageX-t.target.offsetLeft,t.pageY-t.target.offsetTop);c.event_handler(l.e.MB1Click,e)}),i.addEventListener("wheel",function(t){let e=new s.f(t.pageX-t.target.offsetLeft,t.pageY-t.target.offsetTop);c.event_handler(t.deltaY>0?l.e.ScrollDown:l.e.ScrollUp,e),t.preventDefault()}),Object(r.c)(document.body,[t,i]),c.set_dirty()})}read_func(t){if(this.ctx.open(new i.a(t)),this.render(),this.ctx.gdraw.canvas.width=this.ctx.ur.z_x()-this.ctx.ll.z_x(),this.ctx.gdraw.canvas.height=this.ctx.ur.z_y()-this.ctx.ll.z_y(),this.ctx.gdraw.gctx.translate(-this.ctx.ll.z_x(),-this.ctx.ll.z_y()),this.ctx.offset_x-=this.ctx.ll.z_x(),this.ctx.offset_y-=this.ctx.ll.z_y(),this.flow_open(),null!==this.vars_object){let t=this.ctx.a.search_by_name(this.vars_object);t&&(this.ctx.center_object(t),this.ctx.set_select(!1),t.set_select(!0))}}flow_open(){this.ctx.connect(),this.timer=setTimeout(this.flow_cyclic.bind(this),1e3)}flow_cyclic(){o.d.getRefObjectInfoAll(this.ctx.scan.bind(this.ctx)),this.ctx.set_dirty(),this.timer=setTimeout(this.flow_cyclic.bind(this),1e3)}get_filename(){let t=window.location.search.substring(1);console.log("query",t);let e=t.split("&");console.log("vars",e.length,e[0].substring(4),e[1].substring(4));let n=parseInt(e[0].substring(4)),r=parseInt(e[1].substring(4)),o=[],i=[];o[0]=255&n,o[1]=n>>8&255,o[2]=n>>16&255,o[3]=n>>24&255;for(let t=0;t<4;t++){i[t]=o[t].toString();for(let e=0;e<3;e++)i[t].length<3&&(i[t]="0"+i[t])}let s=r.toString(16);for(let t=0;t<8;t++)s.length<8&&(s="0"+s);let a="pwr_"+i[3]+"_"+i[2]+"_"+i[1]+"_"+i[0]+"_"+s+".flw";return console.log(a),e.length>2&&(this.vars_object=e[2].substring(4),console.log("vars object: ",this.vars_object)),a}}}]);